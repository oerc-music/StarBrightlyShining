{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DocumentLoaderMediated = void 0;\n\nconst bus_http_1 = require(\"@comunica/bus-http\");\n\nconst jsonld_context_parser_1 = require(\"jsonld-context-parser\");\n\nconst stringifyStream = require(\"stream-to-string\");\n/**\n * A JSON-LD document loader that fetches over an HTTP bus using a given mediator.\n */\n\n\nclass DocumentLoaderMediated extends jsonld_context_parser_1.FetchDocumentLoader {\n  constructor(mediatorHttp, context) {\n    super(DocumentLoaderMediated.createFetcher(mediatorHttp, context));\n    this.mediatorHttp = mediatorHttp;\n    this.context = context;\n  }\n\n  static createFetcher(mediatorHttp, context) {\n    return async (url, init) => {\n      const response = await mediatorHttp.mediate({\n        input: url,\n        init,\n        context\n      });\n\n      response.json = async () => JSON.parse(await stringifyStream(bus_http_1.ActorHttp.toNodeReadable(response.body)));\n\n      return response;\n    };\n  }\n\n}\n\nexports.DocumentLoaderMediated = DocumentLoaderMediated;","map":{"version":3,"sources":["/Users/mark/localRepos/StarBrightlyShining/node_modules/@comunica/actor-rdf-parse-jsonld/lib/DocumentLoaderMediated.js"],"names":["Object","defineProperty","exports","value","DocumentLoaderMediated","bus_http_1","require","jsonld_context_parser_1","stringifyStream","FetchDocumentLoader","constructor","mediatorHttp","context","createFetcher","url","init","response","mediate","input","json","JSON","parse","ActorHttp","toNodeReadable","body"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,sBAAR,GAAiC,KAAK,CAAtC;;AACA,MAAMC,UAAU,GAAGC,OAAO,CAAC,oBAAD,CAA1B;;AACA,MAAMC,uBAAuB,GAAGD,OAAO,CAAC,uBAAD,CAAvC;;AACA,MAAME,eAAe,GAAGF,OAAO,CAAC,kBAAD,CAA/B;AACA;AACA;AACA;;;AACA,MAAMF,sBAAN,SAAqCG,uBAAuB,CAACE,mBAA7D,CAAiF;AAC7EC,EAAAA,WAAW,CAACC,YAAD,EAAeC,OAAf,EAAwB;AAC/B,UAAMR,sBAAsB,CAACS,aAAvB,CAAqCF,YAArC,EAAmDC,OAAnD,CAAN;AACA,SAAKD,YAAL,GAAoBA,YAApB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACH;;AACmB,SAAbC,aAAa,CAACF,YAAD,EAAeC,OAAf,EAAwB;AACxC,WAAO,OAAOE,GAAP,EAAYC,IAAZ,KAAqB;AACxB,YAAMC,QAAQ,GAAG,MAAML,YAAY,CAACM,OAAb,CAAqB;AAAEC,QAAAA,KAAK,EAAEJ,GAAT;AAAcC,QAAAA,IAAd;AAAoBH,QAAAA;AAApB,OAArB,CAAvB;;AACAI,MAAAA,QAAQ,CAACG,IAAT,GAAgB,YAAYC,IAAI,CAACC,KAAL,CAAW,MAAMb,eAAe,CAACH,UAAU,CAACiB,SAAX,CAAqBC,cAArB,CAAoCP,QAAQ,CAACQ,IAA7C,CAAD,CAAhC,CAA5B;;AACA,aAAOR,QAAP;AACH,KAJD;AAKH;;AAZ4E;;AAcjFd,OAAO,CAACE,sBAAR,GAAiCA,sBAAjC","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentLoaderMediated = void 0;\nconst bus_http_1 = require(\"@comunica/bus-http\");\nconst jsonld_context_parser_1 = require(\"jsonld-context-parser\");\nconst stringifyStream = require(\"stream-to-string\");\n/**\n * A JSON-LD document loader that fetches over an HTTP bus using a given mediator.\n */\nclass DocumentLoaderMediated extends jsonld_context_parser_1.FetchDocumentLoader {\n    constructor(mediatorHttp, context) {\n        super(DocumentLoaderMediated.createFetcher(mediatorHttp, context));\n        this.mediatorHttp = mediatorHttp;\n        this.context = context;\n    }\n    static createFetcher(mediatorHttp, context) {\n        return async (url, init) => {\n            const response = await mediatorHttp.mediate({ input: url, init, context });\n            response.json = async () => JSON.parse(await stringifyStream(bus_http_1.ActorHttp.toNodeReadable(response.body)));\n            return response;\n        };\n    }\n}\nexports.DocumentLoaderMediated = DocumentLoaderMediated;\n//# sourceMappingURL=DocumentLoaderMediated.js.map"]},"metadata":{},"sourceType":"script"}