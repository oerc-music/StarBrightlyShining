{"ast":null,"code":"import ActivityHandler from './ActivityHandler';\n/* babel-plugin-inline-import './activity.sparql' */\n\nconst queryTemplate = \"SELECT ?activity WHERE {\\n  ?activity a _:type;\\n      <https://www.w3.org/ns/activitystreams#actor> _:actor;\\n      <https://www.w3.org/ns/activitystreams#object> _:object.\\n}\\n\";\nimport { replaceVariables } from '../util';\n/**\n * Handler that finds an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\n\nexport default class FindActivityHandler extends ActivityHandler {\n  constructor(...args) {\n    super(...args);\n    this.requireUser = false;\n  } // Finds all activities in the document matching the given pattern\n\n\n  async *createResults(activity, document, queryEngine) {\n    const query = replaceVariables(queryTemplate, activity);\n\n    for await (const binding of queryEngine.execute(query, document)) yield binding.values().next().value;\n  }\n\n}","map":{"version":3,"sources":["/Users/mark/localRepos/StarBrightlyShining/node_modules/@solid/query-ldflex/module/handlers/FindActivityHandler.js"],"names":["ActivityHandler","queryTemplate","replaceVariables","FindActivityHandler","constructor","args","requireUser","createResults","activity","document","queryEngine","query","binding","execute","values","next","value"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,mBAA5B;AAEA;;AACA,MAAMC,aAAa,GAAG,oLAAtB;AACA,SAASC,gBAAT,QAAiC,SAAjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,MAAMC,mBAAN,SAAkCH,eAAlC,CAAkD;AAC/DI,EAAAA,WAAW,CAAC,GAAGC,IAAJ,EAAU;AACnB,UAAM,GAAGA,IAAT;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACD,GAJ8D,CAM/D;;;AACoB,SAAbC,aAAa,CAACC,QAAD,EAAWC,QAAX,EAAqBC,WAArB,EAAkC;AACpD,UAAMC,KAAK,GAAGT,gBAAgB,CAACD,aAAD,EAAgBO,QAAhB,CAA9B;;AAEA,eAAW,MAAMI,OAAjB,IAA4BF,WAAW,CAACG,OAAZ,CAAoBF,KAApB,EAA2BF,QAA3B,CAA5B,EAAkE,MAAMG,OAAO,CAACE,MAAR,GAAiBC,IAAjB,GAAwBC,KAA9B;AACnE;;AAX8D","sourcesContent":["import ActivityHandler from './ActivityHandler';\n\n/* babel-plugin-inline-import './activity.sparql' */\nconst queryTemplate = \"SELECT ?activity WHERE {\\n  ?activity a _:type;\\n      <https://www.w3.org/ns/activitystreams#actor> _:actor;\\n      <https://www.w3.org/ns/activitystreams#object> _:object.\\n}\\n\";\nimport { replaceVariables } from '../util';\n/**\n * Handler that finds an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\n\nexport default class FindActivityHandler extends ActivityHandler {\n  constructor(...args) {\n    super(...args);\n    this.requireUser = false;\n  }\n\n  // Finds all activities in the document matching the given pattern\n  async *createResults(activity, document, queryEngine) {\n    const query = replaceVariables(queryTemplate, activity);\n\n    for await (const binding of queryEngine.execute(query, document)) yield binding.values().next().value;\n  }\n\n}"]},"metadata":{},"sourceType":"module"}