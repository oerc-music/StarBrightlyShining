{"ast":null,"code":"module.exports =\n/******/\nfunction (modules) {\n  // webpackBootstrap\n\n  /******/\n  // The module cache\n\n  /******/\n  var installedModules = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n\n    /******/\n    // Check if module is in cache\n\n    /******/\n    if (installedModules[moduleId]) {\n      /******/\n      return installedModules[moduleId].exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = installedModules[moduleId] = {\n      /******/\n      i: moduleId,\n\n      /******/\n      l: false,\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Flag the module as loaded\n\n    /******/\n\n    module.l = true;\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /******/\n\n  /******/\n  // expose the modules object (__webpack_modules__)\n\n  /******/\n\n\n  __webpack_require__.m = modules;\n  /******/\n\n  /******/\n  // expose the module cache\n\n  /******/\n\n  __webpack_require__.c = installedModules;\n  /******/\n\n  /******/\n  // define getter function for harmony exports\n\n  /******/\n\n  __webpack_require__.d = function (exports, name, getter) {\n    /******/\n    if (!__webpack_require__.o(exports, name)) {\n      /******/\n      Object.defineProperty(exports, name, {\n        enumerable: true,\n        get: getter\n      });\n      /******/\n    }\n    /******/\n\n  };\n  /******/\n\n  /******/\n  // define __esModule on exports\n\n  /******/\n\n\n  __webpack_require__.r = function (exports) {\n    /******/\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n      /******/\n      Object.defineProperty(exports, Symbol.toStringTag, {\n        value: 'Module'\n      });\n      /******/\n    }\n    /******/\n\n\n    Object.defineProperty(exports, '__esModule', {\n      value: true\n    });\n    /******/\n  };\n  /******/\n\n  /******/\n  // create a fake namespace object\n\n  /******/\n  // mode & 1: value is a module id, require it\n\n  /******/\n  // mode & 2: merge all properties of value into the ns\n\n  /******/\n  // mode & 4: return value when already ns object\n\n  /******/\n  // mode & 8|1: behave like require\n\n  /******/\n\n\n  __webpack_require__.t = function (value, mode) {\n    /******/\n    if (mode & 1) value = __webpack_require__(value);\n    /******/\n\n    if (mode & 8) return value;\n    /******/\n\n    if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n    /******/\n\n    var ns = Object.create(null);\n    /******/\n\n    __webpack_require__.r(ns);\n    /******/\n\n\n    Object.defineProperty(ns, 'default', {\n      enumerable: true,\n      value: value\n    });\n    /******/\n\n    if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) {\n      return value[key];\n    }.bind(null, key));\n    /******/\n\n    return ns;\n    /******/\n  };\n  /******/\n\n  /******/\n  // getDefaultExport function for compatibility with non-harmony modules\n\n  /******/\n\n\n  __webpack_require__.n = function (module) {\n    /******/\n    var getter = module && module.__esModule ?\n    /******/\n    function getDefault() {\n      return module['default'];\n    } :\n    /******/\n    function getModuleExports() {\n      return module;\n    };\n    /******/\n\n    __webpack_require__.d(getter, 'a', getter);\n    /******/\n\n\n    return getter;\n    /******/\n  };\n  /******/\n\n  /******/\n  // Object.prototype.hasOwnProperty.call\n\n  /******/\n\n\n  __webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n  /******/\n\n  /******/\n  // __webpack_public_path__\n\n  /******/\n\n\n  __webpack_require__.p = \"\";\n  /******/\n\n  /******/\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n\n  return __webpack_require__(__webpack_require__.s = 0);\n  /******/\n}([\n  /* 0 */\n\n  /***/\n\n  /* 1 */\n\n  /***/\n\n  /* 2 */\n\n  /***/\n\n  /* 3 */\n\n  /***/\n\n  /* 4 */\n\n  /***/\n\n  /* 5 */\n\n  /***/\n\n  /* 6 */\n\n  /***/\n\n  /* 7 */\n\n  /***/\n\n  /* 8 */\n\n  /***/\n\n  /* 9 */\n\n  /***/\n\n  /* 10 */\n\n  /***/\n\n  /* 11 */\n\n  /***/\n\n  /* 12 */\n\n  /***/\n\n  /* 13 */\n\n  /***/\n\n  /* 14 */\n\n  /***/\n\n  /* 15 */\n\n  /***/\n\n  /* 16 */\n\n  /***/\n\n  /* 17 */\n\n  /***/\n\n  /* 18 */\n\n  /***/\n\n  /* 19 */\n\n  /***/\n\n  /* 20 */\n\n  /***/\n\n  /* 21 */\n\n  /***/\n\n  /* 22 */\n\n  /***/\n\n  /* 23 */\n\n  /***/\n\n  /* 24 */\n\n  /***/\n\n  /* 25 */\n\n  /***/\n\n  /* 26 */\n\n  /***/\n\n  /* 27 */\n\n  /***/\n\n  /* 28 */\n\n  /***/\n\n  /* 29 */\n\n  /***/\n\n  /* 30 */\n\n  /***/\n\n  /* 31 */\n\n  /***/\n\n  /* 32 */\n\n  /***/\n\n  /* 33 */\n\n  /***/\n\n  /* 34 */\n\n  /***/\n\n  /* 35 */\n\n  /***/\n\n  /* 36 */\n\n  /***/\n\n  /* 37 */\n\n  /***/\n\n  /* 38 */\n\n  /***/\n\n  /* 39 */\n\n  /***/\n\n  /* 40 */\n\n  /***/\n\n  /* 41 */\n\n  /***/\n\n  /* 42 */\n\n  /***/\n\n  /* 43 */\n\n  /***/\n\n  /* 44 */\n\n  /***/\n\n  /* 45 */\n\n  /***/\n\n  /* 46 */\n\n  /***/\n\n  /* 47 */\n\n  /***/\n\n  /* 48 */\n\n  /***/\n\n  /* 49 */\n\n  /***/\n\n  /* 50 */\n\n  /***/\n\n  /* 51 */\n\n  /***/\n\n  /* 52 */\n\n  /***/\n\n  /* 53 */\n\n  /***/\n\n  /* 54 */\n\n  /***/\n\n  /* 55 */\n\n  /***/\n\n  /* 56 */\n\n  /***/\n\n  /* 57 */\n\n  /***/\n\n  /* 58 */\n\n  /***/\n\n  /* 59 */\n\n  /***/\n\n  /* 60 */\n\n  /***/\n\n  /* 61 */\n\n  /***/\n\n  /* 62 */\n\n  /***/\n\n  /* 63 */\n\n  /***/\n\n  /* 64 */\n\n  /***/\n\n  /* 65 */\n\n  /***/\n\n  /* 66 */\n\n  /***/\n\n  /* 67 */\n\n  /***/\n\n  /* 68 */\n\n  /***/\n\n  /* 69 */\n\n  /***/\n\n  /* 70 */\n\n  /***/\n\n  /* 71 */\n\n  /***/\n\n  /* 72 */\n\n  /***/\n\n  /* 73 */\n\n  /***/\n\n  /* 74 */\n\n  /***/\n\n  /* 75 */\n\n  /***/\n\n  /* 76 */\n\n  /***/\n\n  /* 77 */\n\n  /***/\n\n  /* 78 */\n\n  /***/\n\n  /* 79 */\n\n  /***/\n\n  /* 80 */\n\n  /***/\n\n  /* 81 */\n\n  /***/\n\n  /******/\nfunction (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony import */\n\n\n  var _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1); // Export a singleton instance of SolidAuthClient\n\n\n  const auth = new _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n  /* harmony default export */\n\n  __webpack_exports__[\"default\"] = auth; // Bind methods to instance, so they can be invoked as regular functions\n  // (e.g., to pass around the fetch function)\n\n  Object.getOwnPropertyNames(_solid_auth_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype).forEach(property => {\n    const value = auth[property];\n\n    if (typeof value === 'function') {\n      auth[property] = value.bind(auth);\n    }\n  }); // Expose window.SolidAuthClient for backward compatibility\n\n  if (typeof window !== 'undefined') {\n    if ('SolidAuthClient' in window) {\n      console.warn('Caution: multiple versions of solid-auth-client active.');\n    } else {\n      let warned = false;\n      Object.defineProperty(window, 'SolidAuthClient', {\n        enumerable: true,\n        get: () => {\n          if (!warned) {\n            warned = true;\n            console.warn('window.SolidAuthClient has been deprecated.');\n            console.warn('Please use window.solid.auth instead.');\n          }\n\n          return auth;\n        }\n      });\n    }\n  }\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"default\", function () {\n    return SolidAuthClient;\n  });\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n\n\n  var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);\n  /* harmony import */\n\n\n  var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n  /* harmony import */\n\n\n  var _authn_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);\n  /* harmony import */\n\n\n  var _popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(81);\n  /* harmony import */\n\n\n  var _session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8);\n  /* harmony import */\n\n\n  var _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9);\n  /* harmony import */\n\n\n  var _url_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6);\n  /* harmony import */\n\n\n  var _webid_oidc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11);\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n  /* global fetch */\n  // Store the global fetch, so the user is free to override it\n\n\n  const globalFetch = fetch;\n\n  class SolidAuthClient extends events__WEBPACK_IMPORTED_MODULE_1___default.a {\n    constructor() {\n      super(...arguments);\n\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_pendingSession\", void 0);\n    }\n\n    fetch(input, options) {\n      this.emit('request', Object(_url_util__WEBPACK_IMPORTED_MODULE_6__[\"toUrlString\"])(input));\n      return Object(_authn_fetch__WEBPACK_IMPORTED_MODULE_2__[\"authnFetch\"])(Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])(), globalFetch, input, options);\n    }\n\n    login(idp, options) {\n      options = _objectSpread({}, defaultLoginOptions(Object(_url_util__WEBPACK_IMPORTED_MODULE_6__[\"currentUrlNoParams\"])()), {}, options);\n      return _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[\"login\"](idp, options);\n    }\n\n    async popupLogin(options) {\n      options = _objectSpread({}, defaultLoginOptions(), {}, options);\n\n      if (!/https?:/.test(options.popupUri)) {\n        options.popupUri = new URL(options.popupUri || '/.well-known/solid/login', window.location).toString();\n      }\n\n      if (!options.callbackUri) {\n        options.callbackUri = options.popupUri;\n      }\n\n      const popup = Object(_popup__WEBPACK_IMPORTED_MODULE_3__[\"openIdpPopup\"])(options.popupUri);\n      const session = await Object(_popup__WEBPACK_IMPORTED_MODULE_3__[\"obtainSession\"])(options.storage, popup, options);\n      this.emit('login', session);\n      this.emit('session', session);\n      return session;\n    }\n\n    async currentSession() {\n      let storage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])(); // Try to obtain a stored or pending session\n\n      let session = this._pendingSession || (await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"getSession\"])(storage)); // If none found, attempt to create a new session\n\n      if (!session) {\n        // Try to create a new OIDC session from stored tokens\n        try {\n          this._pendingSession = _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[\"currentSession\"](storage);\n          session = await this._pendingSession;\n        } catch (err) {\n          console.error(err);\n        } // Save the new session and emit session events\n\n\n        if (session) {\n          await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"saveSession\"])(storage)(session);\n          this.emit('login', session);\n          this.emit('session', session);\n        }\n\n        delete this._pendingSession;\n      }\n\n      return session;\n    }\n\n    async trackSession(callback) {\n      /* eslint-disable standard/no-callback-literal */\n      callback(await this.currentSession());\n      this.on('session', callback);\n    }\n\n    stopTrackSession(callback) {\n      this.removeListener('session', callback);\n    }\n\n    async logout() {\n      let storage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])();\n      const session = await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"getSession\"])(storage);\n\n      if (session) {\n        try {\n          await _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[\"logout\"](storage, globalFetch);\n          this.emit('logout');\n          this.emit('session', null);\n        } catch (err) {\n          console.warn('Error logging out:');\n          console.error(err);\n        }\n\n        await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"clearSession\"])(storage);\n      }\n    }\n\n  }\n\n  function defaultLoginOptions(url) {\n    return {\n      callbackUri: url ? url.split('#')[0] : '',\n      popupUri: '',\n      storage: Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])()\n    };\n  }\n  /***/\n\n}, function (module, exports) {\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  module.exports = _defineProperty;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\"; // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n  var R = typeof Reflect === 'object' ? Reflect : null;\n  var ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  };\n  var ReflectOwnKeys;\n\n  if (R && typeof R.ownKeys === 'function') {\n    ReflectOwnKeys = R.ownKeys;\n  } else if (Object.getOwnPropertySymbols) {\n    ReflectOwnKeys = function ReflectOwnKeys(target) {\n      return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n    };\n  } else {\n    ReflectOwnKeys = function ReflectOwnKeys(target) {\n      return Object.getOwnPropertyNames(target);\n    };\n  }\n\n  function ProcessEmitWarning(warning) {\n    if (console && console.warn) console.warn(warning);\n  }\n\n  var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n    return value !== value;\n  };\n\n  function EventEmitter() {\n    EventEmitter.init.call(this);\n  }\n\n  module.exports = EventEmitter; // Backwards-compat with node 0.10.x\n\n  EventEmitter.EventEmitter = EventEmitter;\n  EventEmitter.prototype._events = undefined;\n  EventEmitter.prototype._eventsCount = 0;\n  EventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n  // added to it. This is a useful default which helps finding memory leaks.\n\n  var defaultMaxListeners = 10;\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function () {\n      return defaultMaxListeners;\n    },\n    set: function (arg) {\n      if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n        throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n      }\n\n      defaultMaxListeners = arg;\n    }\n  });\n\n  EventEmitter.init = function () {\n    if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    }\n\n    this._maxListeners = this._maxListeners || undefined;\n  }; // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n\n  EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n    if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n      throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n    }\n\n    this._maxListeners = n;\n    return this;\n  };\n\n  function $getMaxListeners(that) {\n    if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n    return that._maxListeners;\n  }\n\n  EventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n    return $getMaxListeners(this);\n  };\n\n  EventEmitter.prototype.emit = function emit(type) {\n    var args = [];\n\n    for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n\n    var doError = type === 'error';\n    var events = this._events;\n    if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n    if (doError) {\n      var er;\n      if (args.length > 0) er = args[0];\n\n      if (er instanceof Error) {\n        // Note: The comments on the `throw` lines are intentional, they show\n        // up in Node's output if this results in an unhandled exception.\n        throw er; // Unhandled 'error' event\n      } // At least give some kind of context to the user\n\n\n      var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n      err.context = er;\n      throw err; // Unhandled 'error' event\n    }\n\n    var handler = events[type];\n    if (handler === undefined) return false;\n\n    if (typeof handler === 'function') {\n      ReflectApply(handler, this, args);\n    } else {\n      var len = handler.length;\n      var listeners = arrayClone(handler, len);\n\n      for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);\n    }\n\n    return true;\n  };\n\n  function _addListener(target, type, listener, prepend) {\n    var m;\n    var events;\n    var existing;\n\n    if (typeof listener !== 'function') {\n      throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n    }\n\n    events = target._events;\n\n    if (events === undefined) {\n      events = target._events = Object.create(null);\n      target._eventsCount = 0;\n    } else {\n      // To avoid recursion in the case that type === \"newListener\"! Before\n      // adding it to the listeners, first emit \"newListener\".\n      if (events.newListener !== undefined) {\n        target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n        // this._events to be assigned to a new object\n\n        events = target._events;\n      }\n\n      existing = events[type];\n    }\n\n    if (existing === undefined) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      existing = events[type] = listener;\n      ++target._eventsCount;\n    } else {\n      if (typeof existing === 'function') {\n        // Adding the second element, need to change to array.\n        existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n      } else if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      } // Check for listener leak\n\n\n      m = $getMaxListeners(target);\n\n      if (m > 0 && existing.length > m && !existing.warned) {\n        existing.warned = true; // No error code for this since it is a Warning\n        // eslint-disable-next-line no-restricted-syntax\n\n        var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        ProcessEmitWarning(w);\n      }\n    }\n\n    return target;\n  }\n\n  EventEmitter.prototype.addListener = function addListener(type, listener) {\n    return _addListener(this, type, listener, false);\n  };\n\n  EventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\n  EventEmitter.prototype.prependListener = function prependListener(type, listener) {\n    return _addListener(this, type, listener, true);\n  };\n\n  function onceWrapper() {\n    var args = [];\n\n    for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n\n    if (!this.fired) {\n      this.target.removeListener(this.type, this.wrapFn);\n      this.fired = true;\n      ReflectApply(this.listener, this.target, args);\n    }\n  }\n\n  function _onceWrap(target, type, listener) {\n    var state = {\n      fired: false,\n      wrapFn: undefined,\n      target: target,\n      type: type,\n      listener: listener\n    };\n    var wrapped = onceWrapper.bind(state);\n    wrapped.listener = listener;\n    state.wrapFn = wrapped;\n    return wrapped;\n  }\n\n  EventEmitter.prototype.once = function once(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n    }\n\n    this.on(type, _onceWrap(this, type, listener));\n    return this;\n  };\n\n  EventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n    }\n\n    this.prependListener(type, _onceWrap(this, type, listener));\n    return this;\n  }; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\n  EventEmitter.prototype.removeListener = function removeListener(type, listener) {\n    var list, events, position, i, originalListener;\n\n    if (typeof listener !== 'function') {\n      throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n    }\n\n    events = this._events;\n    if (events === undefined) return this;\n    list = events[type];\n    if (list === undefined) return this;\n\n    if (list === listener || list.listener === listener) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else {\n        delete events[type];\n        if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n      }\n    } else if (typeof list !== 'function') {\n      position = -1;\n\n      for (i = list.length - 1; i >= 0; i--) {\n        if (list[i] === listener || list[i].listener === listener) {\n          originalListener = list[i].listener;\n          position = i;\n          break;\n        }\n      }\n\n      if (position < 0) return this;\n      if (position === 0) list.shift();else {\n        spliceOne(list, position);\n      }\n      if (list.length === 1) events[type] = list[0];\n      if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\n  EventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n    var listeners, events, i;\n    events = this._events;\n    if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n    if (events.removeListener === undefined) {\n      if (arguments.length === 0) {\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n      } else if (events[type] !== undefined) {\n        if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n      }\n\n      return this;\n    } // emit removeListener for all listeners on all events\n\n\n    if (arguments.length === 0) {\n      var keys = Object.keys(events);\n      var key;\n\n      for (i = 0; i < keys.length; ++i) {\n        key = keys[i];\n        if (key === 'removeListener') continue;\n        this.removeAllListeners(key);\n      }\n\n      this.removeAllListeners('removeListener');\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n      return this;\n    }\n\n    listeners = events[type];\n\n    if (typeof listeners === 'function') {\n      this.removeListener(type, listeners);\n    } else if (listeners !== undefined) {\n      // LIFO order\n      for (i = listeners.length - 1; i >= 0; i--) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n\n    return this;\n  };\n\n  function _listeners(target, type, unwrap) {\n    var events = target._events;\n    if (events === undefined) return [];\n    var evlistener = events[type];\n    if (evlistener === undefined) return [];\n    if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n    return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n  }\n\n  EventEmitter.prototype.listeners = function listeners(type) {\n    return _listeners(this, type, true);\n  };\n\n  EventEmitter.prototype.rawListeners = function rawListeners(type) {\n    return _listeners(this, type, false);\n  };\n\n  EventEmitter.listenerCount = function (emitter, type) {\n    if (typeof emitter.listenerCount === 'function') {\n      return emitter.listenerCount(type);\n    } else {\n      return listenerCount.call(emitter, type);\n    }\n  };\n\n  EventEmitter.prototype.listenerCount = listenerCount;\n\n  function listenerCount(type) {\n    var events = this._events;\n\n    if (events !== undefined) {\n      var evlistener = events[type];\n\n      if (typeof evlistener === 'function') {\n        return 1;\n      } else if (evlistener !== undefined) {\n        return evlistener.length;\n      }\n    }\n\n    return 0;\n  }\n\n  EventEmitter.prototype.eventNames = function eventNames() {\n    return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n  };\n\n  function arrayClone(arr, n) {\n    var copy = new Array(n);\n\n    for (var i = 0; i < n; ++i) copy[i] = arr[i];\n\n    return copy;\n  }\n\n  function spliceOne(list, index) {\n    for (; index + 1 < list.length; index++) list[index] = list[index + 1];\n\n    list.pop();\n  }\n\n  function unwrapListeners(arr) {\n    var ret = new Array(arr.length);\n\n    for (var i = 0; i < ret.length; ++i) {\n      ret[i] = arr[i].listener || arr[i];\n    }\n\n    return ret;\n  }\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"authnFetch\", function () {\n    return authnFetch;\n  });\n  /* harmony import */\n\n\n  var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);\n  /* harmony import */\n\n\n  var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n\n\n  var _url_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n  /* harmony import */\n\n\n  var _host__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7);\n  /* harmony import */\n\n\n  var _session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8);\n  /* harmony import */\n\n\n  var _webid_oidc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11);\n\n  async function authnFetch(storage, fetch, input, options) {\n    // If not authenticated, perform a regular fetch\n    const session = await Object(_session__WEBPACK_IMPORTED_MODULE_3__[\"getSession\"])(storage);\n\n    if (!session) {\n      return fetch(input, options);\n    } // If we know the server expects credentials, send them\n\n\n    if (await shouldShareCredentials(storage, input)) {\n      return Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_4__[\"fetchWithCredentials\"])(session, fetch, input, options);\n    } // If we don't know for sure, try a regular fetch first\n\n\n    let resp = await fetch(input, options); // If the server then requests credentials, send them\n\n    if (resp.status === 401) {\n      await Object(_host__WEBPACK_IMPORTED_MODULE_2__[\"updateHostFromResponse\"])(storage)(resp);\n\n      if (await shouldShareCredentials(storage, input)) {\n        resp = Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_4__[\"fetchWithCredentials\"])(session, fetch, input, options);\n      }\n    }\n\n    return resp;\n  }\n\n  async function shouldShareCredentials(storage, input) {\n    const requestHost = await Object(_host__WEBPACK_IMPORTED_MODULE_2__[\"getHost\"])(storage)(Object(_url_util__WEBPACK_IMPORTED_MODULE_1__[\"toUrlString\"])(input));\n    return requestHost != null && requestHost.requiresAuth;\n  }\n  /***/\n\n}, function (module, exports) {\n  (function () {\n    module.exports = window[\"fetch\"];\n  })();\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"currentUrl\", function () {\n    return currentUrl;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"currentUrlNoParams\", function () {\n    return currentUrlNoParams;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"navigateTo\", function () {\n    return navigateTo;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"originOf\", function () {\n    return originOf;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"toUrlString\", function () {\n    return toUrlString;\n  });\n  /* eslint-env browser */\n\n\n  function getLocation() {\n    return typeof window !== 'undefined' ? window.location : {\n      href: 'https://example.org/',\n      pathname: '/',\n      origin: 'example.org'\n    };\n  }\n\n  const currentUrl = () => getLocation().href;\n\n  const currentUrlNoParams = () => getLocation().origin + getLocation().pathname;\n\n  const navigateTo = url => {\n    getLocation().href = url;\n  };\n\n  const originOf = url => new URL(url).origin;\n\n  const toUrlString = url => {\n    if (typeof url !== 'string') {\n      url = 'url' in url ? url.url : url.toString();\n    }\n\n    return new URL(url, currentUrl()).toString();\n  };\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"getHost\", function () {\n    return getHost;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"saveHost\", function () {\n    return saveHost;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"updateHostFromResponse\", function () {\n    return updateHostFromResponse;\n  });\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n\n\n  var _session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8);\n  /* harmony import */\n\n\n  var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9);\n  /* harmony import */\n\n\n  var _webid_oidc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11);\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n  /* globalRequest, Response, URL */\n\n\n  function getHost(storage) {\n    return async url => {\n      const {\n        host\n      } = new URL(url);\n      const session = await Object(_session__WEBPACK_IMPORTED_MODULE_1__[\"getSession\"])(storage);\n\n      if (session && host === new URL(session.idp).host) {\n        return {\n          url: host,\n          requiresAuth: true\n        };\n      }\n\n      const {\n        hosts\n      } = await Object(_storage__WEBPACK_IMPORTED_MODULE_2__[\"getData\"])(storage);\n      return hosts && hosts[host];\n    };\n  }\n\n  function saveHost(storage) {\n    return async _ref => {\n      let {\n        url,\n        requiresAuth\n      } = _ref;\n      await Object(_storage__WEBPACK_IMPORTED_MODULE_2__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n        hosts: _objectSpread({}, data.hosts, {\n          [url]: {\n            requiresAuth\n          }\n        })\n      }));\n    };\n  }\n\n  function updateHostFromResponse(storage) {\n    return async resp => {\n      if (_webid_oidc__WEBPACK_IMPORTED_MODULE_3__[\"requiresAuth\"](resp)) {\n        const {\n          host\n        } = new URL(resp.url);\n        await saveHost(storage)({\n          url: host,\n          requiresAuth: true\n        });\n      }\n    };\n  }\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"getSession\", function () {\n    return getSession;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"saveSession\", function () {\n    return saveSession;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"clearSession\", function () {\n    return clearSession;\n  });\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n\n\n  var _storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9);\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  async function getSession(storage) {\n    const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_1__[\"getData\"])(storage);\n    return data.session || null;\n  }\n\n  function saveSession(storage) {\n    return async session => {\n      const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_1__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n        session\n      }));\n      return data.session;\n    };\n  }\n\n  async function clearSession(storage) {\n    await Object(_storage__WEBPACK_IMPORTED_MODULE_1__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n      session: null\n    }));\n  }\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"NAMESPACE\", function () {\n    return NAMESPACE;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"defaultStorage\", function () {\n    return defaultStorage;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"getData\", function () {\n    return getData;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"updateStorage\", function () {\n    return updateStorage;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"asyncStorage\", function () {\n    return asyncStorage;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"memStorage\", function () {\n    return memStorage;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"ipcStorage\", function () {\n    return ipcStorage;\n  });\n  /* harmony import */\n\n\n  var _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);\n\n  const NAMESPACE = 'solid-auth-client';\n\n  const defaultStorage = () => {\n    const hasLocalStorage = typeof window !== 'undefined' && 'localStorage' in window;\n    return asyncStorage(hasLocalStorage ? window.localStorage : memStorage());\n  };\n  /**\n   * Gets the deserialized stored data\n   */\n\n\n  async function getData(store) {\n    let serialized;\n    let data;\n\n    try {\n      serialized = await store.getItem(NAMESPACE);\n      data = JSON.parse(serialized || '{}');\n    } catch (e) {\n      console.warn('Could not deserialize data:', serialized);\n      console.error(e);\n      data = {};\n    }\n\n    return data;\n  }\n  /**\n   * Updates a Storage object without mutating its intermediate representation.\n   */\n\n\n  async function updateStorage(store, update) {\n    const currentData = await getData(store);\n    const newData = update(currentData);\n    await store.setItem(NAMESPACE, JSON.stringify(newData));\n    return newData;\n  }\n  /**\n   * Takes a synchronous storage interface and wraps it with an async interface.\n   */\n\n\n  function asyncStorage(storage) {\n    return {\n      getItem: key => {\n        return Promise.resolve(storage.getItem(key));\n      },\n      setItem: (key, val) => {\n        return Promise.resolve(storage.setItem(key, val));\n      },\n      removeItem: key => {\n        return Promise.resolve(storage.removeItem(key));\n      }\n    };\n  }\n\n  const memStorage = () => {\n    const store = {};\n    return {\n      getItem: key => {\n        if (typeof store[key] === 'undefined') return null;\n        return store[key];\n      },\n      setItem: (key, val) => {\n        store[key] = val;\n      },\n      removeItem: key => {\n        delete store[key];\n      }\n    };\n  };\n\n  function ipcStorage(client) {\n    return {\n      getItem: key => client.request('storage/getItem', key),\n      setItem: (key, val) => client.request('storage/setItem', key, val),\n      removeItem: key => client.request('storage/removeItem', key)\n    };\n  }\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"Server\", function () {\n    return Server;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"Client\", function () {\n    return Client;\n  });\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n  /*\n    This module describes a simple IPC interface for communicating between browser windows.\n    window.postMessage() is the transport interface, and a request/response interface\n    is defined on top of it as follows:\n  \n    const request = {\n      'solid-auth-client': {\n        id: 1234,\n        method: 'doSomethingPlease',\n        args: [ 'one', 'two', 'three' ]\n      }\n    }\n  \n    const response = {\n      'solid-auth-client': {\n        id: 1234,\n        ret: 'the_value'\n      }\n    }\n  */\n\n\n  const NAMESPACE = 'solid-auth-client';\n  /**\n   * Receives and handles remote procedure calls.\n   */\n\n  class Server {\n    constructor(clientWindow, clientOrigin, handle) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_clientWindow\", void 0);\n\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_clientOrigin\", void 0);\n\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_handler\", void 0);\n\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_messageListener\", void 0);\n\n      this._clientWindow = clientWindow;\n      this._clientOrigin = clientOrigin;\n      this._handler = handle;\n\n      this._messageListener = event => this._handleMessage(event);\n    }\n\n    async _handleMessage(_ref) {\n      let {\n        data,\n        origin\n      } = _ref; // Ensure we can post to the origin\n\n      if (origin !== this._clientOrigin) {\n        console.warn(\"solid-auth-client is listening to \".concat(this._clientOrigin, \" \") + \"so ignored a message received from \".concat(origin, \".\"));\n        return;\n      } // Parse the request and send it to the handler\n\n\n      const req = data && data[NAMESPACE];\n\n      if (req && req.method) {\n        const {\n          id,\n          method,\n          args\n        } = req;\n        const ret = await this._handler(method, ...args);\n\n        this._clientWindow.postMessage({\n          [NAMESPACE]: {\n            id,\n            ret\n          }\n        }, this._clientOrigin);\n      }\n    }\n\n    start() {\n      window.addEventListener('message', this._messageListener);\n    }\n\n    stop() {\n      window.removeEventListener('message', this._messageListener);\n    }\n\n  }\n  /**\n   * Makes remote procedure calls.\n   */\n\n\n  class Client {\n    constructor(serverWindow, serverOrigin) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_serverWindow\", void 0);\n\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_serverOrigin\", void 0);\n\n      this._serverWindow = serverWindow;\n      this._serverOrigin = serverOrigin;\n    }\n\n    request(method) {\n      // Send the request as a message to the server window\n      const id = Math.random();\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      this._serverWindow.postMessage({\n        [NAMESPACE]: {\n          id,\n          method,\n          args\n        }\n      }, this._serverOrigin); // Create a promise that resolves to the request's return value\n\n\n      return new Promise((resolve, reject) => {\n        // Listen for responses to the request\n        window.addEventListener('message', responseListener); // Cancel if the response takes too long\n\n        const timeout = setTimeout(() => {\n          reject(new Error('Could not connect to main window.'));\n          window.removeEventListener('message', responseListener);\n        }, 2000); // Processes a possible response to the request\n\n        function responseListener(_ref2) {\n          let {\n            data\n          } = _ref2;\n          const resp = data && data[NAMESPACE];\n\n          if (resp && resp.id === id && resp.hasOwnProperty('ret')) {\n            resolve(resp.ret);\n            clearTimeout(timeout);\n            window.removeEventListener('message', responseListener);\n          }\n        }\n      });\n    }\n\n  }\n  /***/\n\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"login\", function () {\n    return login;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"currentSession\", function () {\n    return currentSession;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"logout\", function () {\n    return logout;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"getRegisteredRp\", function () {\n    return getRegisteredRp;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"requiresAuth\", function () {\n    return requiresAuth;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"fetchWithCredentials\", function () {\n    return fetchWithCredentials;\n  });\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);\n  /* harmony import */\n\n\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n  /* harmony import */\n\n\n  var auth_header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14);\n  /* harmony import */\n\n\n  var auth_header__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(auth_header__WEBPACK_IMPORTED_MODULE_2__);\n  /* harmony import */\n\n\n  var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18);\n  /* harmony import */\n\n\n  var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__);\n  /* harmony import */\n\n\n  var _solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80);\n  /* harmony import */\n\n\n  var _solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4__);\n  /* harmony import */\n\n\n  var _url_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6);\n  /* harmony import */\n\n\n  var _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9);\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n  /* global Response */\n\n\n  async function login(idp, options) {\n    try {\n      const rp = await getRegisteredRp(idp, options);\n      await saveAppHashFragment(options.storage);\n      return sendAuthRequest(rp, options);\n    } catch (err) {\n      console.warn('Error logging in with WebID-OIDC');\n      console.error(err);\n      return null;\n    }\n  }\n\n  async function currentSession() {\n    let storage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"defaultStorage\"])();\n\n    try {\n      // Obtain the Relying Party\n      const rp = await getStoredRp(storage);\n\n      if (!rp) {\n        return null;\n      } // Obtain and clear the OIDC URL fragment\n\n\n      const url = Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[\"currentUrl\"])();\n\n      if (!/#(.*&)?access_token=/.test(url)) {\n        return null;\n      }\n\n      window.location.hash = '';\n      await restoreAppHashFragment(storage); // Obtain a session from the Relying Party\n\n      const storeData = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"getData\"])(storage);\n      const session = await rp.validateResponse(url, storeData);\n\n      if (!session) {\n        return null;\n      }\n\n      return _objectSpread({}, session, {\n        webId: session.idClaims.sub,\n        idp: session.issuer\n      });\n    } catch (err) {\n      console.warn('Error finding a WebID-OIDC session');\n      console.error(err);\n      return null;\n    }\n  }\n\n  async function logout(storage, fetch) {\n    const rp = await getStoredRp(storage);\n\n    if (rp) {\n      try {\n        // First log out from the IDP\n        await rp.logout(); // Then, log out from the RP\n\n        try {\n          await fetch('/.well-known/solid/logout', {\n            credentials: 'include'\n          });\n        } catch (e) {// Ignore errors for when we are not on a Solid pod\n        }\n      } catch (err) {\n        console.warn('Error logging out of the WebID-OIDC session');\n        console.error(err);\n      }\n    }\n  }\n\n  async function getRegisteredRp(idp, options) {\n    // To reuse a possible previous RP,\n    // it be for the same IDP and redirect URI\n    let rp = await getStoredRp(options.storage);\n\n    if (!rp || rp.provider.url !== idp || !rp.registration.redirect_uris.includes(options.callbackUri)) {\n      // Register a new RP\n      rp = await registerRp(idp, options);\n      await storeRp(options.storage, idp, rp);\n    }\n\n    return rp;\n  }\n\n  async function getStoredRp(storage) {\n    const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"getData\"])(storage);\n    const {\n      rpConfig\n    } = data;\n\n    if (rpConfig) {\n      rpConfig.store = storage;\n      return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.from(rpConfig);\n    } else {\n      return null;\n    }\n  }\n\n  async function storeRp(storage, idp, rp) {\n    await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n      rpConfig: rp\n    }));\n    return rp;\n  }\n\n  function registerRp(idp, opts) {\n    const {\n      storage,\n      callbackUri\n    } = opts;\n    const responseType = 'id_token token';\n    const clientNameI18n = {};\n    Object.entries(opts).filter(_ref => {\n      let [key, _] = _ref;\n      return key.startsWith('clientName#');\n    }).forEach(_ref2 => {\n      let [key, value] = _ref2;\n      return clientNameI18n[key.replace('clientName#', 'client_name#')] = value;\n    });\n    const supplementaryOptions = {\n      logo_uri: opts.logoUri,\n      contacts: opts.contacts,\n      client_name: opts.clientName\n    };\n\n    const registration = _objectSpread({\n      issuer: idp,\n      grant_types: ['implicit'],\n      redirect_uris: [callbackUri],\n      response_types: [responseType],\n      scope: 'openid profile'\n    }, clientNameI18n, {}, supplementaryOptions);\n\n    const options = {\n      defaults: {\n        authenticate: {\n          redirect_uri: callbackUri,\n          response_type: responseType\n        }\n      },\n      store: storage\n    };\n    return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.register(idp, registration, options);\n  }\n\n  async function sendAuthRequest(rp, _ref3) {\n    let {\n      callbackUri,\n      storage\n    } = _ref3;\n    const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"getData\"])(storage);\n    const url = await rp.createRequest({\n      redirect_uri: callbackUri\n    }, data);\n    await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(storage, () => data);\n    return Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[\"navigateTo\"])(url);\n  }\n\n  async function saveAppHashFragment(store) {\n    await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(store, data => _objectSpread({}, data, {\n      appHashFragment: window.location.hash\n    }));\n  }\n\n  async function restoreAppHashFragment(store) {\n    await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(store, _ref4 => {\n      let {\n        appHashFragment = ''\n      } = _ref4,\n          data = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref4, [\"appHashFragment\"]);\n\n      window.location.hash = appHashFragment;\n      return data;\n    });\n  }\n  /**\n   * Answers whether a HTTP response requires WebID-OIDC authentication.\n   */\n\n\n  function requiresAuth(resp) {\n    if (resp.status !== 401) {\n      return false;\n    }\n\n    const wwwAuthHeader = resp.headers.get('www-authenticate');\n\n    if (!wwwAuthHeader) {\n      return false;\n    }\n\n    const auth = auth_header__WEBPACK_IMPORTED_MODULE_2__[\"parse\"](wwwAuthHeader);\n    return auth.scheme === 'Bearer' && auth.params && auth.params.scope === 'openid webid';\n  }\n  /**\n   * Fetches a resource, providing the WebID-OIDC ID Token as authentication.\n   * Assumes that the resource has requested those tokens in a previous response.\n   */\n\n\n  async function fetchWithCredentials(session, fetch, input, options) {\n    // Create a copy of the headers\n    const headers = {};\n    const origHeaders = options ? options.headers : input.headers;\n\n    if (origHeaders) {\n      const entries = typeof origHeaders.entries === 'function' ? origHeaders.entries() : Object.entries(origHeaders);\n\n      for (const [name, value] of entries) {\n        headers[name] = value;\n      }\n    } // Add Authorization header\n\n\n    const popToken = await _solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4___default.a.issueFor(Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[\"toUrlString\"])(input), session);\n    headers.authorization = \"Bearer \".concat(popToken);\n    return fetch(input, _objectSpread({}, options, {\n      credentials: 'include',\n      headers\n    }));\n  }\n  /***/\n\n}, function (module, exports, __webpack_require__) {\n  var objectWithoutPropertiesLoose = __webpack_require__(13);\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n    var target = objectWithoutPropertiesLoose(source, excluded);\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  module.exports = _objectWithoutProperties;\n  /***/\n}, function (module, exports) {\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  module.exports = _objectWithoutPropertiesLoose;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  Object.defineProperty(exports, \"format\", {\n    enumerable: true,\n    get: function get() {\n      return _format.default;\n    }\n  });\n  Object.defineProperty(exports, \"parse\", {\n    enumerable: true,\n    get: function get() {\n      return _parse.default;\n    }\n  });\n\n  var _format = _interopRequireDefault(__webpack_require__(15));\n\n  var _parse = _interopRequireDefault(__webpack_require__(17));\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  /***/\n\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _util = __webpack_require__(16);\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }\n\n  function _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n        arr2[i] = arr[i];\n      }\n\n      return arr2;\n    }\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  var xxx = function xxx(key) {\n    return function (value) {\n      return `${key}=${value && !(0, _util.isToken)(value) ? (0, _util.quote)(value) : value}`;\n    };\n  };\n\n  var build = function build(params) {\n    return params.reduce(function (prev, _ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          values = _ref2[1];\n\n      var transform = xxx(key);\n\n      if (!(0, _util.isToken)(key)) {\n        throw new TypeError();\n      }\n\n      if (Array.isArray(values)) {\n        return _toConsumableArray(prev).concat(_toConsumableArray(values.map(transform)));\n      }\n\n      return _toConsumableArray(prev).concat([transform(values)]);\n    }, []);\n  };\n\n  var challenge = function challenge(params, options) {\n    if (Array.isArray(params)) {\n      return build(params);\n    } else if (typeof params === 'object') {\n      var entries = params;\n      return challenge(Object.keys(params).map(function (key) {\n        return [key, entries[key]];\n      }), options);\n    }\n\n    throw new TypeError();\n  };\n\n  var _default = function _default(scheme, token, params) {\n    var obj = typeof scheme === 'string' ? {\n      scheme,\n      token,\n      params\n    } : scheme;\n\n    if (typeof obj !== 'object') {\n      throw new TypeError();\n    } else if (!(0, _util.isScheme)(obj.scheme)) {\n      throw new TypeError('Invalid scheme.');\n    }\n\n    return [obj.scheme].concat(_toConsumableArray(typeof obj.token !== 'undefined' ? [obj.token] : []), _toConsumableArray(typeof obj.params !== 'undefined' ? challenge(obj.params) : [])).join(' ');\n  };\n\n  exports.default = _default;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.unquote = exports.quote = exports.isScheme = exports.isToken = void 0;\n  var token = /^[^\\u0000-\\u001F\\u007F()<>@,;:\\\\\"/?={}\\[\\]\\u0020\\u0009]+$/;\n\n  var isToken = function isToken(str) {\n    return typeof str === 'string' && token.test(str);\n  };\n\n  exports.isToken = isToken;\n  var isScheme = isToken;\n  exports.isScheme = isScheme;\n\n  var quote = function quote(str) {\n    return `\"${str.replace(/\"/g, '\\\\\"')}\"`;\n  };\n\n  exports.quote = quote;\n\n  var unquote = function unquote(str) {\n    return str.substr(1, str.length - 2).replace(/\\\\\"/g, '\"');\n  };\n\n  exports.unquote = unquote;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _util = __webpack_require__(16); // lol dis\n\n\n  var body = /((?:[a-zA-Z0-9._~+\\/-]+=*(?:\\s+|$))|[^\\u0000-\\u001F\\u007F()<>@,;:\\\\\"/?={}\\[\\]\\u0020\\u0009]+)(?:=([^\\\\\"=\\s,]+|\"(?:[^\"\\\\]|\\\\.)*\"))?/g; // eslint-disable-line\n\n  var normalize = function normalize(prev, _cur) {\n    // Fixup quoted strings and tokens with spaces around them\n    var cur = _cur.charAt(0) === '\"' ? (0, _util.unquote)(_cur) : _cur.trim(); // Marshal\n\n    if (Array.isArray(prev)) {\n      return prev.concat(cur);\n    } else if (typeof prev === 'string') {\n      return [prev, cur];\n    }\n\n    return cur;\n  };\n\n  var parseProperties = function parseProperties(scheme, string) {\n    var token = null;\n    var params = {}; // eslint-disable-next-line no-constant-condition\n\n    while (true) {\n      var res = body.exec(string);\n\n      if (res === null) {\n        break;\n      }\n\n      if (res[2]) {\n        params[res[1]] = normalize(params[res[1]], res[2]);\n      } else {\n        token = normalize(token, res[1]);\n      }\n    }\n\n    return {\n      scheme,\n      params,\n      token\n    };\n  };\n\n  var _default = function _default(str) {\n    if (typeof str !== 'string') {\n      throw new TypeError('Header value must be a string.');\n    }\n\n    var start = str.indexOf(' ');\n    var scheme = str.substr(0, start);\n\n    if (!(0, _util.isScheme)(scheme)) {\n      throw new TypeError(`Invalid scheme ${scheme}`);\n    }\n\n    return parseProperties(scheme, str.substr(start));\n  };\n\n  exports.default = _default;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  module.exports = __webpack_require__(19);\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /* WEBPACK VAR INJECTION */\n  (function (global) {\n    /**\n    * Dependencies\n    */\n    const assert = __webpack_require__(21);\n\n    const fetch = __webpack_require__(5);\n\n    const {\n      URL\n    } = __webpack_require__(27);\n\n    const Headers = fetch.Headers ? fetch.Headers : global.Headers;\n\n    const {\n      JSONDocument\n    } = __webpack_require__(28);\n\n    const {\n      JWKSet\n    } = __webpack_require__(37);\n\n    const AuthenticationRequest = __webpack_require__(68);\n\n    const AuthenticationResponse = __webpack_require__(70);\n\n    const RelyingPartySchema = __webpack_require__(79);\n\n    const onHttpError = __webpack_require__(74);\n\n    const FormUrlEncoded = __webpack_require__(69);\n    /**\n     * RelyingParty\n     *\n     * @class\n     * Client interface for OpenID Connect Relying Party.\n     *\n     * @example\n     *  let client = RelyingParty({\n     *    provider: {\n     *      name: 'Anvil Research, Inc.',\n     *      url: 'https://forge.anvil.io'\n     *      // configuration\n     *      // jwks\n     *    },\n     *    defaults: {\n     *      popToken: false,\n     *      authenticate: {\n     *        response_type: 'code',\n     *        display: 'popup',\n     *        scope: 'openid profile email'\n     *      },\n     *      register: {\n     *        client_name: 'Example',\n     *        client_uri: 'https://example.com',\n     *        logo_uri: 'https://example.com/assets/logo.png',\n     *        redirect_uris: ['https://app.example.com/callback'],\n     *        response_types: ['code', 'code id_token token'],\n     *        grant_types: ['authorization_code'],\n     *        default_max_age: 7200,\n     *        post_logout_redirect_uris: ['https://app.example.com']\n     *      },\n     *    },\n     *    registration: {\n     *      // if you have it saved somewhere\n     *    },\n     *    store: localStorage || req.session\n     *  })\n     *\n     *  client.discover() => Promise\n     *  client.jwks() => Promise\n     *  client.authenticate()\n     *  client.authenticateUri()\n     *  client.validateResponse(uri) => Promise\n     *  client.userinfo() => Promise\n     *  client.logout()\n     */\n\n\n    class RelyingParty extends JSONDocument {\n      /**\n       * Schema\n       */\n      static get schema() {\n        return RelyingPartySchema;\n      }\n      /**\n       * from\n       *\n       * @description\n       * Create a RelyingParty instance from a previously registered client.\n       *\n       * @param {Object} data\n       * @returns {Promise<RelyingParty>}\n       */\n\n\n      static from(data) {\n        let rp = new RelyingParty(data);\n        let validation = rp.validate(); // schema validation\n\n        if (!validation.valid) {\n          return Promise.reject(new Error(JSON.stringify(validation)));\n        }\n\n        let jwks = rp.provider.jwks; // request the JWK Set if missing\n\n        if (!jwks) {\n          return rp.jwks().then(() => rp);\n        } // otherwise import the JWK Set to webcrypto\n\n\n        return JWKSet.importKeys(jwks).then(jwks => {\n          rp.provider.jwks = jwks;\n          return rp;\n        });\n      }\n      /**\n       * register\n       *\n       * @param issuer {string} Provider URL\n       * @param registration {Object} Client dynamic registration options\n       * @param options {Object}\n       * @param options.defaults\n       * @param [options.store] {Session|Storage}\n       * @returns {Promise<RelyingParty>} RelyingParty instance, registered.\n       */\n\n\n      static register(issuer, registration, options) {\n        let rp = new RelyingParty({\n          provider: {\n            url: issuer\n          },\n          defaults: Object.assign({}, options.defaults),\n          store: options.store\n        });\n        return Promise.resolve().then(() => rp.discover()).then(() => rp.jwks()).then(() => rp.register(registration)).then(() => rp);\n      }\n      /**\n       * Discover\n       *\n       * @description Fetches the issuer's OpenID Configuration.\n       * @returns {Promise<Object>} Resolves with the provider configuration response\n       */\n\n\n      discover() {\n        try {\n          let issuer = this.provider.url;\n          assert(issuer, 'RelyingParty provider must define \"url\"');\n          let url = new URL(issuer);\n          url.pathname = '.well-known/openid-configuration';\n          return fetch(url.toString()).then(onHttpError('Error fetching openid configuration')).then(response => {\n            return response.json().then(json => this.provider.configuration = json);\n          });\n        } catch (error) {\n          return Promise.reject(error);\n        }\n      }\n      /**\n       * Register\n       *\n       * @description Register's a client with provider as a Relying Party\n       *\n       * @param options {Object}\n       * @returns {Promise<Object>} Resolves with the registration response object\n       */\n\n\n      register(options) {\n        try {\n          let configuration = this.provider.configuration;\n          assert(configuration, 'OpenID Configuration is not initialized.');\n          assert(configuration.registration_endpoint, 'OpenID Configuration is missing registration_endpoint.');\n          let uri = configuration.registration_endpoint;\n          let method = 'post';\n          let headers = new Headers({\n            'Content-Type': 'application/json'\n          });\n          let params = this.defaults.register;\n          let body = JSON.stringify(Object.assign({}, params, options));\n          return fetch(uri, {\n            method,\n            headers,\n            body\n          }).then(onHttpError('Error registering client')).then(response => {\n            return response.json().then(json => this.registration = json);\n          });\n        } catch (error) {\n          return Promise.reject(error);\n        }\n      }\n\n      serialize() {\n        return JSON.stringify(this);\n      }\n      /**\n       * jwks\n       *\n       * @description Promises the issuer's JWK Set.\n       * @returns {Promise}\n       */\n\n\n      jwks() {\n        try {\n          let configuration = this.provider.configuration;\n          assert(configuration, 'OpenID Configuration is not initialized.');\n          assert(configuration.jwks_uri, 'OpenID Configuration is missing jwks_uri.');\n          let uri = configuration.jwks_uri;\n          return fetch(uri).then(onHttpError('Error resolving provider keys')).then(response => {\n            return response.json().then(json => JWKSet.importKeys(json)).then(jwks => this.provider.jwks = jwks);\n          });\n        } catch (error) {\n          return Promise.reject(error);\n        }\n      }\n      /**\n       * createRequest\n       *\n       * @param options {Object} Authn request options hashmap\n       * @param options.redirect_uri {string}\n       * @param options.response_type {string} e.g. 'code' or 'id_token token'\n       * @param session {Session|Storage} req.session or localStorage\n       * @returns {Promise<string>} Authn request URL\n       */\n\n\n      createRequest(options, session) {\n        return AuthenticationRequest.create(this, options, session || this.store);\n      }\n      /**\n       * Validate Response\n       *\n       * @param response {string} req.query or req.body.text\n       * @param session {Session|Storage} req.session or localStorage or similar\n       *\n       * @returns {Promise<Session>}\n       */\n\n\n      validateResponse(response, session = this.store) {\n        let options;\n\n        if (response.match(/^http(s?):\\/\\//)) {\n          options = {\n            rp: this,\n            redirect: response,\n            session\n          };\n        } else {\n          options = {\n            rp: this,\n            body: response,\n            session\n          };\n        }\n\n        const authResponse = new AuthenticationResponse(options);\n        return AuthenticationResponse.validateResponse(authResponse);\n      }\n      /**\n       * userinfo\n       *\n       * @description Promises the authenticated user's claims.\n       * @returns {Promise}\n       */\n\n\n      userinfo() {\n        try {\n          let configuration = this.provider.configuration;\n          assert(configuration, 'OpenID Configuration is not initialized.');\n          assert(configuration.userinfo_endpoint, 'OpenID Configuration is missing userinfo_endpoint.');\n          let uri = configuration.userinfo_endpoint;\n          let access_token = this.store.access_token;\n          assert(access_token, 'Missing access token.');\n          let headers = new Headers({\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${access_token}`\n          });\n          return fetch(uri, {\n            headers\n          }).then(onHttpError('Error fetching userinfo')).then(response => response.json());\n        } catch (error) {\n          return Promise.reject(error);\n        }\n      }\n      /**\n       * logoutRequest\n       *\n       * Composes and returns the logout request URI, based on the OP's\n       * `end_session_endpoint`, with appropriate parameters.\n       *\n       * Note: Calling client code has the responsibility to clear the local\n       * session state (for example, by calling `rp.clearSession()`). In addition,\n       * some IdPs (such as Google) may not provide an `end_session_endpoint`,\n       * in which case, this method will return null.\n       *\n       * @see https://openid.net/specs/openid-connect-session-1_0.html#RPLogout\n       *\n       * @throws {Error} If provider config is not initialized\n       *\n       * @throws {Error} If `post_logout_redirect_uri` was provided without a\n       *   corresponding `id_token_hint`\n       *\n       * @param [options={}] {object}\n       *\n       * @param [options.id_token_hint] {string} RECOMMENDED.\n       *   Previously issued ID Token passed to the logout endpoint as\n       *   a hint about the End-User's current authenticated session with the\n       *   Client. This is used as an indication of the identity of the End-User\n       *   that the RP is requesting be logged out by the OP. The OP *need not* be\n       *   listed as an audience of the ID Token when it is used as an\n       *   `id_token_hint` value.\n       *\n       * @param [options.post_logout_redirect_uri] {string} OPTIONAL. URL to which\n       *   the RP is requesting that the End-User's User Agent be redirected after\n       *   a logout has been performed. The value MUST have been previously\n       *   registered with the OP, either using the `post_logout_redirect_uris`\n       *   Registration parameter or via another mechanism. If supplied, the OP\n       *   SHOULD honor this request following the logout.\n       *\n       *   Note: The requirement to validate the uri for previous registration means\n       *   that, in practice, the `id_token_hint` is REQUIRED if\n       *   `post_logout_redirect_uri` is used. Otherwise, the OP has no way to get\n       *   the `client_id` to load the saved client registration, to validate the\n       *   uri. The only way it can get it is by decoding the `id_token_hint`.\n       *\n       * @param [options.state] {string} OPTIONAL. Opaque value used by the RP to\n       *   maintain state between the logout request and the callback to the\n       *   endpoint specified by the `post_logout_redirect_uri` query parameter. If\n       *   included in the logout request, the OP passes this value back to the RP\n       *   using the `state` query parameter when redirecting the User Agent back to\n       *   the RP.\n       *\n       * TODO: In the future, consider adding `response_mode` param, for the OP to\n       *   determine how to return the `state` back the RP.\n       *   @see http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html#ResponseModes\n       *\n       * TODO: Handle special cases for popular providers (Google, MSFT)\n       *\n       * @returns {string|null} Logout uri (or null if no end_session_endpoint was\n       *   provided in the IdP config)\n       */\n\n\n      logoutRequest(options = {}) {\n        const {\n          id_token_hint,\n          post_logout_redirect_uri,\n          state\n        } = options;\n        let configuration;\n        assert(this.provider, 'OpenID Configuration is not initialized');\n        configuration = this.provider.configuration;\n        assert(configuration, 'OpenID Configuration is not initialized');\n\n        if (!configuration.end_session_endpoint) {\n          console.log(`OpenId Configuration for ` + `${configuration.issuer} is missing end_session_endpoint`);\n          return null;\n        }\n\n        if (post_logout_redirect_uri && !id_token_hint) {\n          throw new Error('id_token_hint is required when using post_logout_redirect_uri');\n        }\n\n        const params = {};\n\n        if (id_token_hint) {\n          params.id_token_hint = id_token_hint;\n        }\n\n        if (post_logout_redirect_uri) {\n          params.post_logout_redirect_uri = post_logout_redirect_uri;\n        }\n\n        if (state) {\n          params.state = state;\n        }\n\n        const url = new URL(configuration.end_session_endpoint);\n        url.search = FormUrlEncoded.encode(params);\n        return url.href;\n      }\n      /**\n       * Logout\n       *\n       * @deprecated\n       *\n       * TODO: Add deprecation warnings, then remove. Client code should\n       *   use `logoutRequest()` instead\n       *\n       * @returns {Promise}\n       */\n\n\n      logout() {\n        let configuration;\n\n        try {\n          assert(this.provider, 'OpenID Configuration is not initialized.');\n          configuration = this.provider.configuration;\n          assert(configuration, 'OpenID Configuration is not initialized.');\n          assert(configuration.end_session_endpoint, 'OpenID Configuration is missing end_session_endpoint.');\n        } catch (error) {\n          return Promise.reject(error);\n        }\n\n        if (!configuration.end_session_endpoint) {\n          this.clearSession();\n          return Promise.resolve(undefined);\n        }\n\n        let uri = configuration.end_session_endpoint;\n        let method = 'get';\n        return fetch(uri, {\n          method,\n          credentials: 'include'\n        }).then(onHttpError('Error logging out')).then(() => this.clearSession()); // TODO: Validate `frontchannel_logout_uri` if necessary\n\n        /**\n         * frontchannel_logout_uri - OPTIONAL. RP URL that will cause the RP to log\n         * itself out when rendered in an iframe by the OP.\n         *\n         * An `iss` (issuer) query parameter and a `sid`\n         * (session ID) query parameter MAY be included by the OP to enable the RP\n         * to validate the request and to determine which of the potentially\n         * multiple sessions is to be logged out. If a sid (session ID) query\n         * parameter is included, an iss (issuer) query parameter MUST also be\n         * included.\n         * @see https://openid.net/specs/openid-connect-frontchannel-1_0.html#RPLogout\n         */\n      }\n\n      clearSession() {\n        let session = this.store;\n\n        if (!session) {\n          return;\n        }\n\n        delete session[SESSION_PRIVATE_KEY];\n      }\n      /**\n       * @param uri {string} Target Resource Server URI\n       * @param idToken {IDToken} ID Token to be embedded in the PoP token\n       *\n       * @returns {Promise<PoPToken>}\n       */\n\n\n      popTokenFor(uri, idToken) {\n        return PoPToken.issueFor(uri, idToken);\n      }\n\n    }\n\n    const SESSION_PRIVATE_KEY = 'oidc.session.privateKey';\n    RelyingParty.SESSION_PRIVATE_KEY = SESSION_PRIVATE_KEY;\n    module.exports = RelyingParty;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(20));\n  /***/\n}, function (module, exports) {\n  var g; // This works in non-strict mode\n\n  g = function () {\n    return this;\n  }();\n\n  try {\n    // This works if eval is allowed (see CSP)\n    g = g || new Function(\"return this\")();\n  } catch (e) {\n    // This works if the window reference is available\n    if (typeof window === \"object\") g = window;\n  } // g can still be undefined, but nothing to do about it...\n  // We return undefined, instead of nothing here, so it's\n  // easier to handle this case. if(!global) { ...}\n\n\n  module.exports = g;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (global) {\n    var objectAssign = __webpack_require__(22); // compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n    // original notice:\n\n    /*!\n     * The buffer module from node.js, for the browser.\n     *\n     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n     * @license  MIT\n     */\n\n\n    function compare(a, b) {\n      if (a === b) {\n        return 0;\n      }\n\n      var x = a.length;\n      var y = b.length;\n\n      for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n        if (a[i] !== b[i]) {\n          x = a[i];\n          y = b[i];\n          break;\n        }\n      }\n\n      if (x < y) {\n        return -1;\n      }\n\n      if (y < x) {\n        return 1;\n      }\n\n      return 0;\n    }\n\n    function isBuffer(b) {\n      if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n        return global.Buffer.isBuffer(b);\n      }\n\n      return !!(b != null && b._isBuffer);\n    } // based on node assert, original notice:\n    // NB: The URL to the CommonJS spec is kept just for tradition.\n    //     node-assert has evolved a lot since then, both in API and behavior.\n    // http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n    //\n    // THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n    //\n    // Originally from narwhal.js (http://narwhaljs.org)\n    // Copyright (c) 2009 Thomas Robinson <280north.com>\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a copy\n    // of this software and associated documentation files (the 'Software'), to\n    // deal in the Software without restriction, including without limitation the\n    // rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n    // sell copies of the Software, and to permit persons to whom the Software is\n    // furnished to do so, subject to the following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included in\n    // all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    // AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n    // ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n    // WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n    var util = __webpack_require__(23);\n\n    var hasOwn = Object.prototype.hasOwnProperty;\n    var pSlice = Array.prototype.slice;\n\n    var functionsHaveNames = function () {\n      return function foo() {}.name === 'foo';\n    }();\n\n    function pToString(obj) {\n      return Object.prototype.toString.call(obj);\n    }\n\n    function isView(arrbuf) {\n      if (isBuffer(arrbuf)) {\n        return false;\n      }\n\n      if (typeof global.ArrayBuffer !== 'function') {\n        return false;\n      }\n\n      if (typeof ArrayBuffer.isView === 'function') {\n        return ArrayBuffer.isView(arrbuf);\n      }\n\n      if (!arrbuf) {\n        return false;\n      }\n\n      if (arrbuf instanceof DataView) {\n        return true;\n      }\n\n      if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n        return true;\n      }\n\n      return false;\n    } // 1. The assert module provides functions that throw\n    // AssertionError's when particular conditions are not met. The\n    // assert module must conform to the following interface.\n\n\n    var assert = module.exports = ok; // 2. The AssertionError is defined in assert.\n    // new assert.AssertionError({ message: message,\n    //                             actual: actual,\n    //                             expected: expected })\n\n    var regex = /\\s*function\\s+([^\\(\\s]*)\\s*/; // based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\n\n    function getName(func) {\n      if (!util.isFunction(func)) {\n        return;\n      }\n\n      if (functionsHaveNames) {\n        return func.name;\n      }\n\n      var str = func.toString();\n      var match = str.match(regex);\n      return match && match[1];\n    }\n\n    assert.AssertionError = function AssertionError(options) {\n      this.name = 'AssertionError';\n      this.actual = options.actual;\n      this.expected = options.expected;\n      this.operator = options.operator;\n\n      if (options.message) {\n        this.message = options.message;\n        this.generatedMessage = false;\n      } else {\n        this.message = getMessage(this);\n        this.generatedMessage = true;\n      }\n\n      var stackStartFunction = options.stackStartFunction || fail;\n\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, stackStartFunction);\n      } else {\n        // non v8 browsers so we can have a stacktrace\n        var err = new Error();\n\n        if (err.stack) {\n          var out = err.stack; // try to strip useless frames\n\n          var fn_name = getName(stackStartFunction);\n          var idx = out.indexOf('\\n' + fn_name);\n\n          if (idx >= 0) {\n            // once we have located the function frame\n            // we need to strip out everything before it (and its line)\n            var next_line = out.indexOf('\\n', idx + 1);\n            out = out.substring(next_line + 1);\n          }\n\n          this.stack = out;\n        }\n      }\n    }; // assert.AssertionError instanceof Error\n\n\n    util.inherits(assert.AssertionError, Error);\n\n    function truncate(s, n) {\n      if (typeof s === 'string') {\n        return s.length < n ? s : s.slice(0, n);\n      } else {\n        return s;\n      }\n    }\n\n    function inspect(something) {\n      if (functionsHaveNames || !util.isFunction(something)) {\n        return util.inspect(something);\n      }\n\n      var rawname = getName(something);\n      var name = rawname ? ': ' + rawname : '';\n      return '[Function' + name + ']';\n    }\n\n    function getMessage(self) {\n      return truncate(inspect(self.actual), 128) + ' ' + self.operator + ' ' + truncate(inspect(self.expected), 128);\n    } // At present only the three keys mentioned above are used and\n    // understood by the spec. Implementations or sub modules can pass\n    // other keys to the AssertionError's constructor - they will be\n    // ignored.\n    // 3. All of the following functions must throw an AssertionError\n    // when a corresponding condition is not met, with a message that\n    // may be undefined if not provided.  All assertion methods provide\n    // both the actual and expected values to the assertion error for\n    // display purposes.\n\n\n    function fail(actual, expected, message, operator, stackStartFunction) {\n      throw new assert.AssertionError({\n        message: message,\n        actual: actual,\n        expected: expected,\n        operator: operator,\n        stackStartFunction: stackStartFunction\n      });\n    } // EXTENSION! allows for well behaved errors defined elsewhere.\n\n\n    assert.fail = fail; // 4. Pure assertion tests whether a value is truthy, as determined\n    // by !!guard.\n    // assert.ok(guard, message_opt);\n    // This statement is equivalent to assert.equal(true, !!guard,\n    // message_opt);. To test strictly for the value true, use\n    // assert.strictEqual(true, guard, message_opt);.\n\n    function ok(value, message) {\n      if (!value) fail(value, true, message, '==', assert.ok);\n    }\n\n    assert.ok = ok; // 5. The equality assertion tests shallow, coercive equality with\n    // ==.\n    // assert.equal(actual, expected, message_opt);\n\n    assert.equal = function equal(actual, expected, message) {\n      if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n    }; // 6. The non-equality assertion tests for whether two objects are not equal\n    // with != assert.notEqual(actual, expected, message_opt);\n\n\n    assert.notEqual = function notEqual(actual, expected, message) {\n      if (actual == expected) {\n        fail(actual, expected, message, '!=', assert.notEqual);\n      }\n    }; // 7. The equivalence assertion tests a deep equality relation.\n    // assert.deepEqual(actual, expected, message_opt);\n\n\n    assert.deepEqual = function deepEqual(actual, expected, message) {\n      if (!_deepEqual(actual, expected, false)) {\n        fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n      }\n    };\n\n    assert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n      if (!_deepEqual(actual, expected, true)) {\n        fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n      }\n    };\n\n    function _deepEqual(actual, expected, strict, memos) {\n      // 7.1. All identical values are equivalent, as determined by ===.\n      if (actual === expected) {\n        return true;\n      } else if (isBuffer(actual) && isBuffer(expected)) {\n        return compare(actual, expected) === 0; // 7.2. If the expected value is a Date object, the actual value is\n        // equivalent if it is also a Date object that refers to the same time.\n      } else if (util.isDate(actual) && util.isDate(expected)) {\n        return actual.getTime() === expected.getTime(); // 7.3 If the expected value is a RegExp object, the actual value is\n        // equivalent if it is also a RegExp object with the same source and\n        // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n      } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n        return actual.source === expected.source && actual.global === expected.global && actual.multiline === expected.multiline && actual.lastIndex === expected.lastIndex && actual.ignoreCase === expected.ignoreCase; // 7.4. Other pairs that do not both pass typeof value == 'object',\n        // equivalence is determined by ==.\n      } else if ((actual === null || typeof actual !== 'object') && (expected === null || typeof expected !== 'object')) {\n        return strict ? actual === expected : actual == expected; // If both values are instances of typed arrays, wrap their underlying\n        // ArrayBuffers in a Buffer each to increase performance\n        // This optimization requires the arrays to have the same type as checked by\n        // Object.prototype.toString (aka pToString). Never perform binary\n        // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n        // bit patterns are not identical.\n      } else if (isView(actual) && isView(expected) && pToString(actual) === pToString(expected) && !(actual instanceof Float32Array || actual instanceof Float64Array)) {\n        return compare(new Uint8Array(actual.buffer), new Uint8Array(expected.buffer)) === 0; // 7.5 For all other Object pairs, including Array objects, equivalence is\n        // determined by having the same number of owned properties (as verified\n        // with Object.prototype.hasOwnProperty.call), the same set of keys\n        // (although not necessarily the same order), equivalent values for every\n        // corresponding key, and an identical 'prototype' property. Note: this\n        // accounts for both named and indexed properties on Arrays.\n      } else if (isBuffer(actual) !== isBuffer(expected)) {\n        return false;\n      } else {\n        memos = memos || {\n          actual: [],\n          expected: []\n        };\n        var actualIndex = memos.actual.indexOf(actual);\n\n        if (actualIndex !== -1) {\n          if (actualIndex === memos.expected.indexOf(expected)) {\n            return true;\n          }\n        }\n\n        memos.actual.push(actual);\n        memos.expected.push(expected);\n        return objEquiv(actual, expected, strict, memos);\n      }\n    }\n\n    function isArguments(object) {\n      return Object.prototype.toString.call(object) == '[object Arguments]';\n    }\n\n    function objEquiv(a, b, strict, actualVisitedObjects) {\n      if (a === null || a === undefined || b === null || b === undefined) return false; // if one is a primitive, the other must be same\n\n      if (util.isPrimitive(a) || util.isPrimitive(b)) return a === b;\n      if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b)) return false;\n      var aIsArgs = isArguments(a);\n      var bIsArgs = isArguments(b);\n      if (aIsArgs && !bIsArgs || !aIsArgs && bIsArgs) return false;\n\n      if (aIsArgs) {\n        a = pSlice.call(a);\n        b = pSlice.call(b);\n        return _deepEqual(a, b, strict);\n      }\n\n      var ka = objectKeys(a);\n      var kb = objectKeys(b);\n      var key, i; // having the same number of owned properties (keys incorporates\n      // hasOwnProperty)\n\n      if (ka.length !== kb.length) return false; //the same set of keys (although not necessarily the same order),\n\n      ka.sort();\n      kb.sort(); //~~~cheap key test\n\n      for (i = ka.length - 1; i >= 0; i--) {\n        if (ka[i] !== kb[i]) return false;\n      } //equivalent values for every corresponding key, and\n      //~~~possibly expensive deep test\n\n\n      for (i = ka.length - 1; i >= 0; i--) {\n        key = ka[i];\n        if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects)) return false;\n      }\n\n      return true;\n    } // 8. The non-equivalence assertion tests for any deep inequality.\n    // assert.notDeepEqual(actual, expected, message_opt);\n\n\n    assert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n      if (_deepEqual(actual, expected, false)) {\n        fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n      }\n    };\n\n    assert.notDeepStrictEqual = notDeepStrictEqual;\n\n    function notDeepStrictEqual(actual, expected, message) {\n      if (_deepEqual(actual, expected, true)) {\n        fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n      }\n    } // 9. The strict equality assertion tests strict equality, as determined by ===.\n    // assert.strictEqual(actual, expected, message_opt);\n\n\n    assert.strictEqual = function strictEqual(actual, expected, message) {\n      if (actual !== expected) {\n        fail(actual, expected, message, '===', assert.strictEqual);\n      }\n    }; // 10. The strict non-equality assertion tests for strict inequality, as\n    // determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\n\n    assert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n      if (actual === expected) {\n        fail(actual, expected, message, '!==', assert.notStrictEqual);\n      }\n    };\n\n    function expectedException(actual, expected) {\n      if (!actual || !expected) {\n        return false;\n      }\n\n      if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n        return expected.test(actual);\n      }\n\n      try {\n        if (actual instanceof expected) {\n          return true;\n        }\n      } catch (e) {// Ignore.  The instanceof check doesn't work for arrow functions.\n      }\n\n      if (Error.isPrototypeOf(expected)) {\n        return false;\n      }\n\n      return expected.call({}, actual) === true;\n    }\n\n    function _tryBlock(block) {\n      var error;\n\n      try {\n        block();\n      } catch (e) {\n        error = e;\n      }\n\n      return error;\n    }\n\n    function _throws(shouldThrow, block, expected, message) {\n      var actual;\n\n      if (typeof block !== 'function') {\n        throw new TypeError('\"block\" argument must be a function');\n      }\n\n      if (typeof expected === 'string') {\n        message = expected;\n        expected = null;\n      }\n\n      actual = _tryBlock(block);\n      message = (expected && expected.name ? ' (' + expected.name + ').' : '.') + (message ? ' ' + message : '.');\n\n      if (shouldThrow && !actual) {\n        fail(actual, expected, 'Missing expected exception' + message);\n      }\n\n      var userProvidedMessage = typeof message === 'string';\n      var isUnwantedException = !shouldThrow && util.isError(actual);\n      var isUnexpectedException = !shouldThrow && actual && !expected;\n\n      if (isUnwantedException && userProvidedMessage && expectedException(actual, expected) || isUnexpectedException) {\n        fail(actual, expected, 'Got unwanted exception' + message);\n      }\n\n      if (shouldThrow && actual && expected && !expectedException(actual, expected) || !shouldThrow && actual) {\n        throw actual;\n      }\n    } // 11. Expected to throw an error:\n    // assert.throws(block, Error_opt, message_opt);\n\n\n    assert.throws = function (block,\n    /*optional*/\n    error,\n    /*optional*/\n    message) {\n      _throws(true, block, error, message);\n    }; // EXTENSION! This is annoying to write outside this module.\n\n\n    assert.doesNotThrow = function (block,\n    /*optional*/\n    error,\n    /*optional*/\n    message) {\n      _throws(false, block, error, message);\n    };\n\n    assert.ifError = function (err) {\n      if (err) throw err;\n    }; // Expose a strict only variant of assert\n\n\n    function strict(value, message) {\n      if (!value) fail(value, true, message, '==', strict);\n    }\n\n    assert.strict = objectAssign(strict, assert, {\n      equal: assert.strictEqual,\n      deepEqual: assert.deepStrictEqual,\n      notEqual: assert.notStrictEqual,\n      notDeepEqual: assert.notDeepStrictEqual\n    });\n    assert.strict.strict = assert.strict;\n\n    var objectKeys = Object.keys || function (obj) {\n      var keys = [];\n\n      for (var key in obj) {\n        if (hasOwn.call(obj, key)) keys.push(key);\n      }\n\n      return keys;\n    };\n    /* WEBPACK VAR INJECTION */\n\n  }).call(this, __webpack_require__(20));\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /*\n  object-assign\n  (c) Sindre Sorhus\n  @license MIT\n  */\n\n  /* eslint-disable no-unused-vars */\n\n  var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n  function toObject(val) {\n    if (val === null || val === undefined) {\n      throw new TypeError('Object.assign cannot be called with null or undefined');\n    }\n\n    return Object(val);\n  }\n\n  function shouldUseNative() {\n    try {\n      if (!Object.assign) {\n        return false;\n      } // Detect buggy property enumeration order in older V8 versions.\n      // https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\n\n      var test1 = new String('abc'); // eslint-disable-line no-new-wrappers\n\n      test1[5] = 'de';\n\n      if (Object.getOwnPropertyNames(test1)[0] === '5') {\n        return false;\n      } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n      var test2 = {};\n\n      for (var i = 0; i < 10; i++) {\n        test2['_' + String.fromCharCode(i)] = i;\n      }\n\n      var order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n        return test2[n];\n      });\n\n      if (order2.join('') !== '0123456789') {\n        return false;\n      } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n      var test3 = {};\n      'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n        test3[letter] = letter;\n      });\n\n      if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n        return false;\n      }\n\n      return true;\n    } catch (err) {\n      // We don't expect any of the above to throw, but better to be safe.\n      return false;\n    }\n  }\n\n  module.exports = shouldUseNative() ? Object.assign : function (target, source) {\n    var from;\n    var to = toObject(target);\n    var symbols;\n\n    for (var s = 1; s < arguments.length; s++) {\n      from = Object(arguments[s]);\n\n      for (var key in from) {\n        if (hasOwnProperty.call(from, key)) {\n          to[key] = from[key];\n        }\n      }\n\n      if (getOwnPropertySymbols) {\n        symbols = getOwnPropertySymbols(from);\n\n        for (var i = 0; i < symbols.length; i++) {\n          if (propIsEnumerable.call(from, symbols[i])) {\n            to[symbols[i]] = from[symbols[i]];\n          }\n        }\n      }\n    }\n\n    return to;\n  };\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /* WEBPACK VAR INJECTION */\n  (function (process) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    var getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors || function getOwnPropertyDescriptors(obj) {\n      var keys = Object.keys(obj);\n      var descriptors = {};\n\n      for (var i = 0; i < keys.length; i++) {\n        descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n      }\n\n      return descriptors;\n    };\n\n    var formatRegExp = /%[sdj%]/g;\n\n    exports.format = function (f) {\n      if (!isString(f)) {\n        var objects = [];\n\n        for (var i = 0; i < arguments.length; i++) {\n          objects.push(inspect(arguments[i]));\n        }\n\n        return objects.join(' ');\n      }\n\n      var i = 1;\n      var args = arguments;\n      var len = args.length;\n      var str = String(f).replace(formatRegExp, function (x) {\n        if (x === '%%') return '%';\n        if (i >= len) return x;\n\n        switch (x) {\n          case '%s':\n            return String(args[i++]);\n\n          case '%d':\n            return Number(args[i++]);\n\n          case '%j':\n            try {\n              return JSON.stringify(args[i++]);\n            } catch (_) {\n              return '[Circular]';\n            }\n\n          default:\n            return x;\n        }\n      });\n\n      for (var x = args[i]; i < len; x = args[++i]) {\n        if (isNull(x) || !isObject(x)) {\n          str += ' ' + x;\n        } else {\n          str += ' ' + inspect(x);\n        }\n      }\n\n      return str;\n    }; // Mark that a method should not be used.\n    // Returns a modified function which warns once by default.\n    // If --no-deprecation is set, then it is a no-op.\n\n\n    exports.deprecate = function (fn, msg) {\n      if (typeof process !== 'undefined' && process.noDeprecation === true) {\n        return fn;\n      } // Allow for deprecating things in the process of starting up.\n\n\n      if (typeof process === 'undefined') {\n        return function () {\n          return exports.deprecate(fn, msg).apply(this, arguments);\n        };\n      }\n\n      var warned = false;\n\n      function deprecated() {\n        if (!warned) {\n          if (process.throwDeprecation) {\n            throw new Error(msg);\n          } else if (process.traceDeprecation) {\n            console.trace(msg);\n          } else {\n            console.error(msg);\n          }\n\n          warned = true;\n        }\n\n        return fn.apply(this, arguments);\n      }\n\n      return deprecated;\n    };\n\n    var debugs = {};\n    var debugEnviron;\n\n    exports.debuglog = function (set) {\n      if (isUndefined(debugEnviron)) debugEnviron = process.env.NODE_DEBUG || '';\n      set = set.toUpperCase();\n\n      if (!debugs[set]) {\n        if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n          var pid = process.pid;\n\n          debugs[set] = function () {\n            var msg = exports.format.apply(exports, arguments);\n            console.error('%s %d: %s', set, pid, msg);\n          };\n        } else {\n          debugs[set] = function () {};\n        }\n      }\n\n      return debugs[set];\n    };\n    /**\n     * Echos the value of a value. Trys to print the value out\n     * in the best way possible given the different types.\n     *\n     * @param {Object} obj The object to print out.\n     * @param {Object} opts Optional options object that alters the output.\n     */\n\n    /* legacy: obj, showHidden, depth, colors*/\n\n\n    function inspect(obj, opts) {\n      // default options\n      var ctx = {\n        seen: [],\n        stylize: stylizeNoColor\n      }; // legacy...\n\n      if (arguments.length >= 3) ctx.depth = arguments[2];\n      if (arguments.length >= 4) ctx.colors = arguments[3];\n\n      if (isBoolean(opts)) {\n        // legacy...\n        ctx.showHidden = opts;\n      } else if (opts) {\n        // got an \"options\" object\n        exports._extend(ctx, opts);\n      } // set default options\n\n\n      if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n      if (isUndefined(ctx.depth)) ctx.depth = 2;\n      if (isUndefined(ctx.colors)) ctx.colors = false;\n      if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n      if (ctx.colors) ctx.stylize = stylizeWithColor;\n      return formatValue(ctx, obj, ctx.depth);\n    }\n\n    exports.inspect = inspect; // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n\n    inspect.colors = {\n      'bold': [1, 22],\n      'italic': [3, 23],\n      'underline': [4, 24],\n      'inverse': [7, 27],\n      'white': [37, 39],\n      'grey': [90, 39],\n      'black': [30, 39],\n      'blue': [34, 39],\n      'cyan': [36, 39],\n      'green': [32, 39],\n      'magenta': [35, 39],\n      'red': [31, 39],\n      'yellow': [33, 39]\n    }; // Don't use 'blue' not visible on cmd.exe\n\n    inspect.styles = {\n      'special': 'cyan',\n      'number': 'yellow',\n      'boolean': 'yellow',\n      'undefined': 'grey',\n      'null': 'bold',\n      'string': 'green',\n      'date': 'magenta',\n      // \"name\": intentionally not styling\n      'regexp': 'red'\n    };\n\n    function stylizeWithColor(str, styleType) {\n      var style = inspect.styles[styleType];\n\n      if (style) {\n        return '\\u001b[' + inspect.colors[style][0] + 'm' + str + '\\u001b[' + inspect.colors[style][1] + 'm';\n      } else {\n        return str;\n      }\n    }\n\n    function stylizeNoColor(str, styleType) {\n      return str;\n    }\n\n    function arrayToHash(array) {\n      var hash = {};\n      array.forEach(function (val, idx) {\n        hash[val] = true;\n      });\n      return hash;\n    }\n\n    function formatValue(ctx, value, recurseTimes) {\n      // Provide a hook for user-specified inspect functions.\n      // Check that value is an object with an inspect function on it\n      if (ctx.customInspect && value && isFunction(value.inspect) && // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect && // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n        var ret = value.inspect(recurseTimes, ctx);\n\n        if (!isString(ret)) {\n          ret = formatValue(ctx, ret, recurseTimes);\n        }\n\n        return ret;\n      } // Primitive types cannot have properties\n\n\n      var primitive = formatPrimitive(ctx, value);\n\n      if (primitive) {\n        return primitive;\n      } // Look up the keys of the object.\n\n\n      var keys = Object.keys(value);\n      var visibleKeys = arrayToHash(keys);\n\n      if (ctx.showHidden) {\n        keys = Object.getOwnPropertyNames(value);\n      } // IE doesn't make error fields non-enumerable\n      // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\n\n      if (isError(value) && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n        return formatError(value);\n      } // Some type of object without properties can be shortcutted.\n\n\n      if (keys.length === 0) {\n        if (isFunction(value)) {\n          var name = value.name ? ': ' + value.name : '';\n          return ctx.stylize('[Function' + name + ']', 'special');\n        }\n\n        if (isRegExp(value)) {\n          return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n        }\n\n        if (isDate(value)) {\n          return ctx.stylize(Date.prototype.toString.call(value), 'date');\n        }\n\n        if (isError(value)) {\n          return formatError(value);\n        }\n      }\n\n      var base = '',\n          array = false,\n          braces = ['{', '}']; // Make Array say that they are Array\n\n      if (isArray(value)) {\n        array = true;\n        braces = ['[', ']'];\n      } // Make functions say that they are functions\n\n\n      if (isFunction(value)) {\n        var n = value.name ? ': ' + value.name : '';\n        base = ' [Function' + n + ']';\n      } // Make RegExps say that they are RegExps\n\n\n      if (isRegExp(value)) {\n        base = ' ' + RegExp.prototype.toString.call(value);\n      } // Make dates with properties first say the date\n\n\n      if (isDate(value)) {\n        base = ' ' + Date.prototype.toUTCString.call(value);\n      } // Make error with message first say the error\n\n\n      if (isError(value)) {\n        base = ' ' + formatError(value);\n      }\n\n      if (keys.length === 0 && (!array || value.length == 0)) {\n        return braces[0] + base + braces[1];\n      }\n\n      if (recurseTimes < 0) {\n        if (isRegExp(value)) {\n          return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n        } else {\n          return ctx.stylize('[Object]', 'special');\n        }\n      }\n\n      ctx.seen.push(value);\n      var output;\n\n      if (array) {\n        output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n      } else {\n        output = keys.map(function (key) {\n          return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n        });\n      }\n\n      ctx.seen.pop();\n      return reduceToSingleString(output, base, braces);\n    }\n\n    function formatPrimitive(ctx, value) {\n      if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');\n\n      if (isString(value)) {\n        var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '').replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"') + '\\'';\n        return ctx.stylize(simple, 'string');\n      }\n\n      if (isNumber(value)) return ctx.stylize('' + value, 'number');\n      if (isBoolean(value)) return ctx.stylize('' + value, 'boolean'); // For some reason typeof null is \"object\", so special case here.\n\n      if (isNull(value)) return ctx.stylize('null', 'null');\n    }\n\n    function formatError(value) {\n      return '[' + Error.prototype.toString.call(value) + ']';\n    }\n\n    function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n      var output = [];\n\n      for (var i = 0, l = value.length; i < l; ++i) {\n        if (hasOwnProperty(value, String(i))) {\n          output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));\n        } else {\n          output.push('');\n        }\n      }\n\n      keys.forEach(function (key) {\n        if (!key.match(/^\\d+$/)) {\n          output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));\n        }\n      });\n      return output;\n    }\n\n    function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n      var name, str, desc;\n      desc = Object.getOwnPropertyDescriptor(value, key) || {\n        value: value[key]\n      };\n\n      if (desc.get) {\n        if (desc.set) {\n          str = ctx.stylize('[Getter/Setter]', 'special');\n        } else {\n          str = ctx.stylize('[Getter]', 'special');\n        }\n      } else {\n        if (desc.set) {\n          str = ctx.stylize('[Setter]', 'special');\n        }\n      }\n\n      if (!hasOwnProperty(visibleKeys, key)) {\n        name = '[' + key + ']';\n      }\n\n      if (!str) {\n        if (ctx.seen.indexOf(desc.value) < 0) {\n          if (isNull(recurseTimes)) {\n            str = formatValue(ctx, desc.value, null);\n          } else {\n            str = formatValue(ctx, desc.value, recurseTimes - 1);\n          }\n\n          if (str.indexOf('\\n') > -1) {\n            if (array) {\n              str = str.split('\\n').map(function (line) {\n                return '  ' + line;\n              }).join('\\n').substr(2);\n            } else {\n              str = '\\n' + str.split('\\n').map(function (line) {\n                return '   ' + line;\n              }).join('\\n');\n            }\n          }\n        } else {\n          str = ctx.stylize('[Circular]', 'special');\n        }\n      }\n\n      if (isUndefined(name)) {\n        if (array && key.match(/^\\d+$/)) {\n          return str;\n        }\n\n        name = JSON.stringify('' + key);\n\n        if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n          name = name.substr(1, name.length - 2);\n          name = ctx.stylize(name, 'name');\n        } else {\n          name = name.replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"').replace(/(^\"|\"$)/g, \"'\");\n          name = ctx.stylize(name, 'string');\n        }\n      }\n\n      return name + ': ' + str;\n    }\n\n    function reduceToSingleString(output, base, braces) {\n      var numLinesEst = 0;\n      var length = output.reduce(function (prev, cur) {\n        numLinesEst++;\n        if (cur.indexOf('\\n') >= 0) numLinesEst++;\n        return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n      }, 0);\n\n      if (length > 60) {\n        return braces[0] + (base === '' ? '' : base + '\\n ') + ' ' + output.join(',\\n  ') + ' ' + braces[1];\n      }\n\n      return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n    } // NOTE: These type checking functions intentionally don't use `instanceof`\n    // because it is fragile and can be easily faked with `Object.create()`.\n\n\n    function isArray(ar) {\n      return Array.isArray(ar);\n    }\n\n    exports.isArray = isArray;\n\n    function isBoolean(arg) {\n      return typeof arg === 'boolean';\n    }\n\n    exports.isBoolean = isBoolean;\n\n    function isNull(arg) {\n      return arg === null;\n    }\n\n    exports.isNull = isNull;\n\n    function isNullOrUndefined(arg) {\n      return arg == null;\n    }\n\n    exports.isNullOrUndefined = isNullOrUndefined;\n\n    function isNumber(arg) {\n      return typeof arg === 'number';\n    }\n\n    exports.isNumber = isNumber;\n\n    function isString(arg) {\n      return typeof arg === 'string';\n    }\n\n    exports.isString = isString;\n\n    function isSymbol(arg) {\n      return typeof arg === 'symbol';\n    }\n\n    exports.isSymbol = isSymbol;\n\n    function isUndefined(arg) {\n      return arg === void 0;\n    }\n\n    exports.isUndefined = isUndefined;\n\n    function isRegExp(re) {\n      return isObject(re) && objectToString(re) === '[object RegExp]';\n    }\n\n    exports.isRegExp = isRegExp;\n\n    function isObject(arg) {\n      return typeof arg === 'object' && arg !== null;\n    }\n\n    exports.isObject = isObject;\n\n    function isDate(d) {\n      return isObject(d) && objectToString(d) === '[object Date]';\n    }\n\n    exports.isDate = isDate;\n\n    function isError(e) {\n      return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);\n    }\n\n    exports.isError = isError;\n\n    function isFunction(arg) {\n      return typeof arg === 'function';\n    }\n\n    exports.isFunction = isFunction;\n\n    function isPrimitive(arg) {\n      return arg === null || typeof arg === 'boolean' || typeof arg === 'number' || typeof arg === 'string' || typeof arg === 'symbol' || // ES6 symbol\n      typeof arg === 'undefined';\n    }\n\n    exports.isPrimitive = isPrimitive;\n    exports.isBuffer = __webpack_require__(25);\n\n    function objectToString(o) {\n      return Object.prototype.toString.call(o);\n    }\n\n    function pad(n) {\n      return n < 10 ? '0' + n.toString(10) : n.toString(10);\n    }\n\n    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; // 26 Feb 16:19:34\n\n    function timestamp() {\n      var d = new Date();\n      var time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(':');\n      return [d.getDate(), months[d.getMonth()], time].join(' ');\n    } // log is just a thin wrapper to console.log that prepends a timestamp\n\n\n    exports.log = function () {\n      console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n    };\n    /**\n     * Inherit the prototype methods from one constructor into another.\n     *\n     * The Function.prototype.inherits from lang.js rewritten as a standalone\n     * function (not on Function.prototype). NOTE: If this file is to be loaded\n     * during bootstrapping this function needs to be rewritten using some native\n     * functions as prototype setup using normal JavaScript does not work as\n     * expected during bootstrapping (see mirror.js in r114903).\n     *\n     * @param {function} ctor Constructor function which needs to inherit the\n     *     prototype.\n     * @param {function} superCtor Constructor function to inherit prototype from.\n     */\n\n\n    exports.inherits = __webpack_require__(26);\n\n    exports._extend = function (origin, add) {\n      // Don't do anything if add isn't an object\n      if (!add || !isObject(add)) return origin;\n      var keys = Object.keys(add);\n      var i = keys.length;\n\n      while (i--) {\n        origin[keys[i]] = add[keys[i]];\n      }\n\n      return origin;\n    };\n\n    function hasOwnProperty(obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    }\n\n    var kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\n    exports.promisify = function promisify(original) {\n      if (typeof original !== 'function') throw new TypeError('The \"original\" argument must be of type Function');\n\n      if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n        var fn = original[kCustomPromisifiedSymbol];\n\n        if (typeof fn !== 'function') {\n          throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n        }\n\n        Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n          value: fn,\n          enumerable: false,\n          writable: false,\n          configurable: true\n        });\n        return fn;\n      }\n\n      function fn() {\n        var promiseResolve, promiseReject;\n        var promise = new Promise(function (resolve, reject) {\n          promiseResolve = resolve;\n          promiseReject = reject;\n        });\n        var args = [];\n\n        for (var i = 0; i < arguments.length; i++) {\n          args.push(arguments[i]);\n        }\n\n        args.push(function (err, value) {\n          if (err) {\n            promiseReject(err);\n          } else {\n            promiseResolve(value);\n          }\n        });\n\n        try {\n          original.apply(this, args);\n        } catch (err) {\n          promiseReject(err);\n        }\n\n        return promise;\n      }\n\n      Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n      if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n        value: fn,\n        enumerable: false,\n        writable: false,\n        configurable: true\n      });\n      return Object.defineProperties(fn, getOwnPropertyDescriptors(original));\n    };\n\n    exports.promisify.custom = kCustomPromisifiedSymbol;\n\n    function callbackifyOnRejected(reason, cb) {\n      // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n      // Because `null` is a special error value in callbacks which means \"no error\n      // occurred\", we error-wrap so the callback consumer can distinguish between\n      // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n      if (!reason) {\n        var newReason = new Error('Promise was rejected with a falsy value');\n        newReason.reason = reason;\n        reason = newReason;\n      }\n\n      return cb(reason);\n    }\n\n    function callbackify(original) {\n      if (typeof original !== 'function') {\n        throw new TypeError('The \"original\" argument must be of type Function');\n      } // We DO NOT return the promise as it gives the user a false sense that\n      // the promise is actually somehow related to the callback's execution\n      // and that the callback throwing will reject the promise.\n\n\n      function callbackified() {\n        var args = [];\n\n        for (var i = 0; i < arguments.length; i++) {\n          args.push(arguments[i]);\n        }\n\n        var maybeCb = args.pop();\n\n        if (typeof maybeCb !== 'function') {\n          throw new TypeError('The last argument must be of type Function');\n        }\n\n        var self = this;\n\n        var cb = function () {\n          return maybeCb.apply(self, arguments);\n        }; // In true node style we process the callback on `nextTick` with all the\n        // implications (stack, `uncaughtException`, `async_hooks`)\n\n\n        original.apply(this, args).then(function (ret) {\n          process.nextTick(cb, null, ret);\n        }, function (rej) {\n          process.nextTick(callbackifyOnRejected, rej, cb);\n        });\n      }\n\n      Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n      Object.defineProperties(callbackified, getOwnPropertyDescriptors(original));\n      return callbackified;\n    }\n\n    exports.callbackify = callbackify;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(24));\n  /***/\n}, function (module, exports) {\n  // shim for using process in browser\n  var process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n  // don't break things.  But we need to wrap it in a try catch in case it is\n  // wrapped in strict mode code which doesn't define any globals.  It's inside a\n  // function because try/catches deoptimize in certain engines.\n\n  var cachedSetTimeout;\n  var cachedClearTimeout;\n\n  function defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n  }\n\n  function defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined');\n  }\n\n  (function () {\n    try {\n      if (typeof setTimeout === 'function') {\n        cachedSetTimeout = setTimeout;\n      } else {\n        cachedSetTimeout = defaultSetTimout;\n      }\n    } catch (e) {\n      cachedSetTimeout = defaultSetTimout;\n    }\n\n    try {\n      if (typeof clearTimeout === 'function') {\n        cachedClearTimeout = clearTimeout;\n      } else {\n        cachedClearTimeout = defaultClearTimeout;\n      }\n    } catch (e) {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  })();\n\n  function runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n      //normal enviroments in sane situations\n      return setTimeout(fun, 0);\n    } // if setTimeout wasn't available but was latter defined\n\n\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n      cachedSetTimeout = setTimeout;\n      return setTimeout(fun, 0);\n    }\n\n    try {\n      // when when somebody has screwed with setTimeout but no I.E. maddness\n      return cachedSetTimeout(fun, 0);\n    } catch (e) {\n      try {\n        // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n        return cachedSetTimeout.call(null, fun, 0);\n      } catch (e) {\n        // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n        return cachedSetTimeout.call(this, fun, 0);\n      }\n    }\n  }\n\n  function runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n      //normal enviroments in sane situations\n      return clearTimeout(marker);\n    } // if clearTimeout wasn't available but was latter defined\n\n\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n      cachedClearTimeout = clearTimeout;\n      return clearTimeout(marker);\n    }\n\n    try {\n      // when when somebody has screwed with setTimeout but no I.E. maddness\n      return cachedClearTimeout(marker);\n    } catch (e) {\n      try {\n        // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n        return cachedClearTimeout.call(null, marker);\n      } catch (e) {\n        // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n        // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n        return cachedClearTimeout.call(this, marker);\n      }\n    }\n  }\n\n  var queue = [];\n  var draining = false;\n  var currentQueue;\n  var queueIndex = -1;\n\n  function cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n      return;\n    }\n\n    draining = false;\n\n    if (currentQueue.length) {\n      queue = currentQueue.concat(queue);\n    } else {\n      queueIndex = -1;\n    }\n\n    if (queue.length) {\n      drainQueue();\n    }\n  }\n\n  function drainQueue() {\n    if (draining) {\n      return;\n    }\n\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n    var len = queue.length;\n\n    while (len) {\n      currentQueue = queue;\n      queue = [];\n\n      while (++queueIndex < len) {\n        if (currentQueue) {\n          currentQueue[queueIndex].run();\n        }\n      }\n\n      queueIndex = -1;\n      len = queue.length;\n    }\n\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n  }\n\n  process.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n\n    if (arguments.length > 1) {\n      for (var i = 1; i < arguments.length; i++) {\n        args[i - 1] = arguments[i];\n      }\n    }\n\n    queue.push(new Item(fun, args));\n\n    if (queue.length === 1 && !draining) {\n      runTimeout(drainQueue);\n    }\n  }; // v8 likes predictible objects\n\n\n  function Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n  }\n\n  Item.prototype.run = function () {\n    this.fun.apply(null, this.array);\n  };\n\n  process.title = 'browser';\n  process.browser = true;\n  process.env = {};\n  process.argv = [];\n  process.version = ''; // empty string to avoid regexp issues\n\n  process.versions = {};\n\n  function noop() {}\n\n  process.on = noop;\n  process.addListener = noop;\n  process.once = noop;\n  process.off = noop;\n  process.removeListener = noop;\n  process.removeAllListeners = noop;\n  process.emit = noop;\n  process.prependListener = noop;\n  process.prependOnceListener = noop;\n\n  process.listeners = function (name) {\n    return [];\n  };\n\n  process.binding = function (name) {\n    throw new Error('process.binding is not supported');\n  };\n\n  process.cwd = function () {\n    return '/';\n  };\n\n  process.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n  };\n\n  process.umask = function () {\n    return 0;\n  };\n  /***/\n\n}, function (module, exports) {\n  module.exports = function isBuffer(arg) {\n    return arg && typeof arg === 'object' && typeof arg.copy === 'function' && typeof arg.fill === 'function' && typeof arg.readUInt8 === 'function';\n  };\n  /***/\n\n}, function (module, exports) {\n  if (typeof Object.create === 'function') {\n    // implementation from standard node.js 'util' module\n    module.exports = function inherits(ctor, superCtor) {\n      ctor.super_ = superCtor;\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n    };\n  } else {\n    // old school shim for old browsers\n    module.exports = function inherits(ctor, superCtor) {\n      ctor.super_ = superCtor;\n\n      var TempCtor = function () {};\n\n      TempCtor.prototype = superCtor.prototype;\n      ctor.prototype = new TempCtor();\n      ctor.prototype.constructor = ctor;\n    };\n  }\n  /***/\n\n}, function (module, exports) {\n  (function () {\n    module.exports = window[\"window\"];\n  })();\n  /***/\n\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  module.exports = {\n    Formats: __webpack_require__(29),\n    Initializer: __webpack_require__(30),\n    JSONDocument: __webpack_require__(31),\n    JSONMapping: __webpack_require__(34),\n    JSONPatch: __webpack_require__(32),\n    JSONPointer: __webpack_require__(33),\n    JSONSchema: __webpack_require__(35),\n    Validator: __webpack_require__(36)\n  };\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * JSON Schema Formats\n   *\n   * TODO\n   * Is there a good way to express these over multiple lines with comments\n   * for easier debugging and auditing?\n   */\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var DATETIME_REGEXP = /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s][0-2]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:z|[+-]\\d\\d:\\d\\d)$/i;\n  var URI_REGEXP = /^(?:[a-z][a-z0-9+-.]*)?(?:\\:|\\/)\\/?[^\\s]*$/i;\n  var EMAIL_REGEXP = /^[a-z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i;\n  var IPV4_REGEXP = /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/;\n  var IPV6_REGEXP = /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i;\n  var HOSTNAME_REGEXP = /^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i;\n  /**\n   * Formats\n   */\n\n  var Formats = function () {\n    function Formats() {\n      _classCallCheck(this, Formats);\n    }\n\n    _createClass(Formats, [{\n      key: 'register',\n\n      /**\n       * Register\n       *\n       * @description\n       * Register a new mapping from named format to RegExp instance\n       *\n       * TODO\n       * We can do some extra validation of the RegExp to\n       * ensure it's the acceptable subset of RegExps allowed\n       * by JSON Schema.\n       *\n       * @param {string} name\n       * @param {RegExp} pattern\n       * @returns {RegExp}\n       */\n      value: function register(name, pattern) {\n        // verify name is a string\n        if (typeof name !== 'string') {\n          throw new Error('Format name must be a string');\n        } // cast a string to RegExp\n\n\n        if (typeof pattern === 'string') {\n          pattern = new RegExp(pattern);\n        }\n\n        return this[name] = pattern;\n      }\n      /**\n       * Resolve\n       *\n       * @description\n       * Given a format name, return the corresponding registered validation. In the\n       * event a format is not registered, throw an error.\n       *\n       * @param {string} name\n       * @returns {RegExp}\n       */\n\n    }, {\n      key: 'resolve',\n      value: function resolve(name) {\n        var format = this[name];\n\n        if (!format) {\n          throw new Error('Unknown JSON Schema format.');\n        }\n\n        return format;\n      }\n      /**\n       * Test\n       *\n       * @description\n       * Test that a value conforms to a format.\n       *\n       * @param {string} name\n       * @param {string} value\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: 'test',\n      value: function test(name, value) {\n        var format = this.resolve(name);\n        return format.test(value);\n      }\n    }], [{\n      key: 'initialize',\n\n      /**\n       * Initialize\n       *\n       * @description\n       * Create a new Formats instance and register default formats\n       *\n       * @returns {Formats}\n       */\n      value: function initialize() {\n        var formats = new Formats();\n        formats.register('date-time', DATETIME_REGEXP);\n        formats.register('uri', URI_REGEXP);\n        formats.register('email', EMAIL_REGEXP);\n        formats.register('ipv4', IPV4_REGEXP);\n        formats.register('ipv6', IPV6_REGEXP);\n        formats.register('hostname', HOSTNAME_REGEXP);\n        return formats;\n      }\n    }]);\n\n    return Formats;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = Formats.initialize();\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Initializer\n   */\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var Initializer = function () {\n    /**\n     * constructor\n     */\n    function Initializer(schema, options) {\n      _classCallCheck(this, Initializer);\n\n      Object.assign(this, options || {});\n      this.root = this.root || this;\n      this.root.depth = this.root.depth || 1;\n\n      if (this.level > this.root.depth) {\n        this.root.depth = this.level;\n      }\n\n      this.level = this.level || 0;\n      this.schema = schema;\n    }\n    /**\n     * compile (static)\n     */\n\n\n    _createClass(Initializer, [{\n      key: 'compile',\n\n      /**\n       * compile\n       */\n      value: function compile() {\n        var root = this.root,\n            depth = this.depth,\n            level = this.level;\n        var declarations = '';\n        var body = ''; // traverse the schema and generate code\n\n        body += this.default();\n        body += this.properties(); //body += this.additionalProperties()\n\n        body += this.items(); //body += this.additionalItems()\n        // value\n\n        body += this.member();\n        body += this.item(); // after traversing the schema\n        // generate the variable declarations\n\n        if (root === this) {\n          for (var i = 1; i <= this.root.depth; i++) {\n            declarations += this.declaration(i);\n          }\n\n          return '\\n        options = options || {}\\n\\n        if (options.filter === false) {\\n          Object.assign(target, JSON.parse(JSON.stringify(source)))\\n        }\\n\\n        ' + declarations + '\\n        ' + body + '\\n      ';\n        }\n\n        return body;\n      }\n      /**\n       * declaration\n       */\n\n    }, {\n      key: 'declaration',\n      value: function declaration(level) {\n        return '\\n      var target' + level + '\\n      var source' + level + '\\n      var count' + level + '\\n    ';\n      }\n      /**\n       * default\n       */\n\n    }, {\n      key: 'default',\n      value: function _default() {\n        var schema = this.schema,\n            level = this.level,\n            key = this.key,\n            index = this.index;\n        var value = schema.default; // rename default to value because it's a keyword and syntax highlighter breaks\n\n        var block = '';\n\n        if (schema.hasOwnProperty('default')) {\n          if (key) {\n            block += '\\n          target' + level + '[\\'' + key + '\\'] = ' + JSON.stringify(value) + '\\n        ';\n          }\n\n          if (index) {\n            block += '\\n          target' + level + '[' + index + '] = ' + JSON.stringify(value) + '\\n        ';\n          }\n\n          if (level > 1) {\n            block += '\\n          count' + level + '++\\n        ';\n          }\n\n          block = '\\n        if (options.defaults !== false) {\\n          ' + block + '\\n        }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * member\n       */\n\n    }, {\n      key: 'member',\n      value: function member() {\n        var schema = this.schema,\n            root = this.root,\n            level = this.level,\n            key = this.key;\n        var properties = schema.properties,\n            additionalProperties = schema.additionalProperties,\n            items = schema.items,\n            additionalItems = schema.additionalItems;\n        var block = ''; // `key` tells us to treat this subschema as an object member vs an array item\n        // and the absence of the other values here indicates we are dealing with a\n        // primitive value\n\n        if (key && !properties && !additionalProperties && !items && !additionalItems) {\n          // first generate the assignment statement\n          block += '\\n        target' + level + '[\\'' + key + '\\'] = source' + level + '[\\'' + key + '\\']\\n      '; // for nested container objects, add the counter incrementing statement\n\n          if (level > 1) {\n            block += '\\n          count' + level + '++\\n        ';\n          } // wrap the foregoing in a check for presence on the source\n\n\n          block = '\\n        if (source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n          ' + block + '\\n        }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * item\n       */\n\n    }, {\n      key: 'item',\n      value: function item() {\n        var schema = this.schema,\n            root = this.root,\n            level = this.level,\n            index = this.index;\n        var properties = schema.properties,\n            additionalProperties = schema.additionalProperties,\n            items = schema.items,\n            additionalItems = schema.additionalItems;\n        var block = '';\n\n        if (index && !properties && !additionalProperties && !items && !additionalItems) {\n          block += '\\n        target' + level + '[' + index + '] = source' + level + '[' + index + ']\\n      ';\n\n          if (level > 1) {\n            block += '\\n          count' + level + '++\\n        ';\n          }\n\n          block = '\\n        if (' + index + ' < len) {\\n          ' + block + '\\n        }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * properties\n       */\n\n    }, {\n      key: 'properties',\n      value: function properties() {\n        var schema = this.schema,\n            root = this.root,\n            level = this.level,\n            key = this.key,\n            index = this.index;\n        var properties = schema.properties;\n        var block = '';\n\n        if (properties) {\n          Object.keys(properties).forEach(function (key) {\n            var subschema = properties[key];\n            var initializer = new Initializer(subschema, {\n              key: key,\n              root: root,\n              level: level + 1\n            });\n            block += initializer.compile();\n          }); // root-level properties boilerplate\n\n          if (root === this) {\n            block = '\\n          if (typeof source === \\'object\\' && source !== null && !Array.isArray(source)) {\\n            if (typeof target !== \\'object\\') {\\n              throw new Error(\\'?\\')\\n            }\\n\\n            source1 = source\\n            target1 = target\\n            count1 = 0\\n\\n            ' + block + '\\n          }\\n        '; // nested properties boilerplate\n          } else {\n            if (index) {\n              block = '\\n            if (' + index + ' < source' + level + '.length || typeof source' + level + '[' + index + '] === \\'object\\') {\\n\\n              source' + (level + 1) + ' = source' + level + '[' + index + '] || {}\\n              count' + (level + 1) + ' = 0\\n\\n              if (' + index + ' < target' + level + '.length || typeof target' + level + '[' + index + '] !== \\'object\\') {\\n                target' + (level + 1) + ' = {}\\n                if (' + index + ' < source' + level + '.length) {\\n                  count' + (level + 1) + '++\\n                }\\n              } else {\\n                target' + (level + 1) + ' = target' + level + '[' + index + ']\\n              }\\n\\n              ' + block + '\\n\\n              if (count' + (level + 1) + ' > 0) {\\n                target' + level + '[' + index + '] = target' + (level + 1) + '\\n                count' + level + '++\\n              }\\n\\n            } else {\\n              target' + level + '[' + index + '] = source' + level + '[' + index + ']\\n              count' + level + '++\\n            }\\n          ';\n            }\n\n            if (key) {\n              block = '\\n            if ((typeof source' + level + '[\\'' + key + '\\'] === \\'object\\'\\n                  && source' + level + '[\\'' + key + '\\'] !== null\\n                  && !Array.isArray(source' + level + '[\\'' + key + '\\']))\\n                || !source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n\\n              source' + (level + 1) + ' = source' + level + '[\\'' + key + '\\'] || {}\\n              count' + (level + 1) + ' = 0\\n\\n              if (!target' + level + '.hasOwnProperty(\\'' + key + '\\')\\n                  || typeof target' + level + '[\\'' + key + '\\'] !== \\'object\\'\\n                  || target' + level + '[\\'' + key + '\\'] === null\\n                  || Array.isArray(target' + level + '[\\'' + key + '\\'])) {\\n                target' + (level + 1) + ' = {}\\n                if (source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n                  count' + (level + 1) + '++\\n                }\\n              } else {\\n                target' + (level + 1) + ' = target' + level + '[\\'' + key + '\\']\\n                count' + (level + 1) + '++\\n              }\\n\\n              ' + block + '\\n\\n              if (count' + (level + 1) + ' > 0) {\\n                target' + level + '[\\'' + key + '\\'] = target' + (level + 1) + '\\n                count' + level + '++\\n              }\\n\\n            } else {\\n              target' + level + '[\\'' + key + '\\'] = source' + level + '[\\'' + key + '\\']\\n              count' + level + '++\\n            }\\n          ';\n            }\n          }\n        }\n\n        return block;\n      }\n      /**\n       *\n       */\n\n    }, {\n      key: 'additionalProperties',\n      value: function additionalProperties() {}\n      /**\n       * items\n       */\n\n    }, {\n      key: 'items',\n      value: function items() {\n        var schema = this.schema,\n            root = this.root,\n            level = this.level,\n            key = this.key,\n            index = this.index;\n        var items = schema.items;\n        var block = '';\n\n        if (items) {\n          if (Array.isArray(items)) {// TODO\n            //\n            //\n            //\n            //\n            //\n            // ...\n          } else if ((typeof items === 'undefined' ? 'undefined' : _typeof(items)) === 'object' && items !== null) {\n            var _index = 'i' + (level + 1);\n\n            var initializer = new Initializer(items, {\n              index: _index,\n              root: root,\n              level: level + 1\n            });\n            block += '\\n          var sLen = source' + (level + 1) + '.length || 0\\n          var tLen = target' + (level + 1) + '.length || 0\\n          var len = 0\\n\\n          if (sLen > len) { len = sLen }\\n          // THIS IS WRONG, CAUSED SIMPLE ARRAY INIT TO FAIL (OVERWRITE\\n          // EXISTING TARGET VALUES WITH UNDEFINED WHEN SOURCE IS SHORTER THAN\\n          // TARGET). LEAVING HERE UNTIL WE FINISH TESTING AND SEE WHY IT MIGHT\\n          // HAVE BEEN HERE IN THE FIRST PLACE.\\n          //\\n          // if (tLen > len) { len = tLen }\\n\\n          for (var ' + _index + ' = 0; ' + _index + ' < len; ' + _index + '++) {\\n            ' + initializer.compile() + '\\n          }\\n        ';\n          } // root-level properties boilerplate\n\n\n          if (root === this) {\n            block = '\\n          if (Array.isArray(source)) {\\n            if (!Array.isArray(target)) {\\n              throw new Error(\\'?\\')\\n            }\\n\\n            source1 = source\\n            target1 = target\\n\\n            ' + block + '\\n          }\\n        '; // nested properties boilerplate\n          } else {\n            block = '\\n          if (Array.isArray(source' + level + '[\\'' + key + '\\']) || !source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n\\n            source' + (level + 1) + ' = source' + level + '[\\'' + key + '\\'] || []\\n            count' + (level + 1) + ' = 0\\n\\n            if (!target' + level + '.hasOwnProperty(\\'' + key + '\\') || !Array.isArray(target' + level + '[\\'' + key + '\\'])) {\\n              target' + (level + 1) + ' = []\\n                if (source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n                  count' + (level + 1) + '++\\n                }\\n\\n            } else {\\n              target' + (level + 1) + ' = target' + level + '[\\'' + key + '\\']\\n              count' + (level + 1) + '++\\n            }\\n\\n            ' + block + '\\n\\n            if (count' + (level + 1) + ' > 0) {\\n              target' + level + '[\\'' + key + '\\'] = target' + (level + 1) + '\\n              count' + level + '++\\n            }\\n\\n          } else {\\n            target' + level + '[\\'' + key + '\\'] = source' + level + '[\\'' + key + '\\']\\n            count' + level + '++\\n          }\\n        ';\n          }\n        }\n\n        return block;\n      }\n      /**\n       *\n       */\n\n    }, {\n      key: 'additionalItems',\n      value: function additionalItems() {}\n    }], [{\n      key: 'compile',\n      value: function compile(schema) {\n        var initializer = new Initializer(schema);\n        var block = initializer.compile(); //console.log(beautify(block))\n\n        try {\n          return new Function('target', 'source', 'options', block);\n        } catch (e) {\n          console.log(e, e.stack);\n        }\n      }\n    }]);\n\n    return Initializer;\n  }();\n\n  module.exports = Initializer;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Module dependencies\n   * @ignore\n   */\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var JSONPatch = __webpack_require__(32);\n  /**\n   * JSONDocument\n   *\n   * @class\n   * JSONDocument is a high level interface that binds together all other features of\n   * this package and provides the principle method of data modeling.\n   */\n\n\n  var JSONDocument = function () {\n    _createClass(JSONDocument, null, [{\n      key: 'schema',\n\n      /**\n       * Schema\n       */\n      get: function get() {\n        throw new Error('Schema must be defined by classes extending JSONDocument');\n      }\n      /**\n       * Constructor\n       *\n       * @param {Object} data\n       * @param {Object} options\n       */\n\n    }]);\n\n    function JSONDocument() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, JSONDocument);\n\n      this.initialize(data, options);\n    }\n    /**\n     * Initialize\n     *\n     * @param {Object} data\n     * @param {Object} options\n     */\n\n\n    _createClass(JSONDocument, [{\n      key: 'initialize',\n      value: function initialize() {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var schema = this.constructor.schema;\n        schema.initialize(this, data, options);\n      }\n      /**\n       * Validate\n       *\n       * @param {JSONSchema} alternate - OPTIONAL alternate schema\n       * @returns {Object}\n       */\n\n    }, {\n      key: 'validate',\n      value: function validate(alternate) {\n        var schema = this.constructor.schema;\n        return (alternate || schema).validate(this);\n      }\n      /**\n       * Patch\n       *\n       * @param {Array} ops\n       */\n\n    }, {\n      key: 'patch',\n      value: function patch(ops) {\n        var patch = new JSONPatch(ops);\n        patch.apply(this);\n      }\n      /**\n       * Select\n       */\n\n    }, {\n      key: 'select',\n      value: function select() {}\n      /**\n       * Project\n       *\n       * @description\n       * Given a mapping, return an object projected from the current instance.\n       *\n       * @example\n       * let schema = new JSONSchema({\n       *   properties: {\n       *     foo: { type: 'Array' }\n       *   }\n       * })\n       *\n       * let mapping = new JSONMapping({\n       *   '/foo/0': '/bar/baz'\n       * })\n       *\n       * class FooTracker extends JSONDocument {\n       *   static get schema () { return schema }\n       * }\n       *\n       * let instance = new FooTracker({ foo: ['qux'] })\n       * instance.project(mapping)\n       * // => { bar: { baz: 'qux' } }\n       *\n       * @param {JSONMapping} mapping\n       * @return {Object}\n       */\n\n    }, {\n      key: 'project',\n      value: function project(mapping) {\n        return mapping.project(this);\n      }\n      /**\n       * Serialize\n       *\n       * @param {Object} object\n       * @returns {string}\n       */\n\n    }], [{\n      key: 'serialize',\n      value: function serialize(object) {\n        return JSON.stringify(object);\n      }\n      /**\n       * Deserialize\n       *\n       * @param {string} data\n       * @return {*}\n       */\n\n    }, {\n      key: 'deserialize',\n      value: function deserialize(data) {\n        try {\n          return JSON.parse(data);\n        } catch (e) {\n          throw new Error('Failed to parse JSON');\n        }\n      }\n    }]);\n\n    return JSONDocument;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = JSONDocument;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Module dependencies\n   * @ignore\n   */\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var JSONPointer = __webpack_require__(33);\n  /**\n   * Modes\n   */\n\n\n  var THROW = 0;\n  var RECOVER = 1;\n  var SILENT = 2;\n  /**\n   * Operations list\n   */\n\n  var OPERATIONS = ['add', 'remove', 'replace', 'move', 'copy', 'test'];\n  /**\n   * Patch\n   *\n   * @class\n   * Implements RFC 6902: JavaScript Object Notation (JSON) Patch\n   * https://tools.ietf.org/html/rfc6902\n   */\n\n  var JSONPatch = function () {\n    /**\n     * Constructor\n     *\n     * @param {Array} ops\n     */\n    function JSONPatch(ops) {\n      _classCallCheck(this, JSONPatch);\n\n      this.ops = ops || [];\n    }\n    /**\n     * Apply\n     *\n     * @todo handle errors/roll back\n     * @todo protect properties that are private in the schema\n     * @todo map JSON Pointers real property names\n     *\n     * @param {Object} target\n     */\n\n\n    _createClass(JSONPatch, [{\n      key: 'apply',\n      value: function apply(target) {\n        var _this = this;\n\n        this.ops.forEach(function (operation) {\n          var op = operation.op;\n\n          if (!op) {\n            throw new Error('Missing \"op\" in JSON Patch operation');\n          }\n\n          if (OPERATIONS.indexOf(op) === -1) {\n            throw new Error('Invalid \"op\" in JSON Patch operation');\n          }\n\n          if (!operation.path) {\n            throw new Error('Missing \"path\" in JSON Patch operation');\n          }\n\n          _this[op](operation, target);\n        });\n      }\n      /**\n       * Add\n       *\n       * @param {Object} op\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'add',\n      value: function add(op, target) {\n        if (op.value === undefined) {\n          throw new Error('Missing \"value\" in JSON Patch add operation');\n        }\n\n        var pointer = new JSONPointer(op.path, SILENT);\n        pointer.add(target, op.value);\n      }\n      /**\n       * Remove\n       *\n       * @param {Object} op\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'remove',\n      value: function remove(op, target) {\n        var pointer = new JSONPointer(op.path);\n        pointer.remove(target);\n      }\n      /**\n       * Replace\n       *\n       * @param {Object} op\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'replace',\n      value: function replace(op, target) {\n        if (op.value === undefined) {\n          throw new Error('Missing \"value\" in JSON Patch replace operation');\n        }\n\n        var pointer = new JSONPointer(op.path);\n        pointer.replace(target, op.value);\n      }\n      /**\n       * Move\n       *\n       * @param {Object} op\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'move',\n      value: function move(op, target) {\n        if (op.from === undefined) {\n          throw new Error('Missing \"from\" in JSON Patch move operation');\n        }\n\n        if (op.path.match(new RegExp('^' + op.from))) {\n          throw new Error('Invalid \"from\" in JSON Patch move operation');\n        }\n\n        var pointer = new JSONPointer(op.path);\n        var from = new JSONPointer(op.from);\n        var value = from.get(target);\n        from.remove(target);\n        pointer.add(target, value);\n      }\n      /**\n       * Copy\n       *\n       * @param {Object} op\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'copy',\n      value: function copy(op, target) {\n        if (op.from === undefined) {\n          throw new Error('Missing \"from\" in JSON Patch copy operation');\n        }\n\n        var pointer = new JSONPointer(op.path);\n        var from = new JSONPointer(op.from);\n        var value = from.get(target);\n        pointer.add(target, value);\n      }\n      /**\n       * Test\n       *\n       * @param {Object} op\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'test',\n      value: function test(op, target) {\n        if (op.value === undefined) {\n          throw new Error('Missing \"value\" in JSON Patch test operation');\n        }\n\n        var pointer = new JSONPointer(op.path);\n        var value = pointer.get(target);\n\n        switch (_typeof(op.value)) {\n          //case 'string':\n          //case 'number':\n          //case 'boolean':\n          //  if (value !== op.value) {\n          //    throw new Error('Mismatching JSON Patch test value')\n          //  }\n          default:\n            if (value !== op.value) {\n              throw new Error('Mismatching JSON Patch test value');\n            }\n\n        }\n      }\n    }]);\n\n    return JSONPatch;\n  }();\n  /**\n   * Exports\n   */\n\n\n  module.exports = JSONPatch;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Mode enumeration\n   */\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var THROW = 0;\n  var RECOVER = 1;\n  var SILENT = 2;\n  /**\n   * JSONPointer\n   *\n   * @class\n   * Implements RFC 6901: JavaScript Object Notation (JSON) Pointer\n   * https://tools.ietf.org/html/rfc6901\n   */\n\n  var JSONPointer = function () {\n    /**\n     * Constructor\n     */\n    function JSONPointer(expr, mode) {\n      _classCallCheck(this, JSONPointer);\n\n      this.expr = expr;\n      this.mode = mode || THROW;\n      this.tokens = expr && expr.charAt(0) === '#' ? this.parseURIFragmentIdentifier(expr) : this.parseJSONString(expr);\n    }\n    /**\n     * Escape\n     */\n\n\n    _createClass(JSONPointer, [{\n      key: 'escape',\n      value: function escape(expr) {\n        return expr.replace(/~/g, '~0').replace(/\\//g, '~1');\n      }\n      /**\n       * Unescape\n       */\n\n    }, {\n      key: 'unescape',\n      value: function unescape(expr) {\n        return expr.replace(/~1/g, '/').replace(/~0/g, '~');\n      }\n      /**\n       * Parse\n       */\n\n    }, {\n      key: 'parseJSONString',\n\n      /**\n       * Parse JSON String\n       *\n       * @description Parse an expression into a list of tokens\n       * @param {string} expr\n       * @returns {Array}\n       */\n      value: function parseJSONString(expr) {\n        if (typeof expr !== 'string') {\n          throw new Error('JSON Pointer must be a string');\n        }\n\n        if (expr === '') {\n          return [];\n        }\n\n        if (expr.charAt(0) !== '/') {\n          throw new Error('Invalid JSON Pointer');\n        }\n\n        if (expr === '/') {\n          return [''];\n        }\n\n        return expr.substr(1).split('/').map(this.unescape);\n      }\n      /**\n       * To JSON String\n       *\n       * @description Render a JSON string representation of a pointer\n       * @returns {string}\n       */\n\n    }, {\n      key: 'toJSONString',\n      value: function toJSONString() {\n        return '/' + this.tokens.map(this.escape).join('/');\n      }\n      /**\n       * Parse URI Fragment Identifer\n       */\n\n    }, {\n      key: 'parseURIFragmentIdentifier',\n      value: function parseURIFragmentIdentifier(expr) {\n        if (typeof expr !== 'string') {\n          throw new Error('JSON Pointer must be a string');\n        }\n\n        if (expr.charAt(0) !== '#') {\n          throw new Error('Invalid JSON Pointer URI Fragment Identifier');\n        }\n\n        return this.parseJSONString(decodeURIComponent(expr.substr(1)));\n      }\n      /**\n       * To URI Fragment Identifier\n       *\n       * @description Render a URI Fragment Identifier representation of a pointer\n       * @returns {string}\n       */\n\n    }, {\n      key: 'toURIFragmentIdentifier',\n      value: function toURIFragmentIdentifier() {\n        var _this = this;\n\n        var value = this.tokens.map(function (token) {\n          return encodeURIComponent(_this.escape(token));\n        }).join('/');\n        return '#/' + value;\n      }\n      /**\n       * Get\n       *\n       * @description Get a value from the source object referenced by the pointer\n       * @param {Object} source\n       * @returns {*}\n       */\n\n    }, {\n      key: 'get',\n      value: function get(source) {\n        var current = source;\n        var tokens = this.tokens;\n\n        for (var i = 0; i < tokens.length; i++) {\n          if (!current || current[tokens[i]] === undefined) {\n            if (this.mode !== THROW) {\n              return undefined;\n            } else {\n              throw new Error('Invalid JSON Pointer reference');\n            }\n          }\n\n          current = current[tokens[i]];\n        }\n\n        return current;\n      }\n      /**\n       * Add\n       *\n       * @description Set a value on a target object referenced by the pointer. Put\n       * will insert an array element. To change an existing array elemnent, use\n       * `pointer.set()`\n       * @param {Object} target\n       * @param {*} value\n       */\n\n    }, {\n      key: 'add',\n      value: function add(target, value) {\n        var tokens = this.tokens;\n        var current = target; // iterate through the tokens\n\n        for (var i = 0; i < tokens.length; i++) {\n          var token = tokens[i]; // set the property on the target location\n\n          if (i === tokens.length - 1) {\n            if (token === '-') {\n              current.push(value);\n            } else if (Array.isArray(current)) {\n              current.splice(token, 0, value);\n            } else if (value !== undefined) {\n              current[token] = value;\n            } // handle missing target location based on \"mode\"\n\n          } else if (!current[token]) {\n            switch (this.mode) {\n              case THROW:\n                throw new Error('Invalid JSON Pointer reference');\n\n              case RECOVER:\n                current = current[token] = parseInt(token) ? [] : {};\n                break;\n\n              case SILENT:\n                return;\n\n              default:\n                throw new Error('Invalid pointer mode');\n            } // reference the next object in the path\n\n          } else {\n            current = current[token];\n          }\n        }\n      }\n      /**\n       * Replace\n       *\n       * @description Set a value on a target object referenced by the pointer. Set will\n       * overwrite an existing array element at the target location.\n       * @param {Object} target\n       * @param {*} value\n       */\n\n    }, {\n      key: 'replace',\n      value: function replace(target, value) {\n        var tokens = this.tokens;\n        var current = target;\n\n        for (var i = 0; i < tokens.length; i++) {\n          var token = tokens[i];\n\n          if (i === tokens.length - 1) {\n            current[token] = value;\n          } else if (!current[token]) {\n            current = current[token] = parseInt(token) ? [] : {};\n          } else {\n            current = current[token];\n          }\n        }\n      }\n      /**\n       * Del\n       *\n       * - if this is an array it should splice the value out\n       */\n\n    }, {\n      key: 'remove',\n      value: function remove(target) {\n        var tokens = this.tokens;\n        var current = target;\n\n        for (var i = 0; i < tokens.length; i++) {\n          var token = tokens[i];\n\n          if (current === undefined || current[token] === undefined) {\n            return undefined;\n          } else if (Array.isArray(current)) {\n            current.splice(token, 1);\n            return undefined;\n          } else if (i === tokens.length - 1) {\n            delete current[token];\n          }\n\n          current = current[token];\n        } // delete from the target\n\n      }\n    }], [{\n      key: 'parse',\n      value: function parse(expr) {\n        return new JSONPointer(expr);\n      }\n    }]);\n\n    return JSONPointer;\n  }();\n  /**\n   * Exports\n   */\n\n\n  module.exports = JSONPointer;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Module dependencies\n   * @ignore\n   */\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var JSONPointer = __webpack_require__(33);\n  /**\n   * JSONPointer mode\n   */\n\n\n  var RECOVER = 1;\n  /**\n   * JSONMapping\n   *\n   * @class\n   * Defines a means to declaratively translate between object\n   * representations using JSON Pointer syntax.\n   */\n\n  var JSONMapping = function () {\n    /**\n     * Constructor\n     *\n     * @description Translate pointers from JSON Strings into Pointer objects\n     * @param {Object} mapping\n     */\n    function JSONMapping(mapping) {\n      var _this = this;\n\n      _classCallCheck(this, JSONMapping);\n\n      Object.defineProperty(this, 'mapping', {\n        enumerable: false,\n        value: new Map()\n      });\n      Object.keys(mapping).forEach(function (key) {\n        var value = mapping[key];\n\n        _this.mapping.set(new JSONPointer(key, RECOVER), new JSONPointer(value, RECOVER));\n      });\n    }\n    /**\n     * Map\n     *\n     * @description Assign values from source to target by reading the mapping\n     * from right to left.\n     * @param {Object} target\n     * @param {Object} source\n     */\n\n\n    _createClass(JSONMapping, [{\n      key: 'map',\n      value: function map(target, source) {\n        this.mapping.forEach(function (right, left) {\n          left.add(target, right.get(source));\n        });\n      }\n      /**\n       * Project\n       *\n       * @description Assign values from source to target by reading the mapping\n       * from left to right.\n       * @param {Object} source\n       * @param {Object} target\n       */\n\n    }, {\n      key: 'project',\n      value: function project(source, target) {\n        this.mapping.forEach(function (right, left) {\n          right.add(target, left.get(source));\n        });\n      }\n    }]);\n\n    return JSONMapping;\n  }();\n  /**\n   * Exports\n   */\n\n\n  module.exports = JSONMapping;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Module dependencies\n   * @ignore\n   */\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var Initializer = __webpack_require__(30);\n\n  var Validator = __webpack_require__(36);\n  /**\n   * JSONSchema\n   *\n   * @class\n   * Compiles JSON Schema documents to an object with object initialization\n   * and validation methods.\n   */\n\n\n  var JSONSchema = function () {\n    /**\n     * Constructor\n     *\n     * @param {Object} schema\n     */\n    function JSONSchema(schema) {\n      _classCallCheck(this, JSONSchema); // TODO: optionally parse JSON string?\n\n\n      Object.assign(this, schema); // add schema-derived initialize and validate methods\n\n      Object.defineProperties(this, {\n        initialize: {\n          enumerable: false,\n          writeable: false,\n          value: Initializer.compile(schema)\n        },\n        validate: {\n          enumerable: false,\n          writeable: false,\n          value: Validator.compile(schema)\n        }\n      });\n    }\n    /**\n     * Extend\n     *\n     * @description\n     * ...\n     * Dear future,\n     *\n     * This function was meticulously plagiarized from some curious amalgam of\n     * stackoverflow posts whilst dozing off at my keyboard, too deprived of REM-\n     * sleep to recurse unassisted. If it sucks, you have only yourself to blame.\n     *\n     * Goodnight.\n     *\n     * @param {Object} schema\n     * @returns {JSONSchema}\n     */\n\n\n    _createClass(JSONSchema, [{\n      key: 'extend',\n      value: function extend(schema) {\n        function isObject(data) {\n          return data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data !== null && !Array.isArray(data);\n        }\n\n        function extender(target, source) {\n          var result = Object.assign({}, target);\n\n          if (isObject(target) && isObject(source)) {\n            Object.keys(source).forEach(function (key) {\n              if (isObject(source[key])) {\n                if (!(key in target)) {\n                  Object.assign(result, _defineProperty({}, key, source[key]));\n                } else {\n                  result[key] = extender(target[key], source[key]);\n                }\n              } else {\n                Object.assign(result, _defineProperty({}, key, source[key]));\n              }\n            });\n          }\n\n          return result;\n        }\n\n        var descriptor = extender(this, schema);\n        return new JSONSchema(descriptor);\n      }\n    }]);\n\n    return JSONSchema;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = JSONSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Module dependencies\n   * @ignore\n   */\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var formats = __webpack_require__(29);\n  /**\n   * For variable iterator counter\n   *\n   * @type {number}\n   */\n\n\n  var indexCount = 0;\n  /**\n   * Validator\n   *\n   * Compile an object describing a JSON Schema into a validation function.\n   */\n\n  var Validator = function () {\n    _createClass(Validator, null, [{\n      key: 'compile',\n\n      /**\n       * Compile (static)\n       *\n       * @description\n       * Compile an object describing a JSON Schema into a validation function.\n       *\n       * @param {Object} schema\n       * @returns {Function}\n       */\n      value: function compile(schema) {\n        var validator = new Validator(schema);\n        var body = '\\n      // \"cursor\"\\n      let value = data\\n      let container\\n      let stack = []\\n      let top = -1\\n\\n      // error state\\n      let valid = true\\n      let errors = []\\n\\n      // complex schema state\\n      let initialValidity\\n      let anyValid\\n      let notValid\\n      let countOfValid\\n      let initialErrorCount\\n      let accumulatedErrorCount\\n\\n      // validation code\\n      ' + validator.compile() + '\\n\\n      // validation result\\n      return {\\n        valid,\\n        errors\\n      }\\n    ';\n        return new Function('data', body);\n      }\n      /**\n       * Return current iterator index counter and increase value\n       *\n       * @returns {number}\n       */\n\n    }, {\n      key: 'counter',\n      get: function get() {\n        return indexCount++;\n      }\n      /**\n       * Constructor\n       *\n       * @param {Object} schema - object representation of a schema\n       * @param {string} options - compilation options\n       */\n\n    }]);\n\n    function Validator(schema) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Validator); // assign schema to this\n\n\n      this.schema = schema; // assign all options to this\n\n      Object.assign(this, options); // ensure address is defined\n\n      if (!this.address) {\n        this.address = '';\n      } // ensure require is boolean\n\n\n      if (this.require !== true) {\n        this.require = false;\n      }\n    }\n    /**\n     * Compile\n     *\n     * @description\n     * The instance compile method is \"dumb\". It only sequences invocation of\n     * more specific compilation methods. It generates code to\n     *\n     *  - read a value from input\n     *  - validate type(s) of input\n     *  - validate constraints described by various schema keywords\n     *\n     * Conditional logic related to code generation is pushed downsteam to\n     * type-specific methods.\n     */\n\n\n    _createClass(Validator, [{\n      key: 'compile',\n      value: function compile() {\n        var block = '';\n\n        if (this.require) {\n          block += this.required();\n        } // type validation\n\n\n        block += this.type(); // type specific validation generators\n        // null and boolean are covered by this.type()\n        // integer should be covered by number and this.type()\n\n        block += this.array();\n        block += this.number();\n        block += this.object();\n        block += this.string(); // non-type-specific validation generators\n\n        block += this.enum();\n        block += this.anyOf();\n        block += this.allOf();\n        block += this.not();\n        block += this.oneOf();\n        return block;\n      }\n      /**\n       * push\n       */\n\n    }, {\n      key: 'push',\n      value: function push() {\n        return '\\n      stack.push(value)\\n      container = value\\n      top++\\n    ';\n      }\n      /**\n       * pop\n       */\n\n    }, {\n      key: 'pop',\n      value: function pop() {\n        return '\\n      if (stack.length > 1) {\\n        top--\\n        stack.pop()\\n      }\\n\\n      value = container = stack[top]\\n    ';\n      }\n      /**\n       * type\n       *\n       * @description\n       * > An instance matches successfully if its primitive type is one of the\n       * > types defined by keyword. Recall: \"number\" includes \"integer\".\n       * > JSON Schema Validation Section 5.5.2\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'type',\n      value: function type() {\n        var type = this.schema.type,\n            address = this.address;\n        var block = '';\n\n        if (type) {\n          var types = Array.isArray(type) ? type : [type];\n          var conditions = types.map(function (type) {\n            // TODO: can we make a mapping object for this to clean it up?\n            if (type === 'array') return '!Array.isArray(value)';\n            if (type === 'boolean') return 'typeof value !== \\'boolean\\'';\n            if (type === 'integer') return '!Number.isInteger(value)';\n            if (type === 'null') return 'value !== null';\n            if (type === 'number') return 'typeof value !== \\'number\\'';\n            if (type === 'object') return '(typeof value !== \\'object\\' || Array.isArray(value) || value === null)';\n            if (type === 'string') return 'typeof value !== \\'string\\'';\n          }).join(' && ');\n          block += '\\n      // ' + address + ' type checking\\n      if (value !== undefined && ' + conditions + ') {\\n        valid = false\\n        errors.push({\\n          keyword: \\'type\\',\\n          message: \\'invalid type\\'\\n        })\\n      }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * Type-specific validations\n       *\n       * Type checking is optional in JSON Schema, and a schema can allow\n       * multiple types. Generated code needs to apply type-specific validations\n       * only to appropriate values, and ignore everything else. Type validation\n       * itself is handled separately from other validation keywords.\n       *\n       * The methods `array`, `number`, `object`, `string` generate type-specific\n       * validation code blocks, wrapped in a conditional such that they will\n       * only be applied to values of that type.\n       *\n       * For example, the `number` method, given the schema\n       *\n       *     { minimum: 3 }\n       *\n       * will generate\n       *\n       *     if (typeof value === 'number') {\n       *       if (value < 3) {\n       *         valid = false\n       *         errors.push({ message: '...' })\n       *       }\n       *     }\n       *\n       * Integer values are also numbers, and are validated the same as numbers\n       * other than the type validation itself. Therefore no `integer` method is\n       * needed.\n       */\n\n      /**\n       * array\n       *\n       * @description\n       * Invoke methods for array-specific keywords and wrap resulting code in\n       * type-checking conditional so that any resulting validations are only\n       * applied to array values.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'array',\n      value: function array() {\n        var keywords = ['additionalItems', 'items', 'minItems', 'maxItems', 'uniqueItems'];\n        var validations = this.validations(keywords);\n        var block = '';\n\n        if (validations.length > 0) {\n          block += '\\n      /**\\n       * Array validations\\n       */\\n      if (Array.isArray(value)) {\\n      ' + validations + '\\n      }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * number\n       *\n       * @description\n       * Invoke methods for number-specific keywords and wrap resulting code in\n       * type-checking conditional so that any resulting validations are only\n       * applied to number values.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'number',\n      value: function number() {\n        var keywords = ['minimum', 'maximum', 'multipleOf'];\n        var validations = this.validations(keywords);\n        var block = '';\n\n        if (validations.length > 0) {\n          block += '\\n      /**\\n       * Number validations\\n       */\\n      if (typeof value === \\'number\\') {\\n      ' + validations + '\\n      }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * object\n       *\n       * @description\n       * Invoke methods for object-specific keywords and wrap resulting code in\n       * type-checking conditional so that any resulting validations are only\n       * applied to object values.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'object',\n      value: function object() {\n        var keywords = ['maxProperties', 'minProperties', 'additionalProperties', 'properties', 'patternProperties', 'dependencies', 'schemaDependencies', 'propertyDependencies'];\n        var validations = this.validations(keywords);\n        var block = '';\n\n        if (validations.length > 0) {\n          block += '\\n      /**\\n       * Object validations\\n       */\\n      if (typeof value === \\'object\\' && value !== null && !Array.isArray(value)) {\\n      ' + validations + '\\n      }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * string\n       *\n       * @description\n       * Invoke methods for string-specific keywords and wrap resulting code in\n       * type-checking conditional so that any resulting validations are only\n       * applied to string values.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'string',\n      value: function string() {\n        var keywords = ['maxLength', 'minLength', 'pattern', 'format'];\n        var validations = this.validations(keywords);\n        var block = '';\n\n        if (validations.length > 0) {\n          block += '\\n      /**\\n       * String validations\\n       */\\n      if (typeof value === \\'string\\') {\\n      ' + validations + '\\n      }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * validations\n       *\n       * @description\n       * Iterate over an array of keywords and invoke code generator methods\n       * for each. Concatenate the results together and return. Used by \"type\"\n       * methods such as this.array() and this.string()\n       *\n       * @param {Array} keywords\n       * @returns {string}\n       */\n\n    }, {\n      key: 'validations',\n      value: function validations(keywords) {\n        var _this = this;\n\n        var schema = this.schema;\n        var block = '';\n        var constraints = Object.keys(schema).filter(function (key) {\n          return keywords.indexOf(key) !== -1;\n        });\n        constraints.forEach(function (keyword) {\n          block += _this[keyword]();\n        });\n        return block;\n      }\n      /**\n       * enum\n       *\n       * @description\n       * > An instance validates successfully against this keyword if its value\n       * > is equal to one of the elements in this keyword's array value.\n       * > JSON Schema Validation Section 5.5.1\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'enum',\n      value: function _enum() {\n        var enumerated = this.schema.enum,\n            address = this.address;\n        var conditions = ['value !== undefined'];\n        var block = '';\n\n        if (enumerated) {\n          enumerated.forEach(function (value) {\n            switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n              case 'boolean':\n                conditions.push('value !== ' + value);\n                break;\n\n              case 'number':\n                conditions.push('value !== ' + value);\n                break;\n\n              case 'string':\n                conditions.push('value !== \"' + value + '\"');\n                break;\n\n              case 'object':\n                if (value === null) {\n                  conditions.push('value !== null');\n                } else {\n                  conditions.push('\\'' + JSON.stringify(value) + '\\' !== JSON.stringify(value)');\n                }\n\n                break;\n\n              default:\n                throw new Error('Things are not well in the land of enum');\n            }\n          });\n          block += '\\n      /**\\n       * Validate \"' + address + '\" enum\\n       */\\n      if (' + conditions.join(' && ') + ') {\\n        valid = false\\n        errors.push({\\n          keyword: \\'enum\\',\\n          message: JSON.stringify(value) + \\' is not an enumerated value\\'\\n        })\\n      }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * anyOf\n       *\n       * @description\n       * > An instance validates successfully against this keyword if it\n       * > validates successfully against at least one schema defined by this\n       * > keyword's value.\n       * > JSON Schema Validation Section 5.5.4\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'anyOf',\n      value: function anyOf() {\n        var anyOf = this.schema.anyOf,\n            address = this.address;\n        var block = '';\n\n        if (Array.isArray(anyOf)) {\n          block += '\\n        initialValidity = valid\\n        initialErrorCount = errors.length\\n        anyValid = false\\n      ';\n          anyOf.forEach(function (subschema) {\n            var validator = new Validator(subschema, {\n              address: address\n            });\n            block += '\\n        accumulatedErrorCount = errors.length\\n        ' + validator.compile() + '\\n        if (accumulatedErrorCount === errors.length) {\\n          anyValid = true\\n        }\\n        ';\n          });\n          block += '\\n          if (anyValid === true) {\\n            valid = initialValidity\\n            errors = errors.slice(0, initialErrorCount)\\n          }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * allOf\n       *\n       * @description\n       * > An instance validates successfully against this keyword if it\n       * > validates successfully against all schemas defined by this keyword's\n       * > value.\n       * > JSON Schema Validation Section 5.5.3\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'allOf',\n      value: function allOf() {\n        var allOf = this.schema.allOf,\n            address = this.address;\n        var block = '';\n\n        if (Array.isArray(allOf)) {\n          allOf.forEach(function (subschema) {\n            var validator = new Validator(subschema, {\n              address: address\n            });\n            block += '\\n        ' + validator.compile() + '\\n        ';\n          });\n        }\n\n        return block;\n      }\n      /**\n       * oneOf\n       *\n       * @description\n       * > An instance validates successfully against this keyword if it\n       * > validates successfully against exactly one schema defined by this\n       * > keyword's value.\n       * > JSON Schema Validation Section 5.5.5\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'oneOf',\n      value: function oneOf() {\n        var oneOf = this.schema.oneOf,\n            address = this.address;\n        var block = '';\n\n        if (Array.isArray(oneOf)) {\n          block += '\\n        /**\\n         * Validate ' + address + ' oneOf\\n         */\\n        initialValidity = valid\\n        initialErrorCount = errors.length\\n        countOfValid = 0\\n      ';\n          oneOf.forEach(function (subschema) {\n            var validator = new Validator(subschema, {\n              address: address\n            });\n            block += '\\n        accumulatedErrorCount = errors.length\\n        ' + validator.compile() + '\\n        if (accumulatedErrorCount === errors.length) {\\n          countOfValid += 1\\n        }\\n        ';\n          });\n          block += '\\n          if (countOfValid === 1) {\\n            valid = initialValidity\\n            errors = errors.slice(0, initialErrorCount)\\n          } else {\\n            valid = false\\n            errors.push({\\n              keyword: \\'oneOf\\',\\n              message: \\'what is a reasonable error message for this case?\\'\\n            })\\n          }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * not\n       *\n       * @description\n       * > An instance is valid against this keyword if it fails to validate\n       * > successfully against the schema defined by this keyword.\n       * > JSON Schema Validation Section 5.5.6\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'not',\n      value: function not() {\n        var not = this.schema.not,\n            address = this.address;\n        var block = '';\n\n        if ((typeof not === 'undefined' ? 'undefined' : _typeof(not)) === 'object' && not !== null && !Array.isArray(not)) {\n          var subschema = not;\n          var validator = new Validator(subschema, {\n            address: address\n          });\n          block += '\\n        /**\\n         * NOT\\n         */\\n        if (value !== undefined) {\\n          initialValidity = valid\\n          initialErrorCount = errors.length\\n          notValid = true\\n\\n          accumulatedErrorCount = errors.length\\n\\n          ' + validator.compile() + '\\n\\n          if (accumulatedErrorCount === errors.length) {\\n            notValid = false\\n          }\\n\\n          if (notValid === true) {\\n            valid = initialValidity\\n            errors = errors.slice(0, initialErrorCount)\\n          } else {\\n            valid = false\\n            errors = errors.slice(0, initialErrorCount)\\n            errors.push({\\n              keyword: \\'not\\',\\n              message: \\'hmm...\\'\\n            })\\n          }\\n        }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * properties\n       *\n       * @description\n       * Iterate over the `properties` schema property if it is an object. For each\n       * key, initialize a new Validator for the subschema represented by the property\n       * value and invoke compile. Append the result of compiling each subschema to\n       * the block of code being generated.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'properties',\n      value: function properties() {\n        var schema = this.schema,\n            address = this.address;\n        var properties = schema.properties,\n            required = schema.required;\n        var block = this.push(); // ensure the value of \"required\" schema property is an array\n\n        required = Array.isArray(required) ? required : [];\n\n        if ((typeof properties === 'undefined' ? 'undefined' : _typeof(properties)) === 'object') {\n          Object.keys(properties).forEach(function (key) {\n            var subschema = properties[key];\n            var isRequired = required.indexOf(key) !== -1; // TODO\n            // how should we be calculating these things? should be json pointer?\n            // needs a separate function\n\n            var pointer = [address, key].filter(function (segment) {\n              return !!segment;\n            }).join('.');\n            var validation = new Validator(subschema, {\n              address: pointer,\n              require: isRequired\n            }); // read the value\n\n            block += '\\n        value = container[\\'' + key + '\\']\\n        ';\n            block += validation.compile();\n          });\n        }\n\n        block += this.pop();\n        return block;\n      }\n      /**\n       * Other Properties\n       *\n       * @description\n       * This method is not for a keyword. It wraps validations for\n       * patternProperties and additionalProperties in a single iteration over\n       * an object-type value's properties.\n       *\n       * It should only be invoked once for a given subschema.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'otherProperties',\n      value: function otherProperties() {\n        return '\\n      /**\\n       * Validate Other Properties\\n       */\\n      ' + this.push() + '\\n\\n      for (let key in container) {\\n        value = container[key]\\n        matched = false\\n\\n        ' + this.patternValidations() + '\\n        ' + this.additionalValidations() + '\\n      }\\n\\n      ' + this.pop() + '\\n    ';\n      }\n      /**\n       * Pattern Validations\n       *\n       * @description\n       * Generate validation code from a subschema for properties matching a\n       * regular expression.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'patternValidations',\n      value: function patternValidations() {\n        var patternProperties = this.schema.patternProperties;\n        var block = '';\n\n        if ((typeof patternProperties === 'undefined' ? 'undefined' : _typeof(patternProperties)) === 'object') {\n          Object.keys(patternProperties).forEach(function (pattern) {\n            var subschema = patternProperties[pattern];\n            var validator = new Validator(subschema);\n            block += '\\n          if (key.match(\\'' + pattern + '\\')) {\\n            matched = true\\n            ' + validator.compile() + '\\n          }\\n        ';\n          });\n        }\n\n        return block;\n      }\n      /**\n       * Additional Validations\n       *\n       * @description\n       * Generate validation code, either from a subschema for properties not\n       * defined in the schema, or to disallow properties not defined in the\n       * schema.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'additionalValidations',\n      value: function additionalValidations() {\n        var _schema = this.schema,\n            properties = _schema.properties,\n            additionalProperties = _schema.additionalProperties,\n            address = this.address;\n        var validations = '';\n        var block = ''; // catch additional unmatched properties\n\n        var conditions = ['matched !== true']; // ignore defined properties\n\n        Object.keys(properties || {}).forEach(function (key) {\n          conditions.push('key !== \\'' + key + '\\'');\n        }); // validate additional properties\n\n        if ((typeof additionalProperties === 'undefined' ? 'undefined' : _typeof(additionalProperties)) === 'object') {\n          var subschema = additionalProperties;\n          var validator = new Validator(subschema, {\n            address: address + '[APKey]'\n          });\n          block += '\\n        // validate additional properties\\n        if (' + conditions.join(' && ') + ') {\\n          ' + validator.compile() + '\\n        }\\n      ';\n        } // error for additional properties\n\n\n        if (additionalProperties === false) {\n          block += '\\n        // validate non-presence of additional properties\\n        if (' + conditions.join(' && ') + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'additionalProperties\\',\\n            message: key + \\' is not a defined property\\'\\n          })\\n        }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * patternProperties\n       *\n       * @description\n       * Generate validation code for properties matching a pattern\n       * defined by the property name (key), which must be a string\n       * representing a valid regular expression.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'patternProperties',\n      value: function patternProperties() {\n        var block = '';\n\n        if (!this.otherPropertiesCalled) {\n          this.otherPropertiesCalled = true;\n          block += this.otherProperties();\n        }\n\n        return block;\n      }\n      /**\n       * additionalProperties\n       *\n       * @description\n       * Generate validation code for additional properties not defined\n       * in the schema, or disallow additional properties if the value of\n       * `additionalProperties` in the schema is `false`.\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'additionalProperties',\n      value: function additionalProperties() {\n        var block = '';\n\n        if (!this.otherPropertiesCalled) {\n          this.otherPropertiesCalled = true;\n          block += this.otherProperties();\n        }\n\n        return block;\n      }\n      /**\n       * minProperties\n       *\n       * @description\n       * > An object instance is valid against \"minProperties\" if its number of\n       * > properties is greater than, or equal to, the value of this keyword.\n       * > JSON Schema Validation Section 5.4.2\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'minProperties',\n      value: function minProperties() {\n        var minProperties = this.schema.minProperties,\n            address = this.address;\n        return '\\n        // ' + address + ' min properties\\n        if (Object.keys(value).length < ' + minProperties + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minProperties\\',\\n            message: \\'too few properties\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * maxProperties\n       *\n       * @description\n       * > An object instance is valid against \"maxProperties\" if its number of\n       * > properties is less than, or equal to, the value of this keyword.\n       * > JSON Schema Validation Section 5.4.1\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'maxProperties',\n      value: function maxProperties() {\n        var maxProperties = this.schema.maxProperties,\n            address = this.address;\n        return '\\n        // ' + address + ' max properties\\n        if (Object.keys(value).length > ' + maxProperties + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maxProperties\\',\\n            message: \\'too many properties\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * Dependencies\n       *\n       * @description\n       * > For all (name, schema) pair of schema dependencies, if the instance has\n       * > a property by this name, then it must also validate successfully against\n       * > the schema.\n       * >\n       * > Note that this is the instance itself which must validate successfully,\n       * > not the value associated with the property name.\n       * >\n       * > For each (name, propertyset) pair of property dependencies, if the\n       * > instance has a property by this name, then it must also have properties\n       * > with the same names as propertyset.\n       * > JSON Schema Validation Section 5.4.5.2\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'dependencies',\n      value: function dependencies() {\n        var dependencies = this.schema.dependencies,\n            address = this.address;\n        var block = this.push();\n\n        if ((typeof dependencies === 'undefined' ? 'undefined' : _typeof(dependencies)) === 'object') {\n          Object.keys(dependencies).forEach(function (key) {\n            var dependency = dependencies[key];\n            var conditions = [];\n\n            if (Array.isArray(dependency)) {\n              dependency.forEach(function (item) {\n                conditions.push('container[\\'' + item + '\\'] === undefined');\n              });\n              block += '\\n            if (container[\\'' + key + '\\'] !== undefined && (' + conditions.join(' || ') + ')) {\\n              valid = false\\n              errors.push({\\n                keyword: \\'dependencies\\',\\n                message: \\'unmet dependencies\\'\\n              })\\n            }\\n          ';\n            } else if ((typeof dependency === 'undefined' ? 'undefined' : _typeof(dependency)) === 'object') {\n              var subschema = dependency;\n              var validator = new Validator(subschema, {\n                address: address\n              });\n              block += '\\n            if (container[\\'' + key + '\\'] !== undefined) {\\n              ' + validator.compile() + '\\n            }\\n          ';\n            }\n          });\n        }\n\n        block += this.pop();\n        return block;\n      }\n      /**\n       * Required\n       *\n       * @description\n       * > An object instance is valid against this keyword if its property set\n       * > contains all elements in this keyword's array value.\n       * > JSON Schema Validation Section 5.4.3\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'required',\n      value: function required() {\n        var properties = this.schema.properties,\n            address = this.address;\n        var block = '';\n        block += '\\n      // validate ' + address + ' presence\\n      if (value === undefined) {\\n        valid = false\\n        errors.push({\\n          keyword: \\'required\\',\\n          message: \\'is required\\'\\n        })\\n      }\\n    ';\n        return block;\n      }\n      /**\n       * additionalItems\n       *\n       * @description\n       * > Successful validation of an array instance with regards to these two\n       * > keywords is determined as follows: if \"items\" is not present, or its\n       * > value is an object, validation of the instance always succeeds,\n       * > regardless of the value of \"additionalItems\"; if the value of\n       * > \"additionalItems\" is boolean value true or an object, validation of\n       * > the instance always succeeds; if the value of \"additionalItems\" is\n       * > boolean value false and the value of \"items\" is an array, the\n       * > instance is valid if its size is less than, or equal to, the size\n       * > of \"items\".\n       * > JSON Schema Validation Section 5.3.1\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'additionalItems',\n      value: function additionalItems() {\n        var _schema2 = this.schema,\n            items = _schema2.items,\n            additionalItems = _schema2.additionalItems,\n            address = this.address;\n        var block = '';\n\n        if (additionalItems === false && Array.isArray(items)) {\n          block += '\\n        // don\\'t allow additional items\\n        if (value.length > ' + items.length + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'additionalItems\\',\\n            message: \\'additional items not allowed\\'\\n          })\\n        }\\n      ';\n        }\n\n        if ((typeof additionalItems === 'undefined' ? 'undefined' : _typeof(additionalItems)) === 'object' && additionalItems !== null && Array.isArray(items)) {\n          var subschema = additionalItems;\n          var validator = new Validator(subschema);\n          var counter = Validator.counter;\n          block += '\\n        // additional items\\n        ' + this.push() + '\\n\\n        for (var i' + counter + ' = ' + items.length + '; i' + counter + ' <= container.length; i' + counter + '++) {\\n          value = container[i' + counter + ']\\n          ' + validator.compile() + '\\n        }\\n\\n        ' + this.pop() + '\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * Items\n       *\n       * @description\n       * > Successful validation of an array instance with regards to these two\n       * > keywords is determined as follows: if \"items\" is not present, or its\n       * > value is an object, validation of the instance always succeeds,\n       * > regardless of the value of \"additionalItems\"; if the value of\n       * > \"additionalItems\" is boolean value true or an object, validation of\n       * > the instance always succeeds; if the value of \"additionalItems\" is\n       * > boolean value false and the value of \"items\" is an array, the\n       * > instance is valid if its size is less than, or equal to, the size\n       * > of \"items\".\n       * > JSON Schema Validation Section 5.3.1\n       *\n       * Code to generate\n       *\n       *     // this outer conditional is generated by this.array()\n       *     if (Array.isArray(value) {\n       *       let parent = value\n       *       for (let i = 0; i < parent.length; i++) {\n       *         value = parent[i]\n       *         // other validation code depending on value here\n       *       }\n       *       value = parent\n       *     }\n       *\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'items',\n      value: function items() {\n        var items = this.schema.items,\n            address = this.address;\n        var block = ''; // if items is an array\n\n        if (Array.isArray(items)) {\n          block += this.push();\n          items.forEach(function (item, index) {\n            var subschema = item;\n            var validator = new Validator(subschema, {\n              address: address + '[' + index + ']'\n            });\n            block += '\\n          // item #' + index + '\\n          value = container[' + index + ']\\n          ' + validator.compile() + '\\n        ';\n          });\n          block += this.pop(); // if items is an object\n        } else if ((typeof items === 'undefined' ? 'undefined' : _typeof(items)) === 'object' && items !== null) {\n          var subschema = items;\n          var validator = new Validator(subschema);\n          var counter = Validator.counter;\n          block += '\\n        // items\\n        ' + this.push() + '\\n\\n        for (var i' + counter + ' = 0; i' + counter + ' < container.length; i' + counter + '++) {\\n          // read array element\\n          value = container[i' + counter + ']\\n          ' + validator.compile() + '\\n        }\\n\\n        ' + this.pop() + '\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * minItems\n       *\n       * @description\n       * > An array instance is valid against \"minItems\" if its size is greater\n       * > than, or equal to, the value of this keyword.\n       * > JSON Schema Validation Section 5.3.3\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'minItems',\n      value: function minItems() {\n        var minItems = this.schema.minItems,\n            address = this.address;\n        return '\\n        // ' + address + ' min items\\n        if (value.length < ' + minItems + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minItems\\',\\n            message: \\'too few properties\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * maxItems\n       *\n       * @description\n       * > An array instance is valid against \"maxItems\" if its size is less\n       * > than, or equal to, the value of this keyword.\n       * > JSON Schema Validation Section 5.3.2\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'maxItems',\n      value: function maxItems() {\n        var maxItems = this.schema.maxItems,\n            address = this.address;\n        return '\\n        // ' + address + ' max items\\n        if (value.length > ' + maxItems + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maxItems\\',\\n            message: \\'too many properties\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * uniqueItems\n       *\n       * @description\n       * > If this keyword has boolean value false, the instance validates\n       * > successfully. If it has boolean value true, the instance validates\n       * > successfully if all of its elements are unique.\n       * > JSON Schema Validation Section 5.3.4\n       *\n       * TODO\n       * optimize\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'uniqueItems',\n      value: function uniqueItems() {\n        var uniqueItems = this.schema.uniqueItems,\n            address = this.address;\n        var block = '';\n\n        if (uniqueItems === true) {\n          block += '\\n        // validate ' + address + ' unique items\\n        let values = value.map(v => JSON.stringify(v)) // TODO: optimize\\n        let set = new Set(values)\\n        if (values.length !== set.size) {\\n          valid = false\\n          errors.push({\\n            keyword: \\'uniqueItems\\',\\n            message: \\'items must be unique\\'\\n          })\\n        }\\n      ';\n        }\n\n        return block;\n      }\n      /**\n       * minLength\n       *\n       * @description\n       * > A string instance is valid against this keyword if its length is\n       * > greater than, or equal to, the value of this keyword. The length of\n       * > a string instance is defined as the number of its characters as\n       * > defined by RFC 4627 [RFC4627].\n       * > JSON Schema Validation Section 5.2.2\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'minLength',\n      value: function minLength() {\n        var minLength = this.schema.minLength,\n            address = this.address;\n        return '\\n        // ' + address + ' validate minLength\\n        if (Array.from(value).length < ' + minLength + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minLength\\',\\n            message: \\'too short\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * maxLength\n       *\n       * @description\n       * > A string instance is valid against this keyword if its length is less\n       * > than, or equal to, the value of this keyword. The length of a string\n       * > instance is defined as the number of its characters as defined by\n       * > RFC 4627 [RFC4627].\n       * > JSON Schema Validation Section 5.2.1\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'maxLength',\n      value: function maxLength() {\n        var maxLength = this.schema.maxLength,\n            address = this.address;\n        return '\\n        // ' + address + ' validate maxLength\\n        if (Array.from(value).length > ' + maxLength + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maxLength\\',\\n            message: \\'too long\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * Pattern\n       *\n       * @description\n       * > A string instance is considered valid if the regular expression\n       * > matches the instance successfully.\n       * > JSON Schema Validation Section 5.2.3\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'pattern',\n      value: function pattern() {\n        var pattern = this.schema.pattern,\n            address = this.address;\n\n        if (pattern) {\n          return '\\n          // ' + address + ' validate pattern\\n          if (!value.match(new RegExp(\\'' + pattern + '\\'))) {\\n            valid = false\\n            errors.push({\\n              keyword: \\'pattern\\',\\n              message: \\'does not match the required pattern\\'\\n            })\\n          }\\n      ';\n        }\n      }\n      /**\n       * Format\n       *\n       * @description\n       * > Structural validation alone may be insufficient to validate that\n       * > an instance meets all the requirements of an application. The\n       * > \"format\" keyword is defined to allow interoperable semantic\n       * > validation for a fixed subset of values which are accurately\n       * > described by authoritative resources, be they RFCs or other\n       * > external specifications.\n       * > JSON Schema Validation Section 7.1\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'format',\n      value: function format() {\n        var format = this.schema.format,\n            address = this.address;\n        var matcher = formats.resolve(format);\n\n        if (matcher) {\n          return '\\n      // ' + address + ' validate format\\n      if (!value.match(' + matcher + ')) {\\n        valid = false\\n        errors.push({\\n          keyword: \\'format\\',\\n          message: \\'is not \"' + format + '\" format\\'\\n        })\\n      }\\n      ';\n        }\n      }\n      /**\n       * Minimum\n       *\n       * @description\n       * > Successful validation depends on the presence and value of\n       * > \"exclusiveMinimum\": if \"exclusiveMinimum\" is not present, or has\n       * > boolean value false, then the instance is valid if it is greater\n       * > than, or equal to, the value of \"minimum\"; if \"exclusiveMinimum\" is\n       * > present and has boolean value true, the instance is valid if it is\n       * > strictly greater than the value of \"minimum\".\n       * > JSON Schema Validation Section 5.1.3\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'minimum',\n      value: function minimum() {\n        var _schema3 = this.schema,\n            minimum = _schema3.minimum,\n            exclusiveMinimum = _schema3.exclusiveMinimum,\n            address = this.address;\n        var operator = exclusiveMinimum === true ? '<=' : '<';\n        return '\\n        // ' + address + ' validate minimum\\n        if (value ' + operator + ' ' + minimum + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minimum\\',\\n            message: \\'too small\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * Maximum\n       *\n       * @description\n       * > Successful validation depends on the presence and value of\n       * > \"exclusiveMaximum\": if \"exclusiveMaximum\" is not present, or has\n       * > boolean value false, then the instance is valid if it is lower than,\n       * > or equal to, the value of \"maximum\"; if \"exclusiveMaximum\" has\n       * > boolean value true, the instance is valid if it is strictly lower\n       * > than the value of \"maximum\".\n       * > JSON Schema Validation Section 5.1.2\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'maximum',\n      value: function maximum() {\n        var _schema4 = this.schema,\n            maximum = _schema4.maximum,\n            exclusiveMaximum = _schema4.exclusiveMaximum,\n            address = this.address;\n        var operator = exclusiveMaximum === true ? '>=' : '>';\n        return '\\n        // ' + address + ' validate maximum\\n        if (value ' + operator + ' ' + maximum + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maximum\\',\\n            message: \\'too large\\'\\n          })\\n        }\\n    ';\n      }\n      /**\n       * multipleOf\n       *\n       * @description\n       * > A numeric instance is valid against \"multipleOf\" if the result of\n       * > the division of the instance by this keyword's value is an integer.\n       * > JSON Schema Validation Section 5.1.1\n       *\n       * @returns {string}\n       */\n\n    }, {\n      key: 'multipleOf',\n      value: function multipleOf() {\n        var multipleOf = this.schema.multipleOf;\n        var block = '';\n\n        if (typeof multipleOf === 'number') {\n          var length = multipleOf.toString().length;\n          var decimals = length - multipleOf.toFixed(0).length - 1;\n          var pow = decimals > 0 ? Math.pow(10, decimals) : 1;\n          var condition = void 0;\n\n          if (decimals > 0) {\n            condition = '(value * ' + pow + ') % ' + multipleOf * pow + ' !== 0';\n          } else {\n            condition = 'value % ' + multipleOf + ' !== 0';\n          }\n\n          block += '\\n        if (' + condition + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'multipleOf\\',\\n            message: \\'must be a multiple of ' + multipleOf + '\\'\\n          })\\n        }\\n      ';\n        }\n\n        return block;\n      }\n    }]);\n\n    return Validator;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = Validator;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * @module JSON Object Signing and Encryption (JOSE)\n   */\n\n  var JWA = __webpack_require__(38);\n\n  var JWK = __webpack_require__(57);\n\n  var JWKSet = __webpack_require__(60);\n\n  var JWT = __webpack_require__(62);\n\n  var JWS = __webpack_require__(67);\n\n  var Base64URLSchema = __webpack_require__(64);\n\n  var JOSEHeaderSchema = __webpack_require__(66);\n\n  var JWKSchema = __webpack_require__(58);\n\n  var JWKSetSchema = __webpack_require__(61);\n\n  var JWTClaimsSetSchema = __webpack_require__(65);\n\n  var JWTSchema = __webpack_require__(63);\n  /**\n   * Export\n   */\n\n\n  module.exports = {\n    JWA: JWA,\n    JWK: JWK,\n    JWKSet: JWKSet,\n    JWT: JWT,\n    JWS: JWS,\n    Base64URLSchema: Base64URLSchema,\n    JOSEHeaderSchema: JOSEHeaderSchema,\n    JWKSchema: JWKSchema,\n    JWKSetSchema: JWKSetSchema,\n    JWTClaimsSetSchema: JWTClaimsSetSchema,\n    JWTSchema: JWTSchema\n  };\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  /**\n   * Dependencies\n   *\n   * TODO\n   * - switch between Node.js webcrypto package and browser implementation\n   */\n\n\n  var base64url = __webpack_require__(39);\n\n  var supportedAlgorithms = __webpack_require__(46);\n\n  var _require = __webpack_require__(55),\n      NotSupportedError = _require.NotSupportedError;\n  /**\n   * JWA\n   * https://tools.ietf.org/html/rfc7518\n   */\n\n\n  var JWA = function () {\n    function JWA() {\n      _classCallCheck(this, JWA);\n    }\n\n    _createClass(JWA, null, [{\n      key: 'sign',\n\n      /**\n       * Sign\n       *\n       * @description\n       * Create a digital signature.\n       *\n       * @param {string} alg\n       * @param {CryptoKey} key\n       * @param {string|Buffer} data\n       *\n       * @return {Promise}\n       */\n      value: function sign(alg, key, data) {\n        // normalize the algorithm\n        var normalizedAlgorithm = supportedAlgorithms.normalize('sign', alg); // validate algorithm is supported\n\n        if (normalizedAlgorithm instanceof Error) {\n          return Promise.reject(new NotSupportedError(alg));\n        } // validate type of key\n        // TODO\n        //  - is the key suitable for the algorithm?\n        //  - does that get validated in webcrypto?\n        //if (key instanceof CryptoKey) {\n        //  return Promise.reject(new InvalidKeyError())\n        //}\n        // sign the data\n\n\n        return normalizedAlgorithm.sign(key, data);\n      }\n      /**\n       * Verify\n       *\n       * @description\n       * Verify a digital signature.\n       *\n       * @param {string} alg\n       * @param {CryptoKey} privateKey\n       * @param {string|Buffer} signature\n       * @param {string|Buffer} data\n       *\n       * @return {Promise}\n       */\n\n    }, {\n      key: 'verify',\n      value: function verify(alg, key, signature, data) {\n        var normalizedAlgorithm = supportedAlgorithms.normalize('verify', alg);\n\n        if (normalizedAlgorithm instanceof Error) {\n          return Promise.reject(new NotSupportedError(alg));\n        } // TODO\n        // validate publicKey\n        // verify the signature\n\n\n        return normalizedAlgorithm.verify(key, signature, data);\n      }\n      /**\n       * Encrypt\n       */\n\n      /**\n       * Decrypt\n       */\n\n      /**\n       * Import\n       */\n\n    }, {\n      key: 'importKey',\n      value: function importKey(key) {\n        var normalizedAlgorithm = supportedAlgorithms.normalize('importKey', key.alg);\n        return normalizedAlgorithm.importKey(key);\n      }\n    }]);\n\n    return JWA;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = JWA;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  module.exports = __webpack_require__(40).default;\n  module.exports.default = module.exports;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (Buffer) {\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    var pad_string_1 = __webpack_require__(45);\n\n    function encode(input, encoding) {\n      if (encoding === void 0) {\n        encoding = \"utf8\";\n      }\n\n      if (Buffer.isBuffer(input)) {\n        return fromBase64(input.toString(\"base64\"));\n      }\n\n      return fromBase64(Buffer.from(input, encoding).toString(\"base64\"));\n    }\n\n    ;\n\n    function decode(base64url, encoding) {\n      if (encoding === void 0) {\n        encoding = \"utf8\";\n      }\n\n      return Buffer.from(toBase64(base64url), \"base64\").toString(encoding);\n    }\n\n    function toBase64(base64url) {\n      base64url = base64url.toString();\n      return pad_string_1.default(base64url).replace(/\\-/g, \"+\").replace(/_/g, \"/\");\n    }\n\n    function fromBase64(base64) {\n      return base64.replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n    }\n\n    function toBuffer(base64url) {\n      return Buffer.from(toBase64(base64url), \"base64\");\n    }\n\n    var base64url = encode;\n    base64url.encode = encode;\n    base64url.decode = decode;\n    base64url.toBase64 = toBase64;\n    base64url.fromBase64 = fromBase64;\n    base64url.toBuffer = toBuffer;\n    exports.default = base64url;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(41).Buffer);\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (global) {\n    /*!\n    * The buffer module from node.js, for the browser.\n    *\n    * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n    * @license  MIT\n    */\n\n    /* eslint-disable no-proto */\n    var base64 = __webpack_require__(42);\n\n    var ieee754 = __webpack_require__(43);\n\n    var isArray = __webpack_require__(44);\n\n    exports.Buffer = Buffer;\n    exports.SlowBuffer = SlowBuffer;\n    exports.INSPECT_MAX_BYTES = 50;\n    /**\n     * If `Buffer.TYPED_ARRAY_SUPPORT`:\n     *   === true    Use Uint8Array implementation (fastest)\n     *   === false   Use Object implementation (most compatible, even IE6)\n     *\n     * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n     * Opera 11.6+, iOS 4.2+.\n     *\n     * Due to various browser bugs, sometimes the Object implementation will be used even\n     * when the browser supports typed arrays.\n     *\n     * Note:\n     *\n     *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n     *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n     *\n     *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n     *\n     *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n     *     incorrect length in some situations.\n    \n     * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n     * get the Object implementation, which is slower but behaves correctly.\n     */\n\n    Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n    /*\n     * Export kMaxLength after typed array support is determined.\n     */\n\n    exports.kMaxLength = kMaxLength();\n\n    function typedArraySupport() {\n      try {\n        var arr = new Uint8Array(1);\n        arr.__proto__ = {\n          __proto__: Uint8Array.prototype,\n          foo: function () {\n            return 42;\n          }\n        };\n        return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n      } catch (e) {\n        return false;\n      }\n    }\n\n    function kMaxLength() {\n      return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n    }\n\n    function createBuffer(that, length) {\n      if (kMaxLength() < length) {\n        throw new RangeError('Invalid typed array length');\n      }\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = new Uint8Array(length);\n        that.__proto__ = Buffer.prototype;\n      } else {\n        // Fallback: Return an object instance of the Buffer class\n        if (that === null) {\n          that = new Buffer(length);\n        }\n\n        that.length = length;\n      }\n\n      return that;\n    }\n    /**\n     * The Buffer constructor returns instances of `Uint8Array` that have their\n     * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n     * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n     * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n     * returns a single octet.\n     *\n     * The `Uint8Array` prototype remains unmodified.\n     */\n\n\n    function Buffer(arg, encodingOrOffset, length) {\n      if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n        return new Buffer(arg, encodingOrOffset, length);\n      } // Common case.\n\n\n      if (typeof arg === 'number') {\n        if (typeof encodingOrOffset === 'string') {\n          throw new Error('If encoding is specified then the first argument must be a string');\n        }\n\n        return allocUnsafe(this, arg);\n      }\n\n      return from(this, arg, encodingOrOffset, length);\n    }\n\n    Buffer.poolSize = 8192; // not used by this implementation\n    // TODO: Legacy, not needed anymore. Remove in next major version.\n\n    Buffer._augment = function (arr) {\n      arr.__proto__ = Buffer.prototype;\n      return arr;\n    };\n\n    function from(that, value, encodingOrOffset, length) {\n      if (typeof value === 'number') {\n        throw new TypeError('\"value\" argument must not be a number');\n      }\n\n      if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n        return fromArrayBuffer(that, value, encodingOrOffset, length);\n      }\n\n      if (typeof value === 'string') {\n        return fromString(that, value, encodingOrOffset);\n      }\n\n      return fromObject(that, value);\n    }\n    /**\n     * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n     * if value is a number.\n     * Buffer.from(str[, encoding])\n     * Buffer.from(array)\n     * Buffer.from(buffer)\n     * Buffer.from(arrayBuffer[, byteOffset[, length]])\n     **/\n\n\n    Buffer.from = function (value, encodingOrOffset, length) {\n      return from(null, value, encodingOrOffset, length);\n    };\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      Buffer.prototype.__proto__ = Uint8Array.prototype;\n      Buffer.__proto__ = Uint8Array;\n\n      if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n        // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n        Object.defineProperty(Buffer, Symbol.species, {\n          value: null,\n          configurable: true\n        });\n      }\n    }\n\n    function assertSize(size) {\n      if (typeof size !== 'number') {\n        throw new TypeError('\"size\" argument must be a number');\n      } else if (size < 0) {\n        throw new RangeError('\"size\" argument must not be negative');\n      }\n    }\n\n    function alloc(that, size, fill, encoding) {\n      assertSize(size);\n\n      if (size <= 0) {\n        return createBuffer(that, size);\n      }\n\n      if (fill !== undefined) {\n        // Only pay attention to encoding if it's a string. This\n        // prevents accidentally sending in a number that would\n        // be interpretted as a start offset.\n        return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n      }\n\n      return createBuffer(that, size);\n    }\n    /**\n     * Creates a new filled Buffer instance.\n     * alloc(size[, fill[, encoding]])\n     **/\n\n\n    Buffer.alloc = function (size, fill, encoding) {\n      return alloc(null, size, fill, encoding);\n    };\n\n    function allocUnsafe(that, size) {\n      assertSize(size);\n      that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n      if (!Buffer.TYPED_ARRAY_SUPPORT) {\n        for (var i = 0; i < size; ++i) {\n          that[i] = 0;\n        }\n      }\n\n      return that;\n    }\n    /**\n     * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n     * */\n\n\n    Buffer.allocUnsafe = function (size) {\n      return allocUnsafe(null, size);\n    };\n    /**\n     * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n     */\n\n\n    Buffer.allocUnsafeSlow = function (size) {\n      return allocUnsafe(null, size);\n    };\n\n    function fromString(that, string, encoding) {\n      if (typeof encoding !== 'string' || encoding === '') {\n        encoding = 'utf8';\n      }\n\n      if (!Buffer.isEncoding(encoding)) {\n        throw new TypeError('\"encoding\" must be a valid string encoding');\n      }\n\n      var length = byteLength(string, encoding) | 0;\n      that = createBuffer(that, length);\n      var actual = that.write(string, encoding);\n\n      if (actual !== length) {\n        // Writing a hex string, for example, that contains invalid characters will\n        // cause everything after the first invalid character to be ignored. (e.g.\n        // 'abxxcd' will be treated as 'ab')\n        that = that.slice(0, actual);\n      }\n\n      return that;\n    }\n\n    function fromArrayLike(that, array) {\n      var length = array.length < 0 ? 0 : checked(array.length) | 0;\n      that = createBuffer(that, length);\n\n      for (var i = 0; i < length; i += 1) {\n        that[i] = array[i] & 255;\n      }\n\n      return that;\n    }\n\n    function fromArrayBuffer(that, array, byteOffset, length) {\n      array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n      if (byteOffset < 0 || array.byteLength < byteOffset) {\n        throw new RangeError('\\'offset\\' is out of bounds');\n      }\n\n      if (array.byteLength < byteOffset + (length || 0)) {\n        throw new RangeError('\\'length\\' is out of bounds');\n      }\n\n      if (byteOffset === undefined && length === undefined) {\n        array = new Uint8Array(array);\n      } else if (length === undefined) {\n        array = new Uint8Array(array, byteOffset);\n      } else {\n        array = new Uint8Array(array, byteOffset, length);\n      }\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = array;\n        that.__proto__ = Buffer.prototype;\n      } else {\n        // Fallback: Return an object instance of the Buffer class\n        that = fromArrayLike(that, array);\n      }\n\n      return that;\n    }\n\n    function fromObject(that, obj) {\n      if (Buffer.isBuffer(obj)) {\n        var len = checked(obj.length) | 0;\n        that = createBuffer(that, len);\n\n        if (that.length === 0) {\n          return that;\n        }\n\n        obj.copy(that, 0, 0, len);\n        return that;\n      }\n\n      if (obj) {\n        if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n          if (typeof obj.length !== 'number' || isnan(obj.length)) {\n            return createBuffer(that, 0);\n          }\n\n          return fromArrayLike(that, obj);\n        }\n\n        if (obj.type === 'Buffer' && isArray(obj.data)) {\n          return fromArrayLike(that, obj.data);\n        }\n      }\n\n      throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n    }\n\n    function checked(length) {\n      // Note: cannot use `length < kMaxLength()` here because that fails when\n      // length is NaN (which is otherwise coerced to zero.)\n      if (length >= kMaxLength()) {\n        throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n      }\n\n      return length | 0;\n    }\n\n    function SlowBuffer(length) {\n      if (+length != length) {\n        // eslint-disable-line eqeqeq\n        length = 0;\n      }\n\n      return Buffer.alloc(+length);\n    }\n\n    Buffer.isBuffer = function isBuffer(b) {\n      return !!(b != null && b._isBuffer);\n    };\n\n    Buffer.compare = function compare(a, b) {\n      if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n        throw new TypeError('Arguments must be Buffers');\n      }\n\n      if (a === b) return 0;\n      var x = a.length;\n      var y = b.length;\n\n      for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n        if (a[i] !== b[i]) {\n          x = a[i];\n          y = b[i];\n          break;\n        }\n      }\n\n      if (x < y) return -1;\n      if (y < x) return 1;\n      return 0;\n    };\n\n    Buffer.isEncoding = function isEncoding(encoding) {\n      switch (String(encoding).toLowerCase()) {\n        case 'hex':\n        case 'utf8':\n        case 'utf-8':\n        case 'ascii':\n        case 'latin1':\n        case 'binary':\n        case 'base64':\n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n          return true;\n\n        default:\n          return false;\n      }\n    };\n\n    Buffer.concat = function concat(list, length) {\n      if (!isArray(list)) {\n        throw new TypeError('\"list\" argument must be an Array of Buffers');\n      }\n\n      if (list.length === 0) {\n        return Buffer.alloc(0);\n      }\n\n      var i;\n\n      if (length === undefined) {\n        length = 0;\n\n        for (i = 0; i < list.length; ++i) {\n          length += list[i].length;\n        }\n      }\n\n      var buffer = Buffer.allocUnsafe(length);\n      var pos = 0;\n\n      for (i = 0; i < list.length; ++i) {\n        var buf = list[i];\n\n        if (!Buffer.isBuffer(buf)) {\n          throw new TypeError('\"list\" argument must be an Array of Buffers');\n        }\n\n        buf.copy(buffer, pos);\n        pos += buf.length;\n      }\n\n      return buffer;\n    };\n\n    function byteLength(string, encoding) {\n      if (Buffer.isBuffer(string)) {\n        return string.length;\n      }\n\n      if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n        return string.byteLength;\n      }\n\n      if (typeof string !== 'string') {\n        string = '' + string;\n      }\n\n      var len = string.length;\n      if (len === 0) return 0; // Use a for loop to avoid recursion\n\n      var loweredCase = false;\n\n      for (;;) {\n        switch (encoding) {\n          case 'ascii':\n          case 'latin1':\n          case 'binary':\n            return len;\n\n          case 'utf8':\n          case 'utf-8':\n          case undefined:\n            return utf8ToBytes(string).length;\n\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return len * 2;\n\n          case 'hex':\n            return len >>> 1;\n\n          case 'base64':\n            return base64ToBytes(string).length;\n\n          default:\n            if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n            encoding = ('' + encoding).toLowerCase();\n            loweredCase = true;\n        }\n      }\n    }\n\n    Buffer.byteLength = byteLength;\n\n    function slowToString(encoding, start, end) {\n      var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n      // property of a typed array.\n      // This behaves neither like String nor Uint8Array in that we set start/end\n      // to their upper/lower bounds if the value passed is out of range.\n      // undefined is handled specially as per ECMA-262 6th Edition,\n      // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n      if (start === undefined || start < 0) {\n        start = 0;\n      } // Return early if start > this.length. Done here to prevent potential uint32\n      // coercion fail below.\n\n\n      if (start > this.length) {\n        return '';\n      }\n\n      if (end === undefined || end > this.length) {\n        end = this.length;\n      }\n\n      if (end <= 0) {\n        return '';\n      } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n      end >>>= 0;\n      start >>>= 0;\n\n      if (end <= start) {\n        return '';\n      }\n\n      if (!encoding) encoding = 'utf8';\n\n      while (true) {\n        switch (encoding) {\n          case 'hex':\n            return hexSlice(this, start, end);\n\n          case 'utf8':\n          case 'utf-8':\n            return utf8Slice(this, start, end);\n\n          case 'ascii':\n            return asciiSlice(this, start, end);\n\n          case 'latin1':\n          case 'binary':\n            return latin1Slice(this, start, end);\n\n          case 'base64':\n            return base64Slice(this, start, end);\n\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return utf16leSlice(this, start, end);\n\n          default:\n            if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n            encoding = (encoding + '').toLowerCase();\n            loweredCase = true;\n        }\n      }\n    } // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n    // Buffer instances.\n\n\n    Buffer.prototype._isBuffer = true;\n\n    function swap(b, n, m) {\n      var i = b[n];\n      b[n] = b[m];\n      b[m] = i;\n    }\n\n    Buffer.prototype.swap16 = function swap16() {\n      var len = this.length;\n\n      if (len % 2 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 16-bits');\n      }\n\n      for (var i = 0; i < len; i += 2) {\n        swap(this, i, i + 1);\n      }\n\n      return this;\n    };\n\n    Buffer.prototype.swap32 = function swap32() {\n      var len = this.length;\n\n      if (len % 4 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 32-bits');\n      }\n\n      for (var i = 0; i < len; i += 4) {\n        swap(this, i, i + 3);\n        swap(this, i + 1, i + 2);\n      }\n\n      return this;\n    };\n\n    Buffer.prototype.swap64 = function swap64() {\n      var len = this.length;\n\n      if (len % 8 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 64-bits');\n      }\n\n      for (var i = 0; i < len; i += 8) {\n        swap(this, i, i + 7);\n        swap(this, i + 1, i + 6);\n        swap(this, i + 2, i + 5);\n        swap(this, i + 3, i + 4);\n      }\n\n      return this;\n    };\n\n    Buffer.prototype.toString = function toString() {\n      var length = this.length | 0;\n      if (length === 0) return '';\n      if (arguments.length === 0) return utf8Slice(this, 0, length);\n      return slowToString.apply(this, arguments);\n    };\n\n    Buffer.prototype.equals = function equals(b) {\n      if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n      if (this === b) return true;\n      return Buffer.compare(this, b) === 0;\n    };\n\n    Buffer.prototype.inspect = function inspect() {\n      var str = '';\n      var max = exports.INSPECT_MAX_BYTES;\n\n      if (this.length > 0) {\n        str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n        if (this.length > max) str += ' ... ';\n      }\n\n      return '<Buffer ' + str + '>';\n    };\n\n    Buffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n      if (!Buffer.isBuffer(target)) {\n        throw new TypeError('Argument must be a Buffer');\n      }\n\n      if (start === undefined) {\n        start = 0;\n      }\n\n      if (end === undefined) {\n        end = target ? target.length : 0;\n      }\n\n      if (thisStart === undefined) {\n        thisStart = 0;\n      }\n\n      if (thisEnd === undefined) {\n        thisEnd = this.length;\n      }\n\n      if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n        throw new RangeError('out of range index');\n      }\n\n      if (thisStart >= thisEnd && start >= end) {\n        return 0;\n      }\n\n      if (thisStart >= thisEnd) {\n        return -1;\n      }\n\n      if (start >= end) {\n        return 1;\n      }\n\n      start >>>= 0;\n      end >>>= 0;\n      thisStart >>>= 0;\n      thisEnd >>>= 0;\n      if (this === target) return 0;\n      var x = thisEnd - thisStart;\n      var y = end - start;\n      var len = Math.min(x, y);\n      var thisCopy = this.slice(thisStart, thisEnd);\n      var targetCopy = target.slice(start, end);\n\n      for (var i = 0; i < len; ++i) {\n        if (thisCopy[i] !== targetCopy[i]) {\n          x = thisCopy[i];\n          y = targetCopy[i];\n          break;\n        }\n      }\n\n      if (x < y) return -1;\n      if (y < x) return 1;\n      return 0;\n    }; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n    // OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n    //\n    // Arguments:\n    // - buffer - a Buffer to search\n    // - val - a string, Buffer, or number\n    // - byteOffset - an index into `buffer`; will be clamped to an int32\n    // - encoding - an optional encoding, relevant is val is a string\n    // - dir - true for indexOf, false for lastIndexOf\n\n\n    function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n      // Empty buffer means no match\n      if (buffer.length === 0) return -1; // Normalize byteOffset\n\n      if (typeof byteOffset === 'string') {\n        encoding = byteOffset;\n        byteOffset = 0;\n      } else if (byteOffset > 0x7fffffff) {\n        byteOffset = 0x7fffffff;\n      } else if (byteOffset < -0x80000000) {\n        byteOffset = -0x80000000;\n      }\n\n      byteOffset = +byteOffset; // Coerce to Number.\n\n      if (isNaN(byteOffset)) {\n        // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n        byteOffset = dir ? 0 : buffer.length - 1;\n      } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n      if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n      if (byteOffset >= buffer.length) {\n        if (dir) return -1;else byteOffset = buffer.length - 1;\n      } else if (byteOffset < 0) {\n        if (dir) byteOffset = 0;else return -1;\n      } // Normalize val\n\n\n      if (typeof val === 'string') {\n        val = Buffer.from(val, encoding);\n      } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n      if (Buffer.isBuffer(val)) {\n        // Special case: looking for empty string/buffer always fails\n        if (val.length === 0) {\n          return -1;\n        }\n\n        return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n      } else if (typeof val === 'number') {\n        val = val & 0xFF; // Search for a byte value [0-255]\n\n        if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n          if (dir) {\n            return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n          } else {\n            return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n          }\n        }\n\n        return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n      }\n\n      throw new TypeError('val must be string, number or Buffer');\n    }\n\n    function arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n      var indexSize = 1;\n      var arrLength = arr.length;\n      var valLength = val.length;\n\n      if (encoding !== undefined) {\n        encoding = String(encoding).toLowerCase();\n\n        if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n          if (arr.length < 2 || val.length < 2) {\n            return -1;\n          }\n\n          indexSize = 2;\n          arrLength /= 2;\n          valLength /= 2;\n          byteOffset /= 2;\n        }\n      }\n\n      function read(buf, i) {\n        if (indexSize === 1) {\n          return buf[i];\n        } else {\n          return buf.readUInt16BE(i * indexSize);\n        }\n      }\n\n      var i;\n\n      if (dir) {\n        var foundIndex = -1;\n\n        for (i = byteOffset; i < arrLength; i++) {\n          if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n            if (foundIndex === -1) foundIndex = i;\n            if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n          } else {\n            if (foundIndex !== -1) i -= i - foundIndex;\n            foundIndex = -1;\n          }\n        }\n      } else {\n        if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n        for (i = byteOffset; i >= 0; i--) {\n          var found = true;\n\n          for (var j = 0; j < valLength; j++) {\n            if (read(arr, i + j) !== read(val, j)) {\n              found = false;\n              break;\n            }\n          }\n\n          if (found) return i;\n        }\n      }\n\n      return -1;\n    }\n\n    Buffer.prototype.includes = function includes(val, byteOffset, encoding) {\n      return this.indexOf(val, byteOffset, encoding) !== -1;\n    };\n\n    Buffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n      return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n    };\n\n    Buffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n      return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n    };\n\n    function hexWrite(buf, string, offset, length) {\n      offset = Number(offset) || 0;\n      var remaining = buf.length - offset;\n\n      if (!length) {\n        length = remaining;\n      } else {\n        length = Number(length);\n\n        if (length > remaining) {\n          length = remaining;\n        }\n      } // must be an even number of digits\n\n\n      var strLen = string.length;\n      if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n      if (length > strLen / 2) {\n        length = strLen / 2;\n      }\n\n      for (var i = 0; i < length; ++i) {\n        var parsed = parseInt(string.substr(i * 2, 2), 16);\n        if (isNaN(parsed)) return i;\n        buf[offset + i] = parsed;\n      }\n\n      return i;\n    }\n\n    function utf8Write(buf, string, offset, length) {\n      return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n    }\n\n    function asciiWrite(buf, string, offset, length) {\n      return blitBuffer(asciiToBytes(string), buf, offset, length);\n    }\n\n    function latin1Write(buf, string, offset, length) {\n      return asciiWrite(buf, string, offset, length);\n    }\n\n    function base64Write(buf, string, offset, length) {\n      return blitBuffer(base64ToBytes(string), buf, offset, length);\n    }\n\n    function ucs2Write(buf, string, offset, length) {\n      return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n    }\n\n    Buffer.prototype.write = function write(string, offset, length, encoding) {\n      // Buffer#write(string)\n      if (offset === undefined) {\n        encoding = 'utf8';\n        length = this.length;\n        offset = 0; // Buffer#write(string, encoding)\n      } else if (length === undefined && typeof offset === 'string') {\n        encoding = offset;\n        length = this.length;\n        offset = 0; // Buffer#write(string, offset[, length][, encoding])\n      } else if (isFinite(offset)) {\n        offset = offset | 0;\n\n        if (isFinite(length)) {\n          length = length | 0;\n          if (encoding === undefined) encoding = 'utf8';\n        } else {\n          encoding = length;\n          length = undefined;\n        } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n      } else {\n        throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n      }\n\n      var remaining = this.length - offset;\n      if (length === undefined || length > remaining) length = remaining;\n\n      if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n        throw new RangeError('Attempt to write outside buffer bounds');\n      }\n\n      if (!encoding) encoding = 'utf8';\n      var loweredCase = false;\n\n      for (;;) {\n        switch (encoding) {\n          case 'hex':\n            return hexWrite(this, string, offset, length);\n\n          case 'utf8':\n          case 'utf-8':\n            return utf8Write(this, string, offset, length);\n\n          case 'ascii':\n            return asciiWrite(this, string, offset, length);\n\n          case 'latin1':\n          case 'binary':\n            return latin1Write(this, string, offset, length);\n\n          case 'base64':\n            // Warning: maxLength not taken into account in base64Write\n            return base64Write(this, string, offset, length);\n\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return ucs2Write(this, string, offset, length);\n\n          default:\n            if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n            encoding = ('' + encoding).toLowerCase();\n            loweredCase = true;\n        }\n      }\n    };\n\n    Buffer.prototype.toJSON = function toJSON() {\n      return {\n        type: 'Buffer',\n        data: Array.prototype.slice.call(this._arr || this, 0)\n      };\n    };\n\n    function base64Slice(buf, start, end) {\n      if (start === 0 && end === buf.length) {\n        return base64.fromByteArray(buf);\n      } else {\n        return base64.fromByteArray(buf.slice(start, end));\n      }\n    }\n\n    function utf8Slice(buf, start, end) {\n      end = Math.min(buf.length, end);\n      var res = [];\n      var i = start;\n\n      while (i < end) {\n        var firstByte = buf[i];\n        var codePoint = null;\n        var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence <= end) {\n          var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n          switch (bytesPerSequence) {\n            case 1:\n              if (firstByte < 0x80) {\n                codePoint = firstByte;\n              }\n\n              break;\n\n            case 2:\n              secondByte = buf[i + 1];\n\n              if ((secondByte & 0xC0) === 0x80) {\n                tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n                if (tempCodePoint > 0x7F) {\n                  codePoint = tempCodePoint;\n                }\n              }\n\n              break;\n\n            case 3:\n              secondByte = buf[i + 1];\n              thirdByte = buf[i + 2];\n\n              if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n                tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n                if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                  codePoint = tempCodePoint;\n                }\n              }\n\n              break;\n\n            case 4:\n              secondByte = buf[i + 1];\n              thirdByte = buf[i + 2];\n              fourthByte = buf[i + 3];\n\n              if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n                tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n                if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                  codePoint = tempCodePoint;\n                }\n              }\n\n          }\n        }\n\n        if (codePoint === null) {\n          // we did not generate a valid codePoint so insert a\n          // replacement char (U+FFFD) and advance only 1 byte\n          codePoint = 0xFFFD;\n          bytesPerSequence = 1;\n        } else if (codePoint > 0xFFFF) {\n          // encode to utf16 (surrogate pair dance)\n          codePoint -= 0x10000;\n          res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n          codePoint = 0xDC00 | codePoint & 0x3FF;\n        }\n\n        res.push(codePoint);\n        i += bytesPerSequence;\n      }\n\n      return decodeCodePointsArray(res);\n    } // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n    // the lowest limit is Chrome, with 0x10000 args.\n    // We go 1 magnitude less, for safety\n\n\n    var MAX_ARGUMENTS_LENGTH = 0x1000;\n\n    function decodeCodePointsArray(codePoints) {\n      var len = codePoints.length;\n\n      if (len <= MAX_ARGUMENTS_LENGTH) {\n        return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n      } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n      var res = '';\n      var i = 0;\n\n      while (i < len) {\n        res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n      }\n\n      return res;\n    }\n\n    function asciiSlice(buf, start, end) {\n      var ret = '';\n      end = Math.min(buf.length, end);\n\n      for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i] & 0x7F);\n      }\n\n      return ret;\n    }\n\n    function latin1Slice(buf, start, end) {\n      var ret = '';\n      end = Math.min(buf.length, end);\n\n      for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i]);\n      }\n\n      return ret;\n    }\n\n    function hexSlice(buf, start, end) {\n      var len = buf.length;\n      if (!start || start < 0) start = 0;\n      if (!end || end < 0 || end > len) end = len;\n      var out = '';\n\n      for (var i = start; i < end; ++i) {\n        out += toHex(buf[i]);\n      }\n\n      return out;\n    }\n\n    function utf16leSlice(buf, start, end) {\n      var bytes = buf.slice(start, end);\n      var res = '';\n\n      for (var i = 0; i < bytes.length; i += 2) {\n        res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n      }\n\n      return res;\n    }\n\n    Buffer.prototype.slice = function slice(start, end) {\n      var len = this.length;\n      start = ~~start;\n      end = end === undefined ? len : ~~end;\n\n      if (start < 0) {\n        start += len;\n        if (start < 0) start = 0;\n      } else if (start > len) {\n        start = len;\n      }\n\n      if (end < 0) {\n        end += len;\n        if (end < 0) end = 0;\n      } else if (end > len) {\n        end = len;\n      }\n\n      if (end < start) end = start;\n      var newBuf;\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        newBuf = this.subarray(start, end);\n        newBuf.__proto__ = Buffer.prototype;\n      } else {\n        var sliceLen = end - start;\n        newBuf = new Buffer(sliceLen, undefined);\n\n        for (var i = 0; i < sliceLen; ++i) {\n          newBuf[i] = this[i + start];\n        }\n      }\n\n      return newBuf;\n    };\n    /*\n     * Need to make sure that buffer isn't trying to write out of bounds.\n     */\n\n\n    function checkOffset(offset, ext, length) {\n      if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n      if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n    }\n\n    Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n      offset = offset | 0;\n      byteLength = byteLength | 0;\n      if (!noAssert) checkOffset(offset, byteLength, this.length);\n      var val = this[offset];\n      var mul = 1;\n      var i = 0;\n\n      while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul;\n      }\n\n      return val;\n    };\n\n    Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n      offset = offset | 0;\n      byteLength = byteLength | 0;\n\n      if (!noAssert) {\n        checkOffset(offset, byteLength, this.length);\n      }\n\n      var val = this[offset + --byteLength];\n      var mul = 1;\n\n      while (byteLength > 0 && (mul *= 0x100)) {\n        val += this[offset + --byteLength] * mul;\n      }\n\n      return val;\n    };\n\n    Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 1, this.length);\n      return this[offset];\n    };\n\n    Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 2, this.length);\n      return this[offset] | this[offset + 1] << 8;\n    };\n\n    Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 2, this.length);\n      return this[offset] << 8 | this[offset + 1];\n    };\n\n    Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 4, this.length);\n      return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n    };\n\n    Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 4, this.length);\n      return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n    };\n\n    Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n      offset = offset | 0;\n      byteLength = byteLength | 0;\n      if (!noAssert) checkOffset(offset, byteLength, this.length);\n      var val = this[offset];\n      var mul = 1;\n      var i = 0;\n\n      while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul;\n      }\n\n      mul *= 0x80;\n      if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n      return val;\n    };\n\n    Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n      offset = offset | 0;\n      byteLength = byteLength | 0;\n      if (!noAssert) checkOffset(offset, byteLength, this.length);\n      var i = byteLength;\n      var mul = 1;\n      var val = this[offset + --i];\n\n      while (i > 0 && (mul *= 0x100)) {\n        val += this[offset + --i] * mul;\n      }\n\n      mul *= 0x80;\n      if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n      return val;\n    };\n\n    Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 1, this.length);\n      if (!(this[offset] & 0x80)) return this[offset];\n      return (0xff - this[offset] + 1) * -1;\n    };\n\n    Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 2, this.length);\n      var val = this[offset] | this[offset + 1] << 8;\n      return val & 0x8000 ? val | 0xFFFF0000 : val;\n    };\n\n    Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 2, this.length);\n      var val = this[offset + 1] | this[offset] << 8;\n      return val & 0x8000 ? val | 0xFFFF0000 : val;\n    };\n\n    Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 4, this.length);\n      return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n    };\n\n    Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 4, this.length);\n      return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n    };\n\n    Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 4, this.length);\n      return ieee754.read(this, offset, true, 23, 4);\n    };\n\n    Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 4, this.length);\n      return ieee754.read(this, offset, false, 23, 4);\n    };\n\n    Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 8, this.length);\n      return ieee754.read(this, offset, true, 52, 8);\n    };\n\n    Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n      if (!noAssert) checkOffset(offset, 8, this.length);\n      return ieee754.read(this, offset, false, 52, 8);\n    };\n\n    function checkInt(buf, value, offset, ext, max, min) {\n      if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n      if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n      if (offset + ext > buf.length) throw new RangeError('Index out of range');\n    }\n\n    Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      byteLength = byteLength | 0;\n\n      if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n        checkInt(this, value, offset, byteLength, maxBytes, 0);\n      }\n\n      var mul = 1;\n      var i = 0;\n      this[offset] = value & 0xFF;\n\n      while (++i < byteLength && (mul *= 0x100)) {\n        this[offset + i] = value / mul & 0xFF;\n      }\n\n      return offset + byteLength;\n    };\n\n    Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      byteLength = byteLength | 0;\n\n      if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n        checkInt(this, value, offset, byteLength, maxBytes, 0);\n      }\n\n      var i = byteLength - 1;\n      var mul = 1;\n      this[offset + i] = value & 0xFF;\n\n      while (--i >= 0 && (mul *= 0x100)) {\n        this[offset + i] = value / mul & 0xFF;\n      }\n\n      return offset + byteLength;\n    };\n\n    Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n      if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n      this[offset] = value & 0xff;\n      return offset + 1;\n    };\n\n    function objectWriteUInt16(buf, value, offset, littleEndian) {\n      if (value < 0) value = 0xffff + value + 1;\n\n      for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n        buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n      }\n    }\n\n    Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff;\n        this[offset + 1] = value >>> 8;\n      } else {\n        objectWriteUInt16(this, value, offset, true);\n      }\n\n      return offset + 2;\n    };\n\n    Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8;\n        this[offset + 1] = value & 0xff;\n      } else {\n        objectWriteUInt16(this, value, offset, false);\n      }\n\n      return offset + 2;\n    };\n\n    function objectWriteUInt32(buf, value, offset, littleEndian) {\n      if (value < 0) value = 0xffffffff + value + 1;\n\n      for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n        buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n      }\n    }\n\n    Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset + 3] = value >>> 24;\n        this[offset + 2] = value >>> 16;\n        this[offset + 1] = value >>> 8;\n        this[offset] = value & 0xff;\n      } else {\n        objectWriteUInt32(this, value, offset, true);\n      }\n\n      return offset + 4;\n    };\n\n    Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24;\n        this[offset + 1] = value >>> 16;\n        this[offset + 2] = value >>> 8;\n        this[offset + 3] = value & 0xff;\n      } else {\n        objectWriteUInt32(this, value, offset, false);\n      }\n\n      return offset + 4;\n    };\n\n    Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n      value = +value;\n      offset = offset | 0;\n\n      if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1);\n        checkInt(this, value, offset, byteLength, limit - 1, -limit);\n      }\n\n      var i = 0;\n      var mul = 1;\n      var sub = 0;\n      this[offset] = value & 0xFF;\n\n      while (++i < byteLength && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n          sub = 1;\n        }\n\n        this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n      }\n\n      return offset + byteLength;\n    };\n\n    Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n      value = +value;\n      offset = offset | 0;\n\n      if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1);\n        checkInt(this, value, offset, byteLength, limit - 1, -limit);\n      }\n\n      var i = byteLength - 1;\n      var mul = 1;\n      var sub = 0;\n      this[offset + i] = value & 0xFF;\n\n      while (--i >= 0 && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n          sub = 1;\n        }\n\n        this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n      }\n\n      return offset + byteLength;\n    };\n\n    Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n      if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n      if (value < 0) value = 0xff + value + 1;\n      this[offset] = value & 0xff;\n      return offset + 1;\n    };\n\n    Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff;\n        this[offset + 1] = value >>> 8;\n      } else {\n        objectWriteUInt16(this, value, offset, true);\n      }\n\n      return offset + 2;\n    };\n\n    Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8;\n        this[offset + 1] = value & 0xff;\n      } else {\n        objectWriteUInt16(this, value, offset, false);\n      }\n\n      return offset + 2;\n    };\n\n    Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff;\n        this[offset + 1] = value >>> 8;\n        this[offset + 2] = value >>> 16;\n        this[offset + 3] = value >>> 24;\n      } else {\n        objectWriteUInt32(this, value, offset, true);\n      }\n\n      return offset + 4;\n    };\n\n    Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n      value = +value;\n      offset = offset | 0;\n      if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n      if (value < 0) value = 0xffffffff + value + 1;\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24;\n        this[offset + 1] = value >>> 16;\n        this[offset + 2] = value >>> 8;\n        this[offset + 3] = value & 0xff;\n      } else {\n        objectWriteUInt32(this, value, offset, false);\n      }\n\n      return offset + 4;\n    };\n\n    function checkIEEE754(buf, value, offset, ext, max, min) {\n      if (offset + ext > buf.length) throw new RangeError('Index out of range');\n      if (offset < 0) throw new RangeError('Index out of range');\n    }\n\n    function writeFloat(buf, value, offset, littleEndian, noAssert) {\n      if (!noAssert) {\n        checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n      }\n\n      ieee754.write(buf, value, offset, littleEndian, 23, 4);\n      return offset + 4;\n    }\n\n    Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n      return writeFloat(this, value, offset, true, noAssert);\n    };\n\n    Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n      return writeFloat(this, value, offset, false, noAssert);\n    };\n\n    function writeDouble(buf, value, offset, littleEndian, noAssert) {\n      if (!noAssert) {\n        checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n      }\n\n      ieee754.write(buf, value, offset, littleEndian, 52, 8);\n      return offset + 8;\n    }\n\n    Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n      return writeDouble(this, value, offset, true, noAssert);\n    };\n\n    Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n      return writeDouble(this, value, offset, false, noAssert);\n    }; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\n    Buffer.prototype.copy = function copy(target, targetStart, start, end) {\n      if (!start) start = 0;\n      if (!end && end !== 0) end = this.length;\n      if (targetStart >= target.length) targetStart = target.length;\n      if (!targetStart) targetStart = 0;\n      if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n      if (end === start) return 0;\n      if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n      if (targetStart < 0) {\n        throw new RangeError('targetStart out of bounds');\n      }\n\n      if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n      if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n      if (end > this.length) end = this.length;\n\n      if (target.length - targetStart < end - start) {\n        end = target.length - targetStart + start;\n      }\n\n      var len = end - start;\n      var i;\n\n      if (this === target && start < targetStart && targetStart < end) {\n        // descending copy from end\n        for (i = len - 1; i >= 0; --i) {\n          target[i + targetStart] = this[i + start];\n        }\n      } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n        // ascending copy from start\n        for (i = 0; i < len; ++i) {\n          target[i + targetStart] = this[i + start];\n        }\n      } else {\n        Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n      }\n\n      return len;\n    }; // Usage:\n    //    buffer.fill(number[, offset[, end]])\n    //    buffer.fill(buffer[, offset[, end]])\n    //    buffer.fill(string[, offset[, end]][, encoding])\n\n\n    Buffer.prototype.fill = function fill(val, start, end, encoding) {\n      // Handle string cases:\n      if (typeof val === 'string') {\n        if (typeof start === 'string') {\n          encoding = start;\n          start = 0;\n          end = this.length;\n        } else if (typeof end === 'string') {\n          encoding = end;\n          end = this.length;\n        }\n\n        if (val.length === 1) {\n          var code = val.charCodeAt(0);\n\n          if (code < 256) {\n            val = code;\n          }\n        }\n\n        if (encoding !== undefined && typeof encoding !== 'string') {\n          throw new TypeError('encoding must be a string');\n        }\n\n        if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n          throw new TypeError('Unknown encoding: ' + encoding);\n        }\n      } else if (typeof val === 'number') {\n        val = val & 255;\n      } // Invalid ranges are not set to a default, so can range check early.\n\n\n      if (start < 0 || this.length < start || this.length < end) {\n        throw new RangeError('Out of range index');\n      }\n\n      if (end <= start) {\n        return this;\n      }\n\n      start = start >>> 0;\n      end = end === undefined ? this.length : end >>> 0;\n      if (!val) val = 0;\n      var i;\n\n      if (typeof val === 'number') {\n        for (i = start; i < end; ++i) {\n          this[i] = val;\n        }\n      } else {\n        var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n        var len = bytes.length;\n\n        for (i = 0; i < end - start; ++i) {\n          this[i + start] = bytes[i % len];\n        }\n      }\n\n      return this;\n    }; // HELPER FUNCTIONS\n    // ================\n\n\n    var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n    function base64clean(str) {\n      // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n      str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n      if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n      while (str.length % 4 !== 0) {\n        str = str + '=';\n      }\n\n      return str;\n    }\n\n    function stringtrim(str) {\n      if (str.trim) return str.trim();\n      return str.replace(/^\\s+|\\s+$/g, '');\n    }\n\n    function toHex(n) {\n      if (n < 16) return '0' + n.toString(16);\n      return n.toString(16);\n    }\n\n    function utf8ToBytes(string, units) {\n      units = units || Infinity;\n      var codePoint;\n      var length = string.length;\n      var leadSurrogate = null;\n      var bytes = [];\n\n      for (var i = 0; i < length; ++i) {\n        codePoint = string.charCodeAt(i); // is surrogate component\n\n        if (codePoint > 0xD7FF && codePoint < 0xE000) {\n          // last char was a lead\n          if (!leadSurrogate) {\n            // no lead yet\n            if (codePoint > 0xDBFF) {\n              // unexpected trail\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              continue;\n            } else if (i + 1 === length) {\n              // unpaired lead\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              continue;\n            } // valid lead\n\n\n            leadSurrogate = codePoint;\n            continue;\n          } // 2 leads in a row\n\n\n          if (codePoint < 0xDC00) {\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n            leadSurrogate = codePoint;\n            continue;\n          } // valid surrogate pair\n\n\n          codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n        } else if (leadSurrogate) {\n          // valid bmp char, but last char was a lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        }\n\n        leadSurrogate = null; // encode utf8\n\n        if (codePoint < 0x80) {\n          if ((units -= 1) < 0) break;\n          bytes.push(codePoint);\n        } else if (codePoint < 0x800) {\n          if ((units -= 2) < 0) break;\n          bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n        } else if (codePoint < 0x10000) {\n          if ((units -= 3) < 0) break;\n          bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n        } else if (codePoint < 0x110000) {\n          if ((units -= 4) < 0) break;\n          bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n        } else {\n          throw new Error('Invalid code point');\n        }\n      }\n\n      return bytes;\n    }\n\n    function asciiToBytes(str) {\n      var byteArray = [];\n\n      for (var i = 0; i < str.length; ++i) {\n        // Node's code seems to be doing this and not & 0x7F..\n        byteArray.push(str.charCodeAt(i) & 0xFF);\n      }\n\n      return byteArray;\n    }\n\n    function utf16leToBytes(str, units) {\n      var c, hi, lo;\n      var byteArray = [];\n\n      for (var i = 0; i < str.length; ++i) {\n        if ((units -= 2) < 0) break;\n        c = str.charCodeAt(i);\n        hi = c >> 8;\n        lo = c % 256;\n        byteArray.push(lo);\n        byteArray.push(hi);\n      }\n\n      return byteArray;\n    }\n\n    function base64ToBytes(str) {\n      return base64.toByteArray(base64clean(str));\n    }\n\n    function blitBuffer(src, dst, offset, length) {\n      for (var i = 0; i < length; ++i) {\n        if (i + offset >= dst.length || i >= src.length) break;\n        dst[i + offset] = src[i];\n      }\n\n      return i;\n    }\n\n    function isnan(val) {\n      return val !== val; // eslint-disable-line no-self-compare\n    }\n    /* WEBPACK VAR INJECTION */\n\n  }).call(this, __webpack_require__(20));\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  exports.byteLength = byteLength;\n  exports.toByteArray = toByteArray;\n  exports.fromByteArray = fromByteArray;\n  var lookup = [];\n  var revLookup = [];\n  var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n  } // Support decoding URL-safe base64 strings, as Node.js does.\n  // See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\n  revLookup['-'.charCodeAt(0)] = 62;\n  revLookup['_'.charCodeAt(0)] = 63;\n\n  function getLens(b64) {\n    var len = b64.length;\n\n    if (len % 4 > 0) {\n      throw new Error('Invalid string. Length must be a multiple of 4');\n    } // Trim off extra bytes after placeholder bytes are found\n    // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n    var validLen = b64.indexOf('=');\n    if (validLen === -1) validLen = len;\n    var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n    return [validLen, placeHoldersLen];\n  } // base64 is 4/3 + up to two characters of the original data\n\n\n  function byteLength(b64) {\n    var lens = getLens(b64);\n    var validLen = lens[0];\n    var placeHoldersLen = lens[1];\n    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n  }\n\n  function _byteLength(b64, validLen, placeHoldersLen) {\n    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n  }\n\n  function toByteArray(b64) {\n    var tmp;\n    var lens = getLens(b64);\n    var validLen = lens[0];\n    var placeHoldersLen = lens[1];\n    var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n    var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n    var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n    var i;\n\n    for (i = 0; i < len; i += 4) {\n      tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n      arr[curByte++] = tmp >> 16 & 0xFF;\n      arr[curByte++] = tmp >> 8 & 0xFF;\n      arr[curByte++] = tmp & 0xFF;\n    }\n\n    if (placeHoldersLen === 2) {\n      tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n      arr[curByte++] = tmp & 0xFF;\n    }\n\n    if (placeHoldersLen === 1) {\n      tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n      arr[curByte++] = tmp >> 8 & 0xFF;\n      arr[curByte++] = tmp & 0xFF;\n    }\n\n    return arr;\n  }\n\n  function tripletToBase64(num) {\n    return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n  }\n\n  function encodeChunk(uint8, start, end) {\n    var tmp;\n    var output = [];\n\n    for (var i = start; i < end; i += 3) {\n      tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n      output.push(tripletToBase64(tmp));\n    }\n\n    return output.join('');\n  }\n\n  function fromByteArray(uint8) {\n    var tmp;\n    var len = uint8.length;\n    var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n    var parts = [];\n    var maxChunkLength = 16383; // must be multiple of 3\n    // go through the array every three bytes, we'll deal with trailing stuff later\n\n    for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n      parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n    } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n    if (extraBytes === 1) {\n      tmp = uint8[len - 1];\n      parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n    } else if (extraBytes === 2) {\n      tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n      parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n    }\n\n    return parts.join('');\n  }\n  /***/\n\n}, function (module, exports) {\n  exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n    var e, m;\n    var eLen = nBytes * 8 - mLen - 1;\n    var eMax = (1 << eLen) - 1;\n    var eBias = eMax >> 1;\n    var nBits = -7;\n    var i = isLE ? nBytes - 1 : 0;\n    var d = isLE ? -1 : 1;\n    var s = buffer[offset + i];\n    i += d;\n    e = s & (1 << -nBits) - 1;\n    s >>= -nBits;\n    nBits += eLen;\n\n    for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    m = e & (1 << -nBits) - 1;\n    e >>= -nBits;\n    nBits += mLen;\n\n    for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    if (e === 0) {\n      e = 1 - eBias;\n    } else if (e === eMax) {\n      return m ? NaN : (s ? -1 : 1) * Infinity;\n    } else {\n      m = m + Math.pow(2, mLen);\n      e = e - eBias;\n    }\n\n    return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n  };\n\n  exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n    var e, m, c;\n    var eLen = nBytes * 8 - mLen - 1;\n    var eMax = (1 << eLen) - 1;\n    var eBias = eMax >> 1;\n    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n    var i = isLE ? 0 : nBytes - 1;\n    var d = isLE ? 1 : -1;\n    var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n    value = Math.abs(value);\n\n    if (isNaN(value) || value === Infinity) {\n      m = isNaN(value) ? 1 : 0;\n      e = eMax;\n    } else {\n      e = Math.floor(Math.log(value) / Math.LN2);\n\n      if (value * (c = Math.pow(2, -e)) < 1) {\n        e--;\n        c *= 2;\n      }\n\n      if (e + eBias >= 1) {\n        value += rt / c;\n      } else {\n        value += rt * Math.pow(2, 1 - eBias);\n      }\n\n      if (value * c >= 2) {\n        e++;\n        c /= 2;\n      }\n\n      if (e + eBias >= eMax) {\n        m = 0;\n        e = eMax;\n      } else if (e + eBias >= 1) {\n        m = (value * c - 1) * Math.pow(2, mLen);\n        e = e + eBias;\n      } else {\n        m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n        e = 0;\n      }\n    }\n\n    for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n    e = e << mLen | m;\n    eLen += mLen;\n\n    for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n    buffer[offset + i - d] |= s * 128;\n  };\n  /***/\n\n}, function (module, exports) {\n  var toString = {}.toString;\n\n  module.exports = Array.isArray || function (arr) {\n    return toString.call(arr) == '[object Array]';\n  };\n  /***/\n\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (Buffer) {\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    function padString(input) {\n      var segmentLength = 4;\n      var stringLength = input.length;\n      var diff = stringLength % segmentLength;\n\n      if (!diff) {\n        return input;\n      }\n\n      var position = stringLength;\n      var padLength = segmentLength - diff;\n      var paddedStringLength = stringLength + padLength;\n      var buffer = Buffer.alloc(paddedStringLength);\n      buffer.write(input);\n\n      while (padLength--) {\n        buffer.write(\"=\", position++);\n      }\n\n      return buffer.toString();\n    }\n\n    exports.default = padString;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(41).Buffer);\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Local dependencies\n   */\n\n  var None = __webpack_require__(47);\n\n  var HMAC = __webpack_require__(48);\n\n  var RSASSA_PKCS1_v1_5 = __webpack_require__(52);\n\n  var SupportedAlgorithms = __webpack_require__(53);\n  /**\n   * Register Supported Algorithms\n   */\n\n\n  var supportedAlgorithms = new SupportedAlgorithms();\n  /**\n   * Sign\n   */\n\n  supportedAlgorithms.define('HS256', 'sign', new HMAC({\n    name: 'HMAC',\n    hash: {\n      name: 'SHA-256'\n    }\n  }));\n  supportedAlgorithms.define('HS384', 'sign', new HMAC({\n    name: 'HMAC',\n    hash: {\n      name: 'SHA-384'\n    }\n  }));\n  supportedAlgorithms.define('HS512', 'sign', new HMAC({\n    name: 'HMAC',\n    hash: {\n      name: 'SHA-512'\n    }\n  }));\n  supportedAlgorithms.define('RS256', 'sign', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-256'\n    }\n  }));\n  supportedAlgorithms.define('RS384', 'sign', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-384'\n    }\n  }));\n  supportedAlgorithms.define('RS512', 'sign', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-512'\n    }\n  })); //supportedAlgorithms.define('ES256', 'sign', {})\n  //supportedAlgorithms.define('ES384', 'sign', {})\n  //supportedAlgorithms.define('ES512', 'sign', {})\n  //supportedAlgorithms.define('PS256', 'sign', {})\n  //supportedAlgorithms.define('PS384', 'sign', {})\n  //supportedAlgorithms.define('PS512', 'sign', {})\n\n  supportedAlgorithms.define('none', 'sign', new None({// nothing goes here\n  }));\n  /**\n   * Verify\n   */\n\n  supportedAlgorithms.define('HS256', 'verify', new HMAC({\n    name: 'HMAC',\n    hash: {\n      name: 'SHA-256'\n    }\n  }));\n  supportedAlgorithms.define('HS384', 'verify', new HMAC({\n    name: 'HMAC',\n    hash: {\n      name: 'SHA-384'\n    }\n  }));\n  supportedAlgorithms.define('HS512', 'verify', new HMAC({\n    name: 'HMAC',\n    hash: {\n      name: 'SHA-512'\n    }\n  }));\n  supportedAlgorithms.define('RS256', 'verify', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-256'\n    }\n  }));\n  supportedAlgorithms.define('RS384', 'verify', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-384'\n    }\n  }));\n  supportedAlgorithms.define('RS512', 'verify', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-512'\n    }\n  })); //supportedAlgorithms.define('ES256', 'verify', {})\n  //supportedAlgorithms.define('ES384', 'verify', {})\n  //supportedAlgorithms.define('ES512', 'verify', {})\n  //supportedAlgorithms.define('PS256', 'verify', {})\n  //supportedAlgorithms.define('PS384', 'verify', {})\n  //supportedAlgorithms.define('PS512', 'verify', {})\n\n  supportedAlgorithms.define('none', 'verify', new None({// nothing goes here\n  }));\n  supportedAlgorithms.define('RS256', 'importKey', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-256'\n    }\n  }));\n  supportedAlgorithms.define('RS384', 'importKey', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-384'\n    }\n  }));\n  supportedAlgorithms.define('RS512', 'importKey', new RSASSA_PKCS1_v1_5({\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-512'\n    }\n  }));\n  /**\n   * Export\n   */\n\n  module.exports = supportedAlgorithms;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  /**\n   * None\n   */\n\n\n  var None = function () {\n    function None() {\n      _classCallCheck(this, None);\n    }\n\n    _createClass(None, [{\n      key: 'sign',\n\n      /**\n       * sign\n       */\n      value: function sign() {\n        return Promise.resolve('');\n      }\n      /**\n       * verify\n       */\n\n    }, {\n      key: 'verify',\n      value: function verify() {// this will never get called. but you looked.\n      }\n    }]);\n\n    return None;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = None;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (Buffer) {\n    /**\n     * Dependencies\n     * @ignore\n     */\n    var _createClass = function () {\n      function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) defineProperties(Constructor, staticProps);\n        return Constructor;\n      };\n    }();\n\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n\n    var base64url = __webpack_require__(39);\n\n    var crypto = __webpack_require__(49);\n\n    var TextEncoder = __webpack_require__(50);\n    /**\n     * HMAC with SHA-2 Functions\n     */\n\n\n    var HMAC = function () {\n      /**\n       * Constructor\n       *\n       * @param {string} bitlength\n       */\n      function HMAC(params) {\n        _classCallCheck(this, HMAC);\n\n        this.params = params;\n      }\n      /**\n       * Sign\n       *\n       * @description\n       * Generate a hash-based message authentication code for a\n       * given input and key. Enforce the key length is equal to\n       * or greater than the bitlength.\n       *\n       * @param {CryptoKey} key\n       * @param {string} data\n       *\n       * @returns {string}\n       */\n\n\n      _createClass(HMAC, [{\n        key: 'sign',\n        value: function sign(key, data) {\n          var algorithm = this.params; // TODO: validate key length\n\n          data = new TextEncoder().encode(data);\n          return crypto.subtle.sign(algorithm, key, data).then(function (signature) {\n            return base64url(Buffer.from(signature));\n          });\n        }\n        /**\n         * Verify\n         *\n         * @description\n         * Verify a digital signature for a given input and private key.\n         *\n         * @param {CryptoKey} key\n         * @param {string} signature\n         * @param {string} data\n         *\n         * @returns {Boolean}\n         */\n\n      }, {\n        key: 'verify',\n        value: function verify(key, signature, data) {\n          var algorithm = this.params;\n\n          if (typeof signature === 'string') {\n            signature = Uint8Array.from(base64url.toBuffer(signature));\n          }\n\n          if (typeof data === 'string') {\n            data = new TextEncoder().encode(data);\n          }\n\n          return crypto.subtle.verify(algorithm, key, signature, data);\n        }\n        /**\n         * Assert Sufficient Key Length\n         *\n         * @description Assert that the key length is sufficient\n         * @param {string} key\n         */\n\n      }, {\n        key: 'assertSufficientKeyLength',\n        value: function assertSufficientKeyLength(key) {\n          if (key.length < this.bitlength) {\n            throw new Error('The key is too short.');\n          }\n        }\n      }]);\n\n      return HMAC;\n    }();\n    /**\n     * Export\n     */\n\n\n    module.exports = HMAC;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(41).Buffer);\n  /***/\n}, function (module, exports) {\n  (function () {\n    module.exports = window[\"crypto\"];\n  })();\n  /***/\n\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (global) {\n    var TextEncoder = global.TextEncoder ? global.TextEncoder // browser\n    : __webpack_require__(51).TextEncoder; // node shim\n\n    module.exports = TextEncoder;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(20));\n  /***/\n}, function (module, exports) {\n  (function () {\n    module.exports = window[\"TextEncoder\"];\n  })();\n  /***/\n\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /* WEBPACK VAR INJECTION */\n\n  (function (Buffer) {\n    /**\n     * Dependencies\n     * @ignore\n     */\n    var _createClass = function () {\n      function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) defineProperties(Constructor, staticProps);\n        return Constructor;\n      };\n    }();\n\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n\n    var base64url = __webpack_require__(39);\n\n    var crypto = __webpack_require__(49);\n\n    var TextEncoder = __webpack_require__(50);\n    /**\n     * RSASSA-PKCS1-v1_5\n     */\n\n\n    var RSASSA_PKCS1_v1_5 = function () {\n      /**\n       * constructor\n       *\n       * @param {string} bitlength\n       */\n      function RSASSA_PKCS1_v1_5(params) {\n        _classCallCheck(this, RSASSA_PKCS1_v1_5);\n\n        this.params = params;\n      }\n      /**\n       * sign\n       *\n       * @description\n       * Generate a digital signature for a given input and private key.\n       *\n       * @param {CryptoKey} key\n       * @param {BufferSource} data\n       *\n       * @returns {Promise}\n       */\n\n\n      _createClass(RSASSA_PKCS1_v1_5, [{\n        key: 'sign',\n        value: function sign(key, data) {\n          var algorithm = this.params; // TODO\n          //if (!this.sufficientKeySize()) {\n          //  return Promise.reject(\n          //    new Error(\n          //      'A key size of 2048 bits or larger must be used with RSASSA-PKCS1-v1_5'\n          //    )\n          //  )\n          //}\n\n          data = new TextEncoder().encode(data);\n          return crypto.subtle.sign(algorithm, key, data).then(function (signature) {\n            return base64url(Buffer.from(signature));\n          });\n        }\n        /**\n         * verify\n         *\n         * @description\n         * Verify a digital signature for a given input and private key.\n         *\n         * @param {CryptoKey} key\n         * @param {BufferSource} signature\n         * @param {BufferSource} data\n         *\n         * @returns {Promise}\n         */\n\n      }, {\n        key: 'verify',\n        value: function verify(key, signature, data) {\n          var algorithm = this.params;\n\n          if (typeof signature === 'string') {\n            signature = Uint8Array.from(base64url.toBuffer(signature));\n          }\n\n          if (typeof data === 'string') {\n            data = new TextEncoder().encode(data);\n          } // ...\n\n\n          return crypto.subtle.verify(algorithm, key, signature, data);\n        }\n        /**\n         * importKey\n         *\n         * @param {JWK} key\n         * @returns {Promise}\n         */\n\n      }, {\n        key: 'importKey',\n        value: function importKey(key) {\n          var jwk = Object.assign({}, key);\n          var algorithm = this.params;\n          var usages = key['key_ops'] || [];\n\n          if (key.use === 'sig') {\n            usages.push('verify');\n          }\n\n          if (key.use === 'enc') {\n            // TODO: handle encryption keys\n            return Promise.resolve(key);\n          }\n\n          if (key.key_ops) {\n            usages = key.key_ops;\n          }\n\n          return crypto.subtle.importKey('jwk', jwk, algorithm, true, usages).then(function (cryptoKey) {\n            Object.defineProperty(jwk, 'cryptoKey', {\n              enumerable: false,\n              value: cryptoKey\n            });\n            return jwk;\n          });\n        }\n      }]);\n\n      return RSASSA_PKCS1_v1_5;\n    }();\n    /**\n     * Export\n     */\n\n\n    module.exports = RSASSA_PKCS1_v1_5;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(41).Buffer);\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  /**\n   * Dependencies\n   */\n\n\n  var NotSupportedError = __webpack_require__(54);\n  /**\n   * Operations\n   */\n\n\n  var operations = ['sign', 'verify', 'encrypt', 'decrypt', 'importKey'];\n  /**\n   * SupportedAlgorithms\n   */\n\n  var SupportedAlgorithms = function () {\n    /**\n     * constructor\n     */\n    function SupportedAlgorithms() {\n      var _this = this;\n\n      _classCallCheck(this, SupportedAlgorithms);\n\n      operations.forEach(function (op) {\n        _this[op] = {};\n      });\n    }\n    /**\n     * Supported Operations\n     */\n\n\n    _createClass(SupportedAlgorithms, [{\n      key: 'define',\n\n      /**\n       * define\n       *\n       * @description\n       * Register Web Crypto API algorithm parameter for an algorithm\n       * and operation.\n       *\n       * @param {string} alg\n       * @param {string} op\n       * @param {Object} argument\n       */\n      value: function define(alg, op, argument) {\n        var registeredAlgorithms = this[op];\n        registeredAlgorithms[alg] = argument;\n      }\n      /**\n       * normalize\n       *\n       * @description\n       * Map JWA alg name to Web Crypto API algorithm parameter\n       *\n       * @param {string} op\n       * @param {Object} alg\n       *\n       * @returns {Object}\n       */\n\n    }, {\n      key: 'normalize',\n      value: function normalize(op, alg) {\n        var registeredAlgorithms = this[op];\n\n        if (!registeredAlgorithms) {\n          return new SyntaxError(); // what kind of error should this be?\n        }\n\n        var argument = registeredAlgorithms[alg];\n\n        if (!argument) {\n          return new NotSupportedError(alg);\n        }\n\n        return argument;\n      }\n    }], [{\n      key: 'operations',\n      get: function get() {\n        return operations;\n      }\n    }]);\n\n    return SupportedAlgorithms;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = SupportedAlgorithms;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n  /**\n   * NotSupportedError\n   */\n\n\n  var NotSupportedError = function (_Error) {\n    _inherits(NotSupportedError, _Error);\n\n    function NotSupportedError(alg) {\n      _classCallCheck(this, NotSupportedError);\n\n      var _this = _possibleConstructorReturn(this, (NotSupportedError.__proto__ || Object.getPrototypeOf(NotSupportedError)).call(this));\n\n      _this.message = alg + \" is not a supported algorithm\";\n      return _this;\n    }\n\n    return NotSupportedError;\n  }(Error);\n  /**\n   * Export\n   */\n\n\n  module.exports = NotSupportedError;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  module.exports = {\n    DataError: __webpack_require__(56),\n    NotSupportedError: __webpack_require__(54)\n  };\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n  /**\n   * DataError\n   */\n\n\n  var DataError = function (_Error) {\n    _inherits(DataError, _Error);\n\n    function DataError(message) {\n      _classCallCheck(this, DataError);\n\n      return _possibleConstructorReturn(this, (DataError.__proto__ || Object.getPrototypeOf(DataError)).call(this, message));\n    }\n\n    return DataError;\n  }(Error);\n  /**\n   * Export\n   */\n\n\n  module.exports = DataError;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   * @ignore\n   */\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var _require = __webpack_require__(28),\n      JSONDocument = _require.JSONDocument;\n\n  var JWKSchema = __webpack_require__(58);\n\n  var JWA = __webpack_require__(38);\n  /**\n   * JWK Class\n   */\n\n\n  var JWK = function (_JSONDocument) {\n    _inherits(JWK, _JSONDocument);\n\n    function JWK() {\n      _classCallCheck(this, JWK);\n\n      return _possibleConstructorReturn(this, (JWK.__proto__ || Object.getPrototypeOf(JWK)).apply(this, arguments));\n    }\n\n    _createClass(JWK, null, [{\n      key: 'importKey',\n\n      /**\n       * importKey\n       *\n       * TODO:\n       * - should this be on JWA?\n       */\n      value: function importKey(jwk) {\n        return JWA.importKey(jwk);\n      }\n    }, {\n      key: 'schema',\n\n      /**\n       * Schema\n       */\n      get: function get() {\n        return JWKSchema;\n      }\n    }]);\n\n    return JWK;\n  }(JSONDocument);\n  /**\n   * Export\n   */\n\n\n  module.exports = JWK;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   * @ignore\n   */\n\n  var _require = __webpack_require__(28),\n      JSONSchema = _require.JSONSchema;\n\n  var _require2 = __webpack_require__(59),\n      BASE64_REGEXP = _require2.BASE64_REGEXP;\n  /**\n   * JWK Schema\n   */\n\n\n  var JWKSchema = new JSONSchema({\n    type: 'object',\n    properties: {\n      kty: {\n        type: 'string',\n        //format: 'case-sensitive',\n        enum: ['RSA', 'EC', 'oct'] // other values MAY be used\n\n      },\n      use: {\n        type: 'string',\n        //format: 'case-sensitive',\n        enum: ['sig', 'enc'] // other values MAY be used\n\n      },\n      key_ops: {\n        type: 'array',\n        //format: 'case-sensitive',\n        items: {\n          enum: ['sign', 'verify', 'encrypt', 'decrypt', 'wrapKey', 'unwrapKey', 'deriveKey', 'deriveBits'] // other values MAY be used\n\n        }\n      },\n      alg: {\n        type: 'string',\n        //format: 'case-sensitive',\n        enum: ['HS256', 'HS384', 'HS512', 'RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'PS256', 'PS384', 'PS512', 'none'] // other values MAY be used\n\n      },\n      kid: {\n        type: 'string'\n      },\n      x5u: {\n        type: 'string' //format: 'url'\n\n      },\n      x5c: {\n        type: 'array' //format: BASE64_REGEXP\n\n      },\n      x5t: {\n        type: 'string' //format: BASE64_REGEXP\n\n      } //'x5t#S256': {\n      //  type: 'string',\n      //  //format: BASE64_REGEXP\n      //}\n\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = JWKSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Package dependencies\n   */\n\n  var _require = __webpack_require__(28),\n      Formats = _require.Formats;\n  /**\n   * Format extensions\n   */\n\n\n  Formats.register('StringOrURI', new RegExp());\n  Formats.register('NumericDate', new RegExp());\n  Formats.register('URI', new RegExp());\n  Formats.register('url', new RegExp());\n  Formats.register('base64', new RegExp());\n  Formats.register('base64url', new RegExp());\n  Formats.register('MediaType', new RegExp());\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   */\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var _require = __webpack_require__(28),\n      JSONDocument = _require.JSONDocument;\n\n  var JWKSetSchema = __webpack_require__(61);\n\n  var JWK = __webpack_require__(57);\n  /**\n   * JWKSet\n   *\n   * @class\n   * JWKSet represents a JSON Web Key Set as described in Section 5 of RFC 7517:\n   * https://tools.ietf.org/html/rfc7517#section-5\n   */\n\n\n  var JWKSet = function (_JSONDocument) {\n    _inherits(JWKSet, _JSONDocument);\n\n    function JWKSet() {\n      _classCallCheck(this, JWKSet);\n\n      return _possibleConstructorReturn(this, (JWKSet.__proto__ || Object.getPrototypeOf(JWKSet)).apply(this, arguments));\n    }\n\n    _createClass(JWKSet, null, [{\n      key: 'importKeys',\n\n      /**\n       * importKeys\n       */\n      value: function importKeys(jwks) {\n        var validation = this.schema.validate(jwks);\n\n        if (!validation.valid) {\n          return Promise.reject(new Error('Invalid JWKSet: ' + JSON.stringify(validation, null, 2)));\n        }\n\n        if (!jwks.keys) {\n          return Promise.reject(new Error('Cannot import JWKSet: keys property is empty'));\n        }\n\n        var imported = void 0,\n            importing = void 0;\n\n        try {\n          imported = new JWKSet(jwks);\n          importing = jwks.keys.map(function (key) {\n            return JWK.importKey(key);\n          });\n        } catch (err) {\n          return Promise.reject(err);\n        }\n\n        return Promise.all(importing).then(function (keys) {\n          imported.keys = keys;\n          return imported;\n        });\n      }\n    }, {\n      key: 'schema',\n\n      /**\n       * schema\n       */\n      get: function get() {\n        return JWKSetSchema;\n      }\n    }]);\n\n    return JWKSet;\n  }(JSONDocument);\n  /**\n   * Export\n   */\n\n\n  module.exports = JWKSet;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   */\n\n  var _require = __webpack_require__(28),\n      JSONSchema = _require.JSONSchema;\n\n  var JWKSchema = __webpack_require__(58);\n  /**\n   * JWKSetSchema\n   */\n\n\n  var JWKSetSchema = new JSONSchema({\n    type: 'object',\n    properties: {\n      keys: {\n        type: 'array',\n        items: JWKSchema\n      }\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = JWKSetSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n  /**\n   * Dependencies\n   */\n\n\n  var base64url = __webpack_require__(39);\n\n  var _require = __webpack_require__(28),\n      JSONDocument = _require.JSONDocument;\n\n  var JWTSchema = __webpack_require__(63);\n\n  var JWS = __webpack_require__(67);\n\n  var DataError = __webpack_require__(56);\n  /**\n   * JWT\n   */\n\n\n  var JWT = function (_JSONDocument) {\n    _inherits(JWT, _JSONDocument);\n\n    function JWT() {\n      _classCallCheck(this, JWT);\n\n      return _possibleConstructorReturn(this, (JWT.__proto__ || Object.getPrototypeOf(JWT)).apply(this, arguments));\n    }\n\n    _createClass(JWT, [{\n      key: 'isJWE',\n\n      /**\n       * isJWE\n       */\n      value: function isJWE() {\n        return !!this.header.enc;\n      }\n      /**\n       * resolveKeys\n       */\n\n    }, {\n      key: 'resolveKeys',\n      value: function resolveKeys(jwks) {\n        var kid = this.header.kid;\n        var keys = void 0,\n            match = void 0; // treat an array as the \"keys\" property of a JWK Set\n\n        if (Array.isArray(jwks)) {\n          keys = jwks;\n        } // presence of keys indicates object is a JWK Set\n\n\n        if (jwks.keys) {\n          keys = jwks.keys;\n        } // wrap a plain object they is not a JWK Set in Array\n\n\n        if (!jwks.keys && (typeof jwks === 'undefined' ? 'undefined' : _typeof(jwks)) === 'object') {\n          keys = [jwks];\n        } // ensure there are keys to search\n\n\n        if (!keys) {\n          throw new DataError('Invalid JWK argument');\n        } // match by \"kid\" or \"use\" header\n\n\n        if (kid) {\n          match = keys.find(function (jwk) {\n            return jwk.kid === kid;\n          });\n        } else {\n          match = keys.find(function (jwk) {\n            return jwk.use === 'sig';\n          });\n        } // assign matching key to JWT and return a boolean\n\n\n        if (match) {\n          this.key = match.cryptoKey;\n          return true;\n        } else {\n          return false;\n        }\n      }\n      /**\n       * encode\n       *\n       * @description\n       * Encode a JWT instance\n       *\n       * @returns {Promise}\n       */\n\n    }, {\n      key: 'encode',\n      value: function encode() {\n        // validate\n        var validation = this.validate();\n\n        if (!validation.valid) {\n          return Promise.reject(validation);\n        }\n\n        var token = this;\n\n        if (this.isJWE()) {\n          return JWE.encrypt(token);\n        } else {\n          return JWS.sign(token);\n        }\n      }\n      /**\n       * verify\n       *\n       * @description\n       * Verify a decoded JWT instance\n       *\n       * @returns {Promise}\n       */\n\n    }, {\n      key: 'verify',\n      value: function verify() {\n        var validation = this.validate();\n\n        if (!validation.valid) {\n          return Promise.reject(validation);\n        }\n\n        return JWS.verify(this);\n      }\n    }], [{\n      key: 'decode',\n\n      /**\n       * decode\n       *\n       * @description\n       * Decode a JSON Web Token\n       *\n       * @param {string} data\n       * @returns {JWT}\n       */\n      value: function decode(data) {\n        var ExtendedJWT = this;\n        var jwt = void 0;\n\n        if (typeof data !== 'string') {\n          throw new DataError('JWT must be a string');\n        } // JSON of Flattened JSON Serialization\n\n\n        if (data.startsWith('{')) {\n          try {\n            data = JSON.parse(data, function () {});\n          } catch (error) {\n            throw new DataError('Invalid JWT serialization');\n          }\n\n          if (data.signatures || data.recipients) {\n            data.serialization = 'json';\n          } else {\n            data.serialization = 'flattened';\n          }\n\n          jwt = new ExtendedJWT(data, {\n            filter: false\n          }); // Compact Serialization\n        } else {\n          try {\n            var serialization = 'compact';\n            var segments = data.split('.');\n            var length = segments.length;\n\n            if (length !== 3 && length !== 5) {\n              throw new Error('Malformed JWT');\n            }\n\n            var header = JSON.parse(base64url.decode(segments[0])); // JSON Web Signature\n\n            if (length === 3) {\n              var type = 'JWS';\n              var payload = JSON.parse(base64url.decode(segments[1]));\n              var signature = segments[2];\n              jwt = new ExtendedJWT({\n                type: type,\n                segments: segments,\n                header: header,\n                payload: payload,\n                signature: signature,\n                serialization: serialization\n              }, {\n                filter: false\n              });\n            } // JSON Web Encryption\n\n\n            if (length === 5) {//let type = 'JWE'\n              //let [protected, encryption_key, iv, ciphertext, tag] = segments\n              //jwt = new ExtendedJWT({\n              //  type,\n              //  protected: base64url.decode(JSON.parse(protected)),\n              //  encryption_key,\n              //  iv,\n              //  ciphertext,\n              //  tag,\n              //  serialization\n              //})\n            }\n          } catch (error) {\n            throw new DataError('Invalid JWT compact serialization');\n          }\n        }\n\n        return jwt;\n      }\n      /**\n       * encode\n       *\n       * @description\n       * Encode a JSON Web Token\n       *\n       * @param {Object} header\n       * @param {Object} payload\n       * @param {CryptoKey} key\n       *\n       * @returns {Promise}\n       */\n\n    }, {\n      key: 'encode',\n      value: function encode(header, payload, key) {\n        var jwt = new JWT(header, payload);\n        return jwt.encode(key);\n      }\n      /**\n       * verify\n       *\n       * @description\n       *\n       * @param {CryptoKey} key\n       * @param {string} token\n       *\n       * @returns {Promise}\n       */\n\n    }, {\n      key: 'verify',\n      value: function verify(key, token) {\n        var jwt = JWT.decode(token);\n        jwt.key = key;\n        return jwt.verify().then(function (verified) {\n          return jwt;\n        });\n      }\n    }, {\n      key: 'schema',\n\n      /**\n       * schema\n       */\n      get: function get() {\n        return JWTSchema;\n      }\n    }]);\n\n    return JWT;\n  }(JSONDocument);\n  /**\n   * Export\n   */\n\n\n  module.exports = JWT;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   */\n\n  var Base64URLSchema = __webpack_require__(64);\n\n  var JWTClaimsSetSchema = __webpack_require__(65);\n\n  var JOSEHeaderSchema = __webpack_require__(66);\n\n  var _require = __webpack_require__(28),\n      JSONSchema = _require.JSONSchema;\n  /**\n   * JWTSchema\n   *\n   * @description\n   * This schema represents all the things a deserialized JWT can be, i.e.,\n   * either a JWS or JWE, and any serialization of them. Validation of well-\n   * formedness for a given serialization is accomplished at the time of\n   * encoding.\n   */\n\n\n  var JWTSchema = new JSONSchema({\n    type: 'object',\n    properties: {\n      /**\n       * type\n       */\n      type: {\n        type: 'string',\n        enum: ['JWS', 'JWE']\n      },\n\n      /**\n       * segments\n       */\n      segments: {\n        type: 'array'\n      },\n\n      /**\n       * header\n       */\n      header: JOSEHeaderSchema,\n\n      /**\n       * protected\n       */\n      protected: JOSEHeaderSchema,\n\n      /**\n       * unprotected\n       */\n      unprotected: JOSEHeaderSchema,\n\n      /**\n       * iv\n       */\n      iv: Base64URLSchema,\n\n      /**\n       * aad\n       */\n      aad: Base64URLSchema,\n\n      /**\n       * ciphertext\n       */\n      ciphertext: Base64URLSchema,\n\n      /**\n       * tag\n       */\n      tag: Base64URLSchema,\n\n      /**\n       * recipients\n       */\n      recipients: {\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            header: JOSEHeaderSchema,\n            encrypted_key: Base64URLSchema\n          }\n        }\n      },\n\n      /**\n       * payload\n       */\n      payload: JWTClaimsSetSchema,\n\n      /**\n       * signatures\n       */\n      signatures: {\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            protected: JOSEHeaderSchema,\n            header: JOSEHeaderSchema,\n            signature: Base64URLSchema,\n            key: {\n              type: 'object'\n            }\n          }\n        }\n      },\n\n      /**\n       * signature\n       */\n      signature: Base64URLSchema,\n\n      /**\n       * verified\n       */\n      verified: {\n        type: 'boolean',\n        default: false\n      },\n\n      /**\n       * key\n       */\n      key: {\n        type: 'object'\n      },\n\n      /**\n       * serialization\n       */\n      serialization: {\n        type: 'string',\n        enum: ['compact', 'json', 'flattened'],\n        default: 'compact'\n      }\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = JWTSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   */\n\n  var _require = __webpack_require__(28),\n      JSONSchema = _require.JSONSchema;\n  /**\n   * Base64URLSchema\n   */\n\n\n  var Base64URLSchema = new JSONSchema({\n    type: 'string',\n    format: 'base64url'\n  });\n  /**\n   * Export\n   */\n\n  module.exports = Base64URLSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   */\n\n  var _require = __webpack_require__(28),\n      JSONSchema = _require.JSONSchema;\n  /**\n   * JWTClaimsSetSchema\n   *\n   * JSON Web Token (JWT)\n   * https://tools.ietf.org/html/rfc7519#section-4\n   *\n   * 4.  JWT Claims\n   *\n   *   The JWT Claims Set represents a JSON object whose members are the\n   *   claims conveyed by the JWT.  The Claim Names within a JWT Claims Set\n   *   MUST be unique; JWT parsers MUST either reject JWTs with duplicate\n   *   Claim Names or use a JSON parser that returns only the lexically last\n   *   duplicate member name, as specified in Section 15.12 (\"The JSON\n   *   Object\") of ECMAScript 5.1 [ECMAScript].\n   *\n   *   The set of claims that a JWT must contain to be considered valid is\n   *   context dependent and is outside the scope of this specification.\n   *   Specific applications of JWTs will require implementations to\n   *   understand and process some claims in particular ways.  However, in\n   *   the absence of such requirements, all claims that are not understood\n   *   by implementations MUST be ignored.\n   *\n   *   There are three classes of JWT Claim Names: Registered Claim Names,\n   *   Public Claim Names, and Private Claim Names.\n   */\n\n\n  var JWTClaimsSetSchema = new JSONSchema({\n    properties: {\n      /**\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1\n       *\n       * 4.1.  Registered Claim Names\n       *\n       *   The following Claim Names are registered in the IANA \"JSON Web Token\n       *   Claims\" registry established by Section 10.1.  None of the claims\n       *   defined below are intended to be mandatory to use or implement in all\n       *   cases, but rather they provide a starting point for a set of useful,\n       *   interoperable claims.  Applications using JWTs should define which\n       *   specific claims they use and when they are required or optional.  All\n       *   the names are short because a core goal of JWTs is for the\n       *   representation to be compact.\n       */\n\n      /**\n       * iss\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.1\n       *\n       * 4.1.1.  \"iss\" (Issuer) Claim\n       *\n       *   The \"iss\" (issuer) claim identifies the principal that issued the\n       *   JWT.  The processing of this claim is generally application specific.\n       *   The \"iss\" value is a case-sensitive string containing a StringOrURI\n       *   value.  Use of this claim is OPTIONAL.\n       */\n      iss: {\n        type: 'string',\n        format: 'StringOrURI'\n      },\n\n      /**\n       * sub\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.2\n       *\n       * 4.1.2.  \"sub\" (Subject) Claim\n       *\n       *   The \"sub\" (subject) claim identifies the principal that is the\n       *   subject of the JWT.  The claims in a JWT are normally statements\n       *   about the subject.  The subject value MUST either be scoped to be\n       *   locally unique in the context of the issuer or be globally unique.\n       *   The processing of this claim is generally application specific.  The\n       *   \"sub\" value is a case-sensitive string containing a StringOrURI\n       *   value.  Use of this claim is OPTIONAL.\n       */\n      sub: {\n        type: 'string',\n        format: 'StringOrURI'\n      },\n\n      /**\n       * aud\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.3\n       *\n       * 4.1.3.  \"aud\" (Audience) Claim\n       *\n       *   The \"aud\" (audience) claim identifies the recipients that the JWT is\n       *   intended for.  Each principal intended to process the JWT MUST\n       *   identify itself with a value in the audience claim.  If the principal\n       *   processing the claim does not identify itself with a value in the\n       *   \"aud\" claim when this claim is present, then the JWT MUST be\n       *   rejected.  In the general case, the \"aud\" value is an array of case-\n       *   sensitive strings, each containing a StringOrURI value.  In the\n       *   special case when the JWT has one audience, the \"aud\" value MAY be a\n       *   single case-sensitive string containing a StringOrURI value.  The\n       *   interpretation of audience values is generally application specific.\n       *   Use of this claim is OPTIONAL.\n       */\n      aud: {\n        type: ['array', 'string'],\n        format: 'StringOrURI',\n        items: {\n          format: 'StringOrURI'\n        }\n      },\n\n      /**\n       * exp\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.4\n       *\n       * 4.1.4.  \"exp\" (Expiration Time) Claim\n       *\n       *   The \"exp\" (expiration time) claim identifies the expiration time on\n       *   or after which the JWT MUST NOT be accepted for processing.  The\n       *   processing of the \"exp\" claim requires that the current date/time\n       *   MUST be before the expiration date/time listed in the \"exp\" claim.\n       *\n       *   Implementers MAY provide for some small leeway, usually no more than\n       *   a few minutes, to account for clock skew.  Its value MUST be a number\n       *   containing a NumericDate value.  Use of this claim is OPTIONAL.\n       *\n       */\n      exp: {\n        type: 'number',\n        format: 'NumericDate'\n      },\n\n      /**\n       * nbf\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.5\n       *\n       * 4.1.5.  \"nbf\" (Not Before) Claim\n       *\n       *   The \"nbf\" (not before) claim identifies the time before which the JWT\n       *   MUST NOT be accepted for processing.  The processing of the \"nbf\"\n       *   claim requires that the current date/time MUST be after or equal to\n       *   the not-before date/time listed in the \"nbf\" claim.  Implementers MAY\n       *   provide for some small leeway, usually no more than a few minutes, to\n       *   account for clock skew.  Its value MUST be a number containing a\n       *   NumericDate value.  Use of this claim is OPTIONAL.\n       */\n      nbf: {\n        type: 'number',\n        format: 'NumericDate'\n      },\n\n      /**\n       * iat\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.6\n       *\n       * 4.1.6.  \"iat\" (Issued At) Claim\n       *\n       *   The \"iat\" (issued at) claim identifies the time at which the JWT was\n       *   issued.  This claim can be used to determine the age of the JWT.  Its\n       *   value MUST be a number containing a NumericDate value.  Use of this\n       *   claim is OPTIONAL.\n       */\n      iat: {\n        type: 'number',\n        format: 'NumericDate'\n      },\n\n      /**\n       * jti\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-4.1.7\n       *\n       * 4.1.7.  \"jti\" (JWT ID) Claim\n       *\n       *   The \"jti\" (JWT ID) claim provides a unique identifier for the JWT.\n       *   The identifier value MUST be assigned in a manner that ensures that\n       *   there is a negligible probability that the same value will be\n       *   accidentally assigned to a different data object; if the application\n       *   uses multiple issuers, collisions MUST be prevented among values\n       *   produced by different issuers as well.  The \"jti\" claim can be used\n       *   to prevent the JWT from being replayed.  The \"jti\" value is a case-\n       *   sensitive string.  Use of this claim is OPTIONAL.\n       */\n      jti: {\n        type: 'string'\n      }\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = JWTClaimsSetSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Dependencies\n   */\n\n  var JWKSchema = __webpack_require__(58);\n\n  var _require = __webpack_require__(28),\n      JSONSchema = _require.JSONSchema;\n  /**\n   * JOSEHeaderSchema\n   *\n   * JSON Web Token (JWT)\n   * https://tools.ietf.org/html/rfc7519#section-5\n   *\n   * 5.  JOSE Header\n   *\n   *   For a JWT object, the members of the JSON object represented by the\n   *   JOSE Header describe the cryptographic operations applied to the JWT\n   *   and optionally, additional properties of the JWT.  Depending upon\n   *   whether the JWT is a JWS or JWE, the corresponding rules for the JOSE\n   *   Header values apply.\n   */\n\n\n  var JOSEHeaderSchema = new JSONSchema({\n    type: 'object',\n    properties: {\n      /**\n       * typ\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-5.1\n       *\n       * 5.1.  \"typ\" (Type) Header Parameter\n       *\n       *   The \"typ\" (type) Header Parameter defined by [JWS] and [JWE] is used\n       *   by JWT applications to declare the media type [IANA.MediaTypes] of\n       *   this complete JWT.  This is intended for use by the JWT application\n       *   when values that are not JWTs could also be present in an application\n       *   data structure that can contain a JWT object; the application can use\n       *   this value to disambiguate among the different kinds of objects that\n       *   might be present.  It will typically not be used by applications when\n       *   it is already known that the object is a JWT.  This parameter is\n       *   ignored by JWT implementations; any processing of this parameter is\n       *   performed by the JWT application.  If present, it is RECOMMENDED that\n       *   its value be \"JWT\" to indicate that this object is a JWT.  While\n       *   media type names are not case sensitive, it is RECOMMENDED that \"JWT\"\n       *   always be spelled using uppercase characters for compatibility with\n       *   legacy implementations.  Use of this Header Parameter is OPTIONAL.\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.9\n       *\n       * 4.1.9.  \"typ\" (Type) Header Parameter\n       *\n       *   The \"typ\" (type) Header Parameter is used by JWS applications to\n       *   declare the media type [IANA.MediaTypes] of this complete JWS.  This\n       *   is intended for use by the application when more than one kind of\n       *   object could be present in an application data structure that can\n       *   contain a JWS; the application can use this value to disambiguate\n       *   among the different kinds of objects that might be present.  It will\n       *   typically not be used by applications when the kind of object is\n       *   already known.  This parameter is ignored by JWS implementations; any\n       *   processing of this parameter is performed by the JWS application.\n       *   Use of this Header Parameter is OPTIONAL.\n       *\n       *   Per RFC 2045 [RFC2045], all media type values, subtype values, and\n       *   parameter names are case insensitive.  However, parameter values are\n       *   case sensitive unless otherwise specified for the specific parameter.\n       *\n       *   To keep messages compact in common situations, it is RECOMMENDED that\n       *   producers omit an \"application/\" prefix of a media type value in a\n       *   \"typ\" Header Parameter when no other '/' appears in the media type\n       *   value.  A recipient using the media type value MUST treat it as if\n       *   \"application/\" were prepended to any \"typ\" value not containing a\n       *   '/'.  For instance, a \"typ\" value of \"example\" SHOULD be used to\n       *   represent the \"application/example\" media type, whereas the media\n       *   type \"application/example;part=\"1/2\"\" cannot be shortened to\n       *   \"example;part=\"1/2\"\".\n       *\n       *   The \"typ\" value \"JOSE\" can be used by applications to indicate that\n       *   this object is a JWS or JWE using the JWS Compact Serialization or\n       *   the JWE Compact Serialization.  The \"typ\" value \"JOSE+JSON\" can be\n       *   used by applications to indicate that this object is a JWS or JWE\n       *   using the JWS JSON Serialization or the JWE JSON Serialization.\n       *   Other type values can also be used by applications.\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.11\n       *\n       * 4.1.11.  \"typ\" (Type) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"typ\" Header Parameter defined in Section 4.1.9 of [JWS], except\n       *   that the type is that of this complete JWE.\n       */\n      typ: {\n        type: 'string'\n      },\n\n      /**\n       * cty\n       *\n       * JSON Web Token (JWT)\n       * https://tools.ietf.org/html/rfc7519#section-5.2\n       *\n       * 5.2.  \"cty\" (Content Type) Header Parameter\n       *\n       *   The \"cty\" (content type) Header Parameter defined by [JWS] and [JWE]\n       *   is used by this specification to convey structural information about\n       *   the JWT.\n       *\n       *   In the normal case in which nested signing or encryption operations\n       *   are not employed, the use of this Header Parameter is NOT\n       *   RECOMMENDED.  In the case that nested signing or encryption is\n       *   employed, this Header Parameter MUST be present; in this case, the\n       *   value MUST be \"JWT\", to indicate that a Nested JWT is carried in this\n       *   JWT.  While media type names are not case sensitive, it is\n       *   RECOMMENDED that \"JWT\" always be spelled using uppercase characters\n       *   for compatibility with legacy implementations.  See Appendix A.2 for\n       *   an example of a Nested JWT.\n       *\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.10\n       *\n       * 4.1.10.  \"cty\" (Content Type) Header Parameter\n       *\n       *   The \"cty\" (content type) Header Parameter is used by JWS applications\n       *   to declare the media type [IANA.MediaTypes] of the secured content\n       *   (the payload).  This is intended for use by the application when more\n       *   than one kind of object could be present in the JWS Payload; the\n       *   application can use this value to disambiguate among the different\n       *   kinds of objects that might be present.  It will typically not be\n       *   used by applications when the kind of object is already known.  This\n       *   parameter is ignored by JWS implementations; any processing of this\n       *   parameter is performed by the JWS application.  Use of this Header\n       *   Parameter is OPTIONAL.\n       *\n       *   Per RFC 2045 [RFC2045], all media type values, subtype values, and\n       *   parameter names are case insensitive.  However, parameter values are\n       *   case sensitive unless otherwise specified for the specific parameter.\n       *\n       *   To keep messages compact in common situations, it is RECOMMENDED that\n       *   producers omit an \"application/\" prefix of a media type value in a\n       *   \"cty\" Header Parameter when no other '/' appears in the media type\n       *   value.  A recipient using the media type value MUST treat it as if\n       *   \"application/\" were prepended to any \"cty\" value not containing a\n       *   '/'.  For instance, a \"cty\" value of \"example\" SHOULD be used to\n       *   represent the \"application/example\" media type, whereas the media\n       *   type \"application/example;part=\"1/2\"\" cannot be shortened to\n       *   \"example;part=\"1/2\"\".\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.12\n       *\n       * 4.1.12.  \"cty\" (Content Type) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"cty\" Header Parameter defined in Section 4.1.10 of [JWS], except\n       *   that the type is that of the secured content (the plaintext).\n       */\n      cty: {\n        type: 'string',\n        enum: ['JWT']\n      },\n\n      /**\n       * alg\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.1\n       *\n       * 4.1.1.  \"alg\" (Algorithm) Header Parameter\n       *\n       *   The \"alg\" (algorithm) Header Parameter identifies the cryptographic\n       *   algorithm used to secure the JWS.  The JWS Signature value is not\n       *   valid if the \"alg\" value does not represent a supported algorithm or\n       *   if there is not a key for use with that algorithm associated with the\n       *   party that digitally signed or MACed the content.  \"alg\" values\n       *   should either be registered in the IANA \"JSON Web Signature and\n       *   Encryption Algorithms\" registry established by [JWA] or be a value\n       *   that contains a Collision-Resistant Name.  The \"alg\" value is a case-\n       *   sensitive ASCII string containing a StringOrURI value.  This Header\n       *   Parameter MUST be present and MUST be understood and processed by\n       *   implementations.\n       *\n       *   A list of defined \"alg\" values for this use can be found in the IANA\n       *   \"JSON Web Signature and Encryption Algorithms\" registry established\n       *   by [JWA]; the initial contents of this registry are the values\n       *   defined in Section 3.1 of [JWA].\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.1\n       *\n       * 4.1.1.  \"alg\" (Algorithm) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"alg\" Header Parameter defined in Section 4.1.1 of [JWS], except\n       *   that the Header Parameter identifies the cryptographic algorithm used\n       *   to encrypt or determine the value of the CEK.  The encrypted content\n       *   is not usable if the \"alg\" value does not represent a supported\n       *   algorithm, or if the recipient does not have a key that can be used\n       *   with that algorithm.\n       *\n       *   A list of defined \"alg\" values for this use can be found in the IANA\n       *   \"JSON Web Signature and Encryption Algorithms\" registry established\n       *   by [JWA]; the initial contents of this registry are the values\n       *   defined in Section 4.1 of [JWA].\n       */\n      alg: {\n        type: 'string',\n        format: 'StringOrURI'\n      },\n\n      /**\n       * jku\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.2\n       *\n       * 4.1.2.  \"jku\" (JWK Set URL) Header Parameter (JWS)\n       *\n       *   The \"jku\" (JWK Set URL) Header Parameter is a URI [RFC3986] that\n       *   refers to a resource for a set of JSON-encoded public keys, one of\n       *   which corresponds to the key used to digitally sign the JWS.  The\n       *   keys MUST be encoded as a JWK Set [JWK].  The protocol used to\n       *   acquire the resource MUST provide integrity protection; an HTTP GET\n       *   request to retrieve the JWK Set MUST use Transport Layer Security\n       *   (TLS) [RFC2818] [RFC5246]; and the identity of the server MUST be\n       *   validated, as per Section 6 of RFC 6125 [RFC6125].  Also, see\n       *   Section 8 on TLS requirements.  Use of this Header Parameter is\n       *   OPTIONAL.\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.4\n       *\n       * 4.1.4.  \"jku\" (JWK Set URL) Header Parameter (JWE)\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"jku\" Header Parameter defined in Section 4.1.2 of [JWS], except\n       *   that the JWK Set resource contains the public key to which the JWE\n       *   was encrypted; this can be used to determine the private key needed\n       *   to decrypt the JWE.\n       */\n      jku: {\n        type: 'string',\n        format: 'URI'\n      },\n\n      /**\n       * jwk\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.3\n       *\n       * 4.1.3.  \"jwk\" (JSON Web Key) Header Parameter\n       *\n       *   The \"jwk\" (JSON Web Key) Header Parameter is the public key that\n       *   corresponds to the key used to digitally sign the JWS.  This key is\n       *   represented as a JSON Web Key [JWK].  Use of this Header Parameter is\n       *   OPTIONAL.\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.5\n       *\n       * 4.1.5.  \"jwk\" (JSON Web Key) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"jwk\" Header Parameter defined in Section 4.1.3 of [JWS], except\n       *   that the key is the public key to which the JWE was encrypted; this\n       *   can be used to determine the private key needed to decrypt the JWE.\n       */\n      //jwk: JWKSchema,\n\n      /**\n       * kid\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.4\n       *\n       * 4.1.4.  \"kid\" (Key ID) Header Parameter\n       *\n       *   The \"kid\" (key ID) Header Parameter is a hint indicating which key\n       *   was used to secure the JWS.  This parameter allows originators to\n       *   explicitly signal a change of key to recipients.  The structure of\n       *   the \"kid\" value is unspecified.  Its value MUST be a case-sensitive\n       *   string.  Use of this Header Parameter is OPTIONAL.\n       *\n       *   When used with a JWK, the \"kid\" value is used to match a JWK \"kid\"\n       *   parameter value.\n       *\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.6\n       *\n       * 4.1.6.  \"kid\" (Key ID) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"kid\" Header Parameter defined in Section 4.1.4 of [JWS], except\n       *   that the key hint references the public key to which the JWE was\n       *   encrypted; this can be used to determine the private key needed to\n       *   decrypt the JWE.  This parameter allows originators to explicitly\n       *   signal a change of key to JWE recipients.\n       */\n      kid: {\n        type: 'string'\n      },\n\n      /**\n       * x5u\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.5\n       *\n       * 4.1.5.  \"x5u\" (X.509 URL) Header Parameter\n       *\n       *   The \"x5u\" (X.509 URL) Header Parameter is a URI [RFC3986] that refers\n       *   to a resource for the X.509 public key certificate or certificate\n       *   chain [RFC5280] corresponding to the key used to digitally sign the\n       *   JWS.  The identified resource MUST provide a representation of the\n       *   certificate or certificate chain that conforms to RFC 5280 [RFC5280]\n       *   in PEM-encoded form, with each certificate delimited as specified in\n       *   Section 6.1 of RFC 4945 [RFC4945].  The certificate containing the\n       *   public key corresponding to the key used to digitally sign the JWS\n       *   MUST be the first certificate.  This MAY be followed by additional\n       *   certificates, with each subsequent certificate being the one used to\n       *   certify the previous one.  The protocol used to acquire the resource\n       *   MUST provide integrity protection; an HTTP GET request to retrieve\n       *   the certificate MUST use TLS [RFC2818] [RFC5246]; and the identity of\n       *   the server MUST be validated, as per Section 6 of RFC 6125 [RFC6125].\n       *   Also, see Section 8 on TLS requirements.  Use of this Header\n       *   Parameter is OPTIONAL.\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.7\n       *\n       * 4.1.7.  \"x5u\" (X.509 URL) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"x5u\" Header Parameter defined in Section 4.1.5 of [JWS], except\n       *   that the X.509 public key certificate or certificate chain [RFC5280]\n       *   contains the public key to which the JWE was encrypted; this can be\n       *   used to determine the private key needed to decrypt the JWE.\n       */\n      x5u: {\n        type: 'string',\n        format: 'URI'\n      },\n\n      /**\n       * x5c\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.6\n       *\n       * 4.1.6.  \"x5c\" (X.509 Certificate Chain) Header Parameter\n       *\n       *   The \"x5c\" (X.509 certificate chain) Header Parameter contains the\n       *   X.509 public key certificate or certificate chain [RFC5280]\n       *   corresponding to the key used to digitally sign the JWS.  The\n       *   certificate or certificate chain is represented as a JSON array of\n       *   certificate value strings.  Each string in the array is a\n       *   base64-encoded (Section 4 of [RFC4648] -- not base64url-encoded) DER\n       *   [ITU.X690.2008] PKIX certificate value.  The certificate containing\n       *   the public key corresponding to the key used to digitally sign the\n       *   JWS MUST be the first certificate.  This MAY be followed by\n       *   additional certificates, with each subsequent certificate being the\n       *   one used to certify the previous one.  The recipient MUST validate\n       *   the certificate chain according to RFC 5280 [RFC5280] and consider\n       *   the certificate or certificate chain to be invalid if any validation\n       *   failure occurs.  Use of this Header Parameter is OPTIONAL.\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.8\n       *\n       * 4.1.8.  \"x5c\" (X.509 Certificate Chain) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"x5c\" Header Parameter defined in Section 4.1.6 of [JWS], except\n       *   that the X.509 public key certificate or certificate chain [RFC5280]\n       *   contains the public key to which the JWE was encrypted; this can be\n       *   used to determine the private key needed to decrypt the JWE.\n       */\n      x5c: {\n        type: 'array',\n        items: {\n          type: 'string',\n          format: 'base64'\n        }\n      },\n\n      /**\n       * x5t\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.7\n       *\n       * 4.1.7.  \"x5t\" (X.509 Certificate SHA-1 Thumbprint) Header Parameter\n       *\n       *   The \"x5t\" (X.509 certificate SHA-1 thumbprint) Header Parameter is a\n       *   base64url-encoded SHA-1 thumbprint (a.k.a. digest) of the DER\n       *   encoding of the X.509 certificate [RFC5280] corresponding to the key\n       *   used to digitally sign the JWS.  Note that certificate thumbprints\n       *   are also sometimes known as certificate fingerprints.  Use of this\n       *   Header Parameter is OPTIONAL.\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.9\n       *\n       * 4.1.9.  \"x5t\" (X.509 Certificate SHA-1 Thumbprint) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"x5t\" Header Parameter defined in Section 4.1.7 of [JWS], except\n       *   that the certificate referenced by the thumbprint contains the public\n       *   key to which the JWE was encrypted; this can be used to determine the\n       *   private key needed to decrypt the JWE.  Note that certificate\n       *   thumbprints are also sometimes known as certificate fingerprints.\n       */\n      x5t: {\n        type: 'string',\n        format: 'base64url'\n      },\n\n      /**\n       * x5t#S256\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.8\n       *\n       * 4.1.8.  \"x5t#S256\" (X.509 Certificate SHA-256 Thumbprint) Header\n       *         Parameter\n       *\n       *   The \"x5t#S256\" (X.509 certificate SHA-256 thumbprint) Header\n       *   Parameter is a base64url-encoded SHA-256 thumbprint (a.k.a. digest)\n       *   of the DER encoding of the X.509 certificate [RFC5280] corresponding\n       *   to the key used to digitally sign the JWS.  Note that certificate\n       *   thumbprints are also sometimes known as certificate fingerprints.\n       *   Use of this Header Parameter is OPTIONAL.\n       *\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.10\n       *\n       * 4.1.10.  \"x5t#S256\" (X.509 Certificate SHA-256 Thumbprint) Header\n       *          Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"x5t#S256\" Header Parameter defined in Section 4.1.8 of [JWS],\n       *   except that the certificate referenced by the thumbprint contains the\n       *   public key to which the JWE was encrypted; this can be used to\n       *   determine the private key needed to decrypt the JWE.  Note that\n       *   certificate thumbprints are also sometimes known as certificate\n       *   fingerprints.\n       */\n      //'x5t#S256': {\n      //  type: 'string',\n      //  format: 'base64url'\n      //},\n\n      /**\n       * crit\n       *\n       * JSON Web Signature (JWS)\n       * https://tools.ietf.org/html/rfc7515#section-4.1.11\n       *\n       * 4.1.11.  \"crit\" (Critical) Header Parameter\n       *\n       *   The \"crit\" (critical) Header Parameter indicates that extensions to\n       *   this specification and/or [JWA] are being used that MUST be\n       *   understood and processed.  Its value is an array listing the Header\n       *   Parameter names present in the JOSE Header that use those extensions.\n       *   If any of the listed extension Header Parameters are not understood\n       *   and supported by the recipient, then the JWS is invalid.  Producers\n       *   MUST NOT include Header Parameter names defined by this specification\n       *   or [JWA] for use with JWS, duplicate names, or names that do not\n       *   occur as Header Parameter names within the JOSE Header in the \"crit\"\n       *   list.  Producers MUST NOT use the empty list \"[]\" as the \"crit\"\n       *   value.  Recipients MAY consider the JWS to be invalid if the critical\n       *   list contains any Header Parameter names defined by this\n       *   specification or [JWA] for use with JWS or if any other constraints\n       *   on its use are violated.  When used, this Header Parameter MUST be\n       *   integrity protected; therefore, it MUST occur only within the JWS\n       *   Protected Header.  Use of this Header Parameter is OPTIONAL.  This\n       *   Header Parameter MUST be understood and processed by implementations.\n       *\n       *   An example use, along with a hypothetical \"exp\" (expiration time)\n       *   field is:\n       *\n       *     {\"alg\":\"ES256\",\n       *     \"crit\":[\"exp\"],\n       *     \"exp\":1363284000\n       *     }\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.13\n       *\n       *   4.1.13.  \"crit\" (Critical) Header Parameter\n       *\n       *   This parameter has the same meaning, syntax, and processing rules as\n       *   the \"crit\" Header Parameter defined in Section 4.1.11 of [JWS],\n       *   except that Header Parameters for a JWE are being referred to, rather\n       *   than Header Parameters for a JWS.\n       */\n      crit: {\n        type: 'array',\n        items: {\n          type: 'string'\n        },\n        minItems: 1\n      },\n\n      /**\n       * enc\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.2\n       *\n       * 4.1.2.  \"enc\" (Encryption Algorithm) Header Parameter\n       *\n       *   The \"enc\" (encryption algorithm) Header Parameter identifies the\n       *   content encryption algorithm used to perform authenticated encryption\n       *   on the plaintext to produce the ciphertext and the Authentication\n       *   Tag.  This algorithm MUST be an AEAD algorithm with a specified key\n       *   length.  The encrypted content is not usable if the \"enc\" value does\n       *   not represent a supported algorithm.  \"enc\" values should either be\n       *   registered in the IANA \"JSON Web Signature and Encryption Algorithms\"\n       *   registry established by [JWA] or be a value that contains a\n       *   Collision-Resistant Name.  The \"enc\" value is a case-sensitive ASCII\n       *   string containing a StringOrURI value.  This Header Parameter MUST be\n       *   present and MUST be understood and processed by implementations.\n       *\n       *   A list of defined \"enc\" values for this use can be found in the IANA\n       *   \"JSON Web Signature and Encryption Algorithms\" registry established\n       *   by [JWA]; the initial contents of this registry are the values\n       *   defined in Section 5.1 of [JWA].\n       */\n      enc: {\n        type: 'string',\n        format: 'StringOrURI'\n      },\n\n      /**\n       * zip\n       *\n       * JSON Web Encryption (JWE)\n       * https://tools.ietf.org/html/rfc7516#section-4.1.3\n       *\n       * 4.1.3.  \"zip\" (Compression Algorithm) Header Parameter\n       *\n       *   The \"zip\" (compression algorithm) applied to the plaintext before\n       *   encryption, if any.  The \"zip\" value defined by this specification\n       *   is:\n       *\n       *   o  \"DEF\" - Compression with the DEFLATE [RFC1951] algorithm\n       *\n       *   Other values MAY be used.  Compression algorithm values can be\n       *   registered in the IANA \"JSON Web Encryption Compression Algorithms\"\n       *   registry established by [JWA].  The \"zip\" value is a case-sensitive\n       *   string.  If no \"zip\" parameter is present, no compression is applied\n       *   to the plaintext before encryption.  When used, this Header Parameter\n       *   MUST be integrity protected; therefore, it MUST occur only within the\n       *   JWE Protected Header.  Use of this Header Parameter is OPTIONAL.\n       *   This Header Parameter MUST be understood and processed by\n       *   implementations.\n       */\n      zip: {\n        type: 'string'\n      }\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = JOSEHeaderSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _slicedToArray = function () {\n    function sliceIterator(arr, i) {\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _e = undefined;\n\n      try {\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i[\"return\"]) _i[\"return\"]();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n\n      return _arr;\n    }\n\n    return function (arr, i) {\n      if (Array.isArray(arr)) {\n        return arr;\n      } else if (Symbol.iterator in Object(arr)) {\n        return sliceIterator(arr, i);\n      } else {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n      }\n    };\n  }();\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  /**\n   * Dependencies\n   */\n\n\n  var base64url = __webpack_require__(39);\n\n  var JWA = __webpack_require__(38);\n\n  var _require = __webpack_require__(55),\n      DataError = _require.DataError;\n  /**\n   * JWS\n   */\n\n\n  var JWS = function () {\n    function JWS() {\n      _classCallCheck(this, JWS);\n    }\n\n    _createClass(JWS, null, [{\n      key: 'sign',\n\n      /**\n       * sign\n       *\n       * @description\n       * Encode a JWT instance\n       *\n       * @param {Object} token\n       * @returns {Promise}\n       */\n      value: function sign(token) {\n        var payload = base64url(JSON.stringify(token.payload)); // compact serialization\n\n        if (token.serialization === 'compact') {\n          var key = token.key,\n              alg = token.header.alg;\n          var header = base64url(JSON.stringify(token.header));\n          var data = header + '.' + payload;\n          return JWA.sign(alg, key, data).then(function (signature) {\n            return data + '.' + signature;\n          });\n        } // JSON serialization\n\n\n        if (token.serialization === 'json') {} // Flattened serialization\n\n\n        if (token.serialization === 'flattened') {}\n\n        return Promise.reject(new DataError('Unsupported serialization'));\n      }\n      /**\n       * verify\n       */\n\n    }, {\n      key: 'verify',\n      value: function verify(jwt) {\n        // multiple signatures\n        if (jwt.signatures) {// ...\n        }\n\n        var key = jwt.key,\n            signature = jwt.signature,\n            alg = jwt.header.alg; // one signature\n\n        if (jwt.signature) {\n          var _jwt$segments = _slicedToArray(jwt.segments, 2),\n              header = _jwt$segments[0],\n              payload = _jwt$segments[1];\n\n          var data = header + '.' + payload;\n\n          if (alg === 'none') {\n            return Promise.reject(new DataError('Signature provided to verify with alg: none'));\n          }\n\n          return JWA.verify(alg, key, signature, data).then(function (verified) {\n            jwt.verified = verified;\n            return verified;\n          });\n        }\n\n        if (alg === 'none') {\n          if (!key && !signature) {\n            jwt.verified = true;\n            return Promise.resolve(true);\n          }\n\n          if (key) {\n            return Promise.reject(new DataError('Key provided to verify signature with alg: none'));\n          }\n        } // no signatures to verify\n\n\n        return Promise.reject(new DataError('Missing signature(s)'));\n      }\n    }]);\n\n    return JWS;\n  }();\n  /**\n   * Export\n   */\n\n\n  module.exports = JWS;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /* WEBPACK VAR INJECTION */\n  (function (Buffer) {\n    /**\n    * Dependencies\n    */\n    const assert = __webpack_require__(21);\n\n    const base64url = __webpack_require__(39);\n\n    const crypto = __webpack_require__(49);\n\n    const {\n      JWT\n    } = __webpack_require__(37);\n\n    const FormUrlEncoded = __webpack_require__(69);\n\n    const {\n      URL\n    } = __webpack_require__(27);\n    /**\n     * Authentication Request\n     */\n\n\n    class AuthenticationRequest {\n      /**\n       * create\n       *\n       * @description\n       * Create a new authentication request with generated state and nonce,\n       * validate presence of required parameters, serialize the request data and\n       * persist it to the session, and return a promise for an authentication\n       * request URI.\n       *\n       * @param {RelyingParty} rp  instance of RelyingParty\n       * @param {Object} options - optional request parameters\n       * @param {Object} session  reference to localStorage or other session object\n       *\n       * @returns {Promise}\n       */\n      static create(rp, options, session) {\n        const {\n          provider,\n          defaults,\n          registration\n        } = rp;\n        let issuer, endpoint, client, params;\n        return Promise.resolve().then(() => {\n          // validate presence of OP configuration, RP client registration,\n          // and default parameters\n          assert(provider.configuration, 'RelyingParty provider OpenID Configuration is missing');\n          assert(defaults.authenticate, 'RelyingParty default authentication parameters are missing');\n          assert(registration, 'RelyingParty client registration is missing'); // define basic elements of the request\n\n          issuer = provider.configuration.issuer;\n          endpoint = provider.configuration.authorization_endpoint;\n          client = {\n            client_id: registration.client_id\n          };\n          params = Object.assign(defaults.authenticate, client, options); // validate presence of required configuration and parameters\n\n          assert(issuer, 'Missing issuer in provider OpenID Configuration');\n          assert(endpoint, 'Missing authorization_endpoint in provider OpenID Configuration');\n          assert(params.scope, 'Missing scope parameter in authentication request');\n          assert(params.response_type, 'Missing response_type parameter in authentication request');\n          assert(params.client_id, 'Missing client_id parameter in authentication request');\n          assert(params.redirect_uri, 'Missing redirect_uri parameter in authentication request'); // generate state and nonce random octets\n\n          params.state = Array.from(crypto.getRandomValues(new Uint8Array(16)));\n          params.nonce = Array.from(crypto.getRandomValues(new Uint8Array(16))); // hash the state and nonce parameter values\n\n          return Promise.all([crypto.subtle.digest({\n            name: 'SHA-256'\n          }, new Uint8Array(params.state)), crypto.subtle.digest({\n            name: 'SHA-256'\n          }, new Uint8Array(params.nonce))]);\n        }) // serialize the request with original values, store in session by\n        // encoded state param, and replace state/nonce octets with encoded\n        // digests\n        .then(digests => {\n          let state = base64url(Buffer.from(digests[0]));\n          let nonce = base64url(Buffer.from(digests[1]));\n          let key = `${issuer}/requestHistory/${state}`; // store the request params for response validation\n          // with serialized octet values for state and nonce\n\n          session[key] = JSON.stringify(params); // replace state and nonce octets with base64url encoded digests\n\n          params.state = state;\n          params.nonce = nonce;\n        }).then(() => AuthenticationRequest.generateSessionKeys()).then(sessionKeys => {\n          AuthenticationRequest.storeSessionKeys(sessionKeys, params, session);\n        }) // optionally encode a JWT with the request parameters\n        // and replace params with `{ request: <jwt> }\n        .then(() => {\n          if (provider.configuration.request_parameter_supported) {\n            return AuthenticationRequest.encodeRequestParams(params).then(encodedParams => {\n              params = encodedParams;\n            });\n          }\n        }) // render the request URI and terminate the algorithm\n        .then(() => {\n          let url = new URL(endpoint);\n          url.search = FormUrlEncoded.encode(params);\n          return url.href;\n        });\n      }\n\n      static generateSessionKeys() {\n        return crypto.subtle.generateKey({\n          name: \"RSASSA-PKCS1-v1_5\",\n          modulusLength: 2048,\n          publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n          hash: {\n            name: \"SHA-256\"\n          }\n        }, true, [\"sign\", \"verify\"]).then(keyPair => {\n          // returns a keypair object\n          return Promise.all([crypto.subtle.exportKey('jwk', keyPair.publicKey), crypto.subtle.exportKey('jwk', keyPair.privateKey)]);\n        }).then(jwkPair => {\n          let [publicJwk, privateJwk] = jwkPair;\n          return {\n            public: publicJwk,\n            private: privateJwk\n          };\n        });\n      }\n\n      static storeSessionKeys(sessionKeys, params, session) {\n        // store the private one in session, public one goes into params\n        session['oidc.session.privateKey'] = JSON.stringify(sessionKeys.private);\n        params.key = sessionKeys.public;\n      }\n\n      static encodeRequestParams(params) {\n        const excludeParams = ['scope', 'client_id', 'response_type', 'state'];\n        const keysToEncode = Object.keys(params).filter(key => !excludeParams.includes(key));\n        let payload = {};\n        keysToEncode.forEach(key => {\n          payload[key] = params[key];\n        });\n        let requestParamJwt = new JWT({\n          header: {\n            alg: 'none'\n          },\n          payload\n        }, {\n          filter: false\n        });\n        return requestParamJwt.encode().then(requestParamCompact => {\n          let newParams = {\n            scope: params['scope'],\n            client_id: params['client_id'],\n            response_type: params['response_type'],\n            request: requestParamCompact,\n            state: params['state']\n          };\n          return newParams;\n        });\n      }\n\n    }\n    /**\n     * Export\n     */\n\n\n    module.exports = AuthenticationRequest;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(41).Buffer);\n  /***/\n}, function (module, exports) {\n  /**\n   * Dependencies\n   */\n\n  /**\n   * FormUrlEncoded\n   */\n  class FormUrlEncoded {\n    /**\n     * Encode\n     *\n     * @description\n     * Represent an object as x-www-form-urlencoded string.\n     *\n     * @param {Object} data\n     * @returns {string}\n     */\n    static encode(data) {\n      let pairs = [];\n      Object.keys(data).forEach(function (key) {\n        pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n      });\n      return pairs.join('&');\n    }\n    /**\n     * Decode\n     *\n     * @description\n     * Parse a x-www-form-urlencoded into an object.\n     *\n     * @param {string} data\n     * @returns {Object}\n     */\n\n\n    static decode(data) {\n      let obj = {};\n      data.split('&').forEach(function (property) {\n        let pair = property.split('=');\n        let key = decodeURIComponent(pair[0]);\n        let val = decodeURIComponent(pair[1]);\n        obj[key] = val;\n      });\n      return obj;\n    }\n\n  }\n  /**\n   * Export\n   */\n\n\n  module.exports = FormUrlEncoded;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /* WEBPACK VAR INJECTION */\n  (function (global, Buffer) {\n    /**\n    * Dependencies\n    */\n    const {\n      URL\n    } = __webpack_require__(27);\n\n    const assert = __webpack_require__(21);\n\n    const crypto = __webpack_require__(49);\n\n    const base64url = __webpack_require__(39);\n\n    const fetch = __webpack_require__(5);\n\n    const Headers = fetch.Headers ? fetch.Headers : global.Headers;\n\n    const FormUrlEncoded = __webpack_require__(69);\n\n    const IDToken = __webpack_require__(71);\n\n    const Session = __webpack_require__(73);\n\n    const onHttpError = __webpack_require__(74);\n\n    const HttpError = __webpack_require__(76);\n    /**\n     * AuthenticationResponse\n     */\n\n\n    class AuthenticationResponse {\n      /**\n       * @param rp {RelyingParty}\n       * @param [redirect] {string} req.query\n       * @param [body] {string} req.body.text\n       * @param session {Session|Storage} req.session or localStorage or similar\n       * @param params {object} hashmap\n       * @param mode {string} 'query'/'fragment'/'form_post',\n       *   determined in `parseResponse()`\n       */\n      constructor({\n        rp,\n        redirect,\n        body,\n        session,\n        mode,\n        params = {}\n      }) {\n        this.rp = rp;\n        this.redirect = redirect;\n        this.body = body;\n        this.session = session;\n        this.mode = mode;\n        this.params = params;\n      }\n      /**\n       * validateResponse\n       *\n       * @description\n       * Authentication response validation.\n       *\n       * @param {string|Object} response\n       *\n       * @returns {Promise<Session>}\n       */\n\n\n      static validateResponse(response) {\n        return Promise.resolve(response).then(this.parseResponse).then(this.errorResponse).then(this.matchRequest).then(this.validateStateParam).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(Session.fromAuthResponse);\n      }\n      /**\n       * parseResponse\n       *\n       * @param {object} response\n       *\n       * @returns {object}\n       */\n\n\n      static parseResponse(response) {\n        let {\n          redirect,\n          body\n        } = response; // response must be either a redirect uri or request body, but not both\n\n        if (redirect && body || !redirect && !body) {\n          throw new HttpError(400, 'Invalid response mode');\n        } // parse redirect uri\n\n\n        if (redirect) {\n          let url = new URL(redirect);\n          let {\n            search,\n            hash\n          } = url;\n\n          if (search && hash || !search && !hash) {\n            throw new HttpError(400, 'Invalid response mode');\n          }\n\n          if (search) {\n            response.params = FormUrlEncoded.decode(search.substring(1));\n            response.mode = 'query';\n          }\n\n          if (hash) {\n            response.params = FormUrlEncoded.decode(hash.substring(1));\n            response.mode = 'fragment';\n          }\n        } // parse request form body\n\n\n        if (body) {\n          response.params = FormUrlEncoded.decode(body);\n          response.mode = 'form_post';\n        }\n\n        return response;\n      }\n      /**\n       * errorResponse\n       *\n       * @param {AuthenticationResponse} response\n       *\n       * @throws {Error} If response params include the OAuth2 'error' param,\n       *   throws an error based on it.\n       *\n       * @returns {AuthenticationResponse} Chainable\n       *\n       * @todo Figure out HTTP status code (typically 400, 401 or 403)\n       *   based on the OAuth2/OIDC `error` code, probably using an external library\n       */\n\n\n      static errorResponse(response) {\n        const errorCode = response.params.error;\n\n        if (errorCode) {\n          const errorParams = {};\n          errorParams['error'] = errorCode;\n          errorParams['error_description'] = response.params['error_description'];\n          errorParams['error_uri'] = response.params['error_uri'];\n          errorParams['state'] = response.params['state'];\n          const error = new Error(`AuthenticationResponse error: ${errorCode}`);\n          error.info = errorParams;\n          throw error;\n        }\n\n        return response;\n      }\n      /**\n       * matchRequest\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static matchRequest(response) {\n        let {\n          rp,\n          params,\n          session\n        } = response;\n        let state = params.state;\n        let issuer = rp.provider.configuration.issuer;\n\n        if (!state) {\n          throw new Error('Missing state parameter in authentication response');\n        }\n\n        let key = `${issuer}/requestHistory/${state}`;\n        let request = session[key];\n\n        if (!request) {\n          throw new Error('Mismatching state parameter in authentication response');\n        }\n\n        response.request = JSON.parse(request);\n        return response;\n      }\n      /**\n       * validateStateParam\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateStateParam(response) {\n        let octets = new Uint8Array(response.request.state);\n        let encoded = response.params.state;\n        return crypto.subtle.digest({\n          name: 'SHA-256'\n        }, octets).then(digest => {\n          if (encoded !== base64url(Buffer.from(digest))) {\n            throw new Error('Mismatching state parameter in authentication response');\n          }\n\n          return response;\n        });\n      }\n      /**\n       * validateResponseMode\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateResponseMode(response) {\n        if (response.request.response_type !== 'code' && response.mode === 'query') {\n          throw new Error('Invalid response mode');\n        }\n\n        return response;\n      }\n      /**\n       * validateResponseParams\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateResponseParams(response) {\n        let {\n          request,\n          params\n        } = response;\n        let expectedParams = request.response_type.split(' ');\n\n        if (expectedParams.includes('code')) {\n          assert(params.code, 'Missing authorization code in authentication response'); // TODO assert novelty of code\n        }\n\n        if (expectedParams.includes('id_token')) {\n          assert(params.id_token, 'Missing id_token in authentication response');\n        }\n\n        if (expectedParams.includes('token')) {\n          assert(params.access_token, 'Missing access_token in authentication response');\n          assert(params.token_type, 'Missing token_type in authentication response');\n        }\n\n        return response;\n      }\n      /**\n       * exchangeAuthorizationCode\n       *\n       * @param {Object} response\n       * @returns {Promise} response object\n       */\n\n\n      static exchangeAuthorizationCode(response) {\n        let {\n          rp,\n          params,\n          request\n        } = response;\n        let code = params.code; // only exchange the authorization code when the response type is \"code\"\n\n        if (!code || request['response_type'] !== 'code') {\n          return Promise.resolve(response);\n        }\n\n        let {\n          provider,\n          registration\n        } = rp;\n        let id = registration['client_id'];\n        let secret = registration['client_secret']; // verify the client is not public\n\n        if (!secret) {\n          return Promise.reject(new Error('Client cannot exchange authorization code because ' + 'it is not a confidential client'));\n        } // initialize token request arguments\n\n\n        let endpoint = provider.configuration.token_endpoint;\n        let method = 'POST'; // initialize headers\n\n        let headers = new Headers({\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }); // initialize the token request parameters\n\n        let bodyContents = {\n          'grant_type': 'authorization_code',\n          'code': code,\n          'redirect_uri': request['redirect_uri'] // determine client authentication method\n\n        };\n        let authMethod = registration['token_endpoint_auth_method'] || 'client_secret_basic'; // client secret basic authentication\n\n        if (authMethod === 'client_secret_basic') {\n          let credentials = new Buffer(`${id}:${secret}`).toString('base64');\n          headers.set('Authorization', `Basic ${credentials}`);\n        } // client secret post authentication\n\n\n        if (authMethod === 'client_secret_post') {\n          bodyContents['client_id'] = id;\n          bodyContents['client_secret'] = secret;\n        }\n\n        let body = FormUrlEncoded.encode(bodyContents); // TODO\n        // client_secret_jwt authentication\n        // private_key_jwt\n        // make the token request\n\n        return fetch(endpoint, {\n          method,\n          headers,\n          body\n        }).then(onHttpError('Error exchanging authorization code')).then(tokenResponse => tokenResponse.json()).then(tokenResponse => {\n          assert(tokenResponse['access_token'], 'Missing access_token in token response');\n          assert(tokenResponse['token_type'], 'Missing token_type in token response');\n          assert(tokenResponse['id_token'], 'Missing id_token in token response'); // anything else?\n          // IS THIS THE RIGHT THING TO DO HERE?\n\n          response.params = Object.assign(response.params, tokenResponse);\n          return response;\n        });\n      }\n      /**\n       * validateIDToken\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateIDToken(response) {\n        // only validate the ID Token if present in the response\n        if (!response.params.id_token) {\n          return Promise.resolve(response);\n        }\n\n        return Promise.resolve(response).then(AuthenticationResponse.decryptIDToken).then(AuthenticationResponse.decodeIDToken).then(AuthenticationResponse.validateIssuer).then(AuthenticationResponse.validateAudience).then(AuthenticationResponse.resolveKeys).then(AuthenticationResponse.verifySignature).then(AuthenticationResponse.validateExpires).then(AuthenticationResponse.verifyNonce).then(AuthenticationResponse.validateAcr).then(AuthenticationResponse.validateAuthTime).then(AuthenticationResponse.validateAccessTokenHash).then(AuthenticationResponse.validateAuthorizationCodeHash);\n      }\n      /**\n       * decryptIDToken\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static decryptIDToken(response) {\n        // TODO\n        return Promise.resolve(response);\n      }\n      /**\n       * decodeIDToken\n       *\n       * Note: If the `id_token` is not present in params, this method does not\n       * get called (short-circuited in `validateIDToken()`).\n       *\n       * @param response {AuthenticationResponse}\n       * @param response.params {object}\n       * @param [response.params.id_token] {string} IDToken encoded as a JWT\n       *\n       * @returns {AuthenticationResponse} Chainable\n       */\n\n\n      static decodeIDToken(response) {\n        let jwt = response.params.id_token;\n\n        try {\n          response.decoded = IDToken.decode(jwt);\n        } catch (decodeError) {\n          const error = new HttpError(400, 'Error decoding ID Token');\n          error.cause = decodeError;\n          error.info = {\n            id_token: jwt\n          };\n          throw error;\n        }\n\n        return response;\n      }\n      /**\n       * validateIssuer\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateIssuer(response) {\n        let configuration = response.rp.provider.configuration;\n        let payload = response.decoded.payload; // validate issuer of token matches this relying party's provider\n\n        if (payload.iss !== configuration.issuer) {\n          throw new Error('Mismatching issuer in ID Token');\n        }\n\n        return response;\n      }\n      /**\n       * validateAudience\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateAudience(response) {\n        let registration = response.rp.registration;\n        let {\n          aud,\n          azp\n        } = response.decoded.payload; // validate audience includes this relying party\n\n        if (typeof aud === 'string' && aud !== registration['client_id']) {\n          throw new Error('Mismatching audience in id_token');\n        } // validate audience includes this relying party\n\n\n        if (Array.isArray(aud) && !aud.includes(registration['client_id'])) {\n          throw new Error('Mismatching audience in id_token');\n        } // validate authorized party is present if required\n\n\n        if (Array.isArray(aud) && !azp) {\n          throw new Error('Missing azp claim in id_token');\n        } // validate authorized party is this relying party\n\n\n        if (azp && azp !== registration['client_id']) {\n          throw new Error('Mismatching azp claim in id_token');\n        }\n\n        return response;\n      }\n      /**\n       * resolveKeys\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static resolveKeys(response) {\n        let rp = response.rp;\n        let provider = rp.provider;\n        let decoded = response.decoded;\n        return Promise.resolve(provider.jwks).then(jwks => jwks ? jwks : rp.jwks()).then(jwks => {\n          if (decoded.resolveKeys(jwks)) {\n            return Promise.resolve(response);\n          } else {\n            throw new Error('Cannot resolve signing key for ID Token');\n          }\n        });\n      }\n      /**\n       * verifySignature\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static verifySignature(response) {\n        let alg = response.decoded.header.alg;\n        let registration = response.rp.registration;\n        let expectedAlgorithm = registration['id_token_signed_response_alg'] || 'RS256'; // validate signing algorithm matches expectation\n\n        if (alg !== expectedAlgorithm) {\n          throw new Error(`Expected ID Token to be signed with ${expectedAlgorithm}`);\n        }\n\n        return response.decoded.verify().then(verified => {\n          if (!verified) {\n            throw new Error('Invalid ID Token signature');\n          }\n\n          return response;\n        });\n      }\n      /**\n       * validateExpires\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateExpires(response) {\n        let exp = response.decoded.payload.exp; // validate expiration of token\n\n        if (exp <= Math.floor(Date.now() / 1000)) {\n          throw new Error('Expired ID Token');\n        }\n\n        return response;\n      }\n      /**\n       * verifyNonce\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static verifyNonce(response) {\n        let octets = new Uint8Array(response.request.nonce);\n        let nonce = response.decoded.payload.nonce;\n\n        if (!nonce) {\n          throw new Error('Missing nonce in ID Token');\n        }\n\n        return crypto.subtle.digest({\n          name: 'SHA-256'\n        }, octets).then(digest => {\n          if (nonce !== base64url(Buffer.from(digest))) {\n            throw new Error('Mismatching nonce in ID Token');\n          }\n\n          return response;\n        });\n      }\n      /**\n       * validateAcr\n       *\n       * @param {Object} response\n       * @returns {Object}\n       */\n\n\n      static validateAcr(response) {\n        // TODO\n        return response;\n      }\n      /**\n       * validateAuthTime\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateAuthTime(response) {\n        // TODO\n        return response;\n      }\n      /**\n       * validateAccessTokenHash\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateAccessTokenHash(response) {\n        // TODO\n        return response;\n      }\n      /**\n       * validateAuthorizationCodeHash\n       *\n       * @param {Object} response\n       * @returns {Promise}\n       */\n\n\n      static validateAuthorizationCodeHash(response) {\n        // TODO\n        return response;\n      }\n\n    }\n    /**\n     * Export\n     */\n\n\n    module.exports = AuthenticationResponse;\n    /* WEBPACK VAR INJECTION */\n  }).call(this, __webpack_require__(20), __webpack_require__(41).Buffer);\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /**\n   * Local dependencies\n   */\n  const {\n    JWT\n  } = __webpack_require__(37);\n\n  const IDTokenSchema = __webpack_require__(72);\n  /**\n   * IDToken\n   */\n\n\n  class IDToken extends JWT {\n    /**\n     * Schema\n     */\n    static get schema() {\n      return IDTokenSchema;\n    }\n\n  }\n  /**\n   * Export\n   */\n\n\n  module.exports = IDToken;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /**\n   * Local dependencies\n   */\n  const {\n    JWTSchema\n  } = __webpack_require__(37);\n  /**\n   * IDToken Schema\n   */\n\n\n  const IDTokenSchema = JWTSchema.extend({\n    properties: {\n      /**\n       * header\n       * http://openid.net/specs/openid-connect-core-1_0.html#IDToken\n       * ID Tokens SHOULD NOT use the JWS or JWE x5u, x5c, jku, or jwk Header\n       * Parameter fields. Instead, references to keys used are communicated in\n       * advance using Discovery and Registration parameters, per Section 10.\n       */\n      header: {//not: { required: ['x5u', 'x5c', 'jku', 'jwk'] }\n      },\n\n      /**\n       * payload\n       */\n      payload: {\n        properties: {\n          /**\n           * iss\n           *\n           * REQUIRED. Issuer Identifier for the Issuer of the response.\n           * The iss value is a case sensitive URL using the https scheme\n           * that contains scheme, host, and optionally, port number and\n           * path components and no query or fragment components.\n           */\n          iss: {\n            type: 'string',\n            format: 'url'\n          },\n\n          /**\n           * sub\n           *\n           * REQUIRED. Subject Identifier. A locally unique and never\n           * reassigned identifier within the Issuer for the End-User, which\n           * is intended to be consumed by the Client, e.g., 24400320 or\n           * AItOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4. It MUST NOT exceed 255\n           * ASCII characters in length. The sub value is a case sensitive\n           * string.\n           */\n          sub: {\n            type: 'string',\n            maxLength: 255\n          },\n\n          /**\n           * aud\n           *\n           * REQUIRED. Audience(s) that this ID Token is intended for. It\n           * MUST contain the OAuth 2.0 client_id of the Relying Party as an\n           * audience value. It MAY also contain identifiers for other audiences.\n           * In the general case, the aud value is an array of case sensitive\n           * strings. In the common special case when there is one audience,\n           * the aud value MAY be a single case sensitive string.\n           */\n          // inherited from JWTClaimsSetSchema\n\n          /**\n           * exp\n           *\n           * REQUIRED. Expiration time on or after which the ID Token MUST NOT\n           * be accepted for processing. The processing of this parameter\n           * requires that the current date/time MUST be before the expiration\n           * date/time listed in the value. Implementers MAY provide for some\n           * small leeway, usually no more than a few minutes, to account for\n           * clock skew. Its value is a JSON number representing the number of\n           * seconds from 1970-01-01T0:0:0Z as measured in UTC until the\n           * date/time. See RFC 3339 [RFC3339] for details regarding date/times\n           * in general and UTC in particular.\n           */\n          // inherited from JWTClaimsSetSchema\n\n          /**\n           * iat\n           *\n           * REQUIRED. Time at which the JWT was issued. Its value is a\n           * JSON number representing the number of seconds from\n           * 1970-01-01T0:0:0Z as measured in UTC until the date/time.\n           */\n          // inherited from JWTClaimsSetSchema\n\n          /**\n           * auth_time\n           *\n           * Time when the End-User authentication occurred. Its value is a\n           * JSON number representing the number of seconds from\n           * 1970-01-01T0:0:0Z as measured in UTC until the date/time. When a\n           * max_age request is made or when auth_time is requested as an\n           * Essential Claim, then this Claim is REQUIRED; otherwise, its\n           * inclusion is OPTIONAL. (The auth_time Claim semantically\n           * corresponds to the OpenID 2.0 PAPE [OpenID.PAPE] auth_time\n           * response parameter.)\n           */\n          auth_time: {\n            type: 'integer',\n            format: 'NumericDate'\n          },\n\n          /**\n           * nonce\n           *\n           * String value used to associate a Client session with an ID Token,\n           * and to mitigate replay attacks. The value is passed through\n           * unmodified from the Authentication Request to the ID Token. If\n           * present in the ID Token, Clients MUST verify that the nonce Claim\n           * Value is equal to the value of the nonce parameter sent in the\n           * Authentication Request. If present in the Authentication Request,\n           * Authorization Servers MUST include a nonce Claim in the ID Token\n           * with the Claim Value being the nonce value sent in the\n           * Authentication Request. Authorization Servers SHOULD perform no\n           * other processing on nonce values used. The nonce value is a case\n           * sensitive string.\n           */\n          nonce: {\n            type: 'string'\n          },\n\n          /**\n           * acr\n           *\n           * OPTIONAL. Authentication Context Class Reference. String\n           * specifying an Authentication Context Class Reference value that\n           * identifies the Authentication Context Class that the authentication\n           * performed satisfied. The value \"0\" indicates the End-User\n           * authentication did not meet the requirements of ISO/IEC 29115\n           * [ISO29115] level 1. Authentication using a long-lived browser\n           * cookie, for instance, is one example where the use of \"level 0\" is\n           * appropriate. Authentications with level 0 SHOULD NOT be used to\n           * authorize access to any resource of any monetary value. (This\n           * corresponds to the OpenID 2.0 PAPE [OpenID.PAPE] nist_auth_level\n           * 0.) An absolute URI or an RFC 6711 [RFC6711] registered name\n           * SHOULD be used as the acr value; registered names MUST NOT be used\n           * with a different meaning than that which is registered. Parties\n           * using this claim will need to agree upon the meanings of the\n           * values used, which may be context-specific. The acr value is a\n           * case sensitive string.\n           */\n          acr: {\n            type: 'string'\n          },\n\n          /**\n           * amr\n           * OPTIONAL. Authentication Methods References. JSON array of strings\n           * that are identifiers for authentication methods used in the\n           * authentication. For instance, values might indicate that both\n           * password and OTP authentication methods were used. The definition\n           * of particular values to be used in the amr Claim is beyond the\n           * scope of this specification. Parties using this claim will need to\n           * agree upon the meanings of the values used, which may be context-\n           * specific. The amr value is an array of case sensitive strings.\n           */\n          amr: {\n            type: 'array',\n            items: {\n              type: 'string'\n            }\n          },\n\n          /**\n           * azp\n           * OPTIONAL. Authorized party - the party to which the ID Token was\n           * issued. If present, it MUST contain the OAuth 2.0 Client ID of this\n           * party. This Claim is only needed when the ID Token has a single\n           * audience value and that audience is different than the authorized\n           * party. It MAY be included even when the authorized party is the\n           * same as the sole audience. The azp value is a case sensitive string\n           * containing a StringOrURI value.\n           */\n          azp: {\n            type: 'string',\n            format: 'StringOrURI'\n          }\n        },\n\n        /**\n         * Required Claims\n         */\n        required: ['iss', 'sub', 'aud', 'exp', 'iat']\n      }\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = IDTokenSchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  const fetch = __webpack_require__(5);\n\n  const onHttpError = __webpack_require__(74);\n\n  const PoPToken = __webpack_require__(75);\n\n  class Session {\n    /**\n     * @param options {Object}\n     *\n     * @param options.credentialType {string} 'access_token' or 'pop_token'\n     *\n     * @param options.issuer {string} Identity provider (issuer of ID/Access Token)\n     *\n     * @param options.authorization {object}\n     * @param options.authorization.client_id {string} OIDC/OAuth2 client id\n     * @param [options.authorization.id_token] {string} Compact-serialized id_token param\n     * @param [options.authorization.access_token] {string} Compact-serialized access_token param\n     * @param [options.authorization.refresh_token] {string} Compact-serialized refresh_token\n     *\n     * @param [options.sessionKey] {string} Serialized client session key generated\n     *   during the Authentication Request, used to issue PoPTokens\n     *\n     * @param [options.idClaims] {object} Decoded/verified ID Token JWT payload\n     *\n     * @param [options.accessClaims] {object} Decoded/verified Access Token JWT payload\n     */\n    constructor(options) {\n      this.credentialType = options.credentialType || 'access_token';\n      this.issuer = options.issuer;\n      this.authorization = options.authorization || {};\n      this.sessionKey = options.sessionKey;\n      this.idClaims = options.idClaims;\n      this.accessClaims = options.accessClaims;\n    }\n\n    static from(options) {\n      return new Session(options);\n    }\n    /**\n     * @param response {AuthenticationResponse}\n     *\n     * @returns {Session} RelyingParty Session object\n     */\n\n\n    static fromAuthResponse(response) {\n      const RelyingParty = __webpack_require__(19); // import here due to circular dep\n\n\n      let idClaims = response.decoded && response.decoded.payload || {};\n      let {\n        rp\n      } = response;\n      let registration = rp.registration;\n      let rpAuthOptions = rp.defaults.authenticate || {};\n      let credentialType = rpAuthOptions['credential_type'] || rp.defaults.popToken ? 'pop_token' : 'access_token';\n      let sessionKey = response.session[RelyingParty.SESSION_PRIVATE_KEY];\n      let options = {\n        credentialType,\n        sessionKey,\n        issuer: idClaims.iss,\n        idClaims,\n        authorization: {\n          client_id: registration['client_id'],\n          access_token: response.params['access_token'],\n          id_token: response.params['id_token'],\n          refresh_token: response.params['refresh_token']\n        }\n      };\n      return Session.from(options);\n    }\n    /**\n     * Authenticated fetch() getter\n     *\n     * @returns {function}\n     */\n\n\n    get fetch() {\n      /**\n       * fetch() function signature\n       *\n       * @param url {RequestInfo|string}\n       * @param options {object}\n       *\n       * @returns {Function<Promise<Response>>}\n       */\n      return (url, options) => {\n        return Promise.resolve().then(() => {\n          if (this.hasCredentials()) {\n            return this.fetchWithCredentials(url, options);\n          } else {\n            return fetch(url, options);\n          }\n        }).then(onHttpError('Error while fetching resource'));\n      };\n    }\n    /**\n     * bearerTokenFor\n     *\n     * @param url {string}\n     *\n     * @returns {Promise<string>}\n     */\n\n\n    bearerTokenFor(url) {\n      switch (this.credentialType) {\n        case 'pop_token':\n          return PoPToken.issueFor(url, this);\n\n        default:\n          // 'access_token' etc\n          return Promise.resolve(this.authorization[this.credentialType]);\n      }\n    }\n    /**\n     * hasCredentials\n     *\n     * @returns {boolean}\n     */\n\n\n    hasCredentials() {\n      switch (this.credentialType) {\n        case 'pop_token':\n          return !!this.authorization['id_token'];\n\n        default:\n          // 'access_token' etc\n          return !!this.authorization[this.credentialType];\n      }\n    }\n    /**\n     * fetchWithCredentials\n     *\n     * @param url {RequestInfo|string}\n     * @param options {object}\n     *\n     * @returns {Promise<Response>}\n     */\n\n\n    fetchWithCredentials(url, options = {}) {\n      options.headers = options.headers || {};\n      return this.bearerTokenFor(url).then(token => {\n        options.headers.authorization = `Bearer ${token}`;\n        return fetch(url, options);\n      });\n    }\n\n  }\n\n  module.exports = Session;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n  /**\n   * Throws an error when a fetch response status code indicates a 400 or 500\n   * HTTP error. (The whatwg fetch api does not normally reject on http error\n   * responses).\n   *\n   * Usage:\n   *\n   * ```\n   * return fetch(url)\n   *   .then(onHttpError('Error while fetching resource')\n   *   .catch(err => console.log(err))\n   *\n   * // -> 'Error while fetching resource: 404 Not Found' error\n   * // if a 404 response is encountered\n   * ```\n   *\n   * @param [message] {string} Optional error message to clarify context\n   *\n   * @throws {Error} For http status codes > 300\n   *\n   * @return {Object} fetch response object (passed through if no error)\n   */\n\n  function onHttpError(message = 'fetch error') {\n    return response => {\n      if (response.status >= 200 && response.status < 300) {\n        return response;\n      }\n\n      let errorMessage = `${message}: ${response.status} ${response.statusText}`;\n      let error = new Error(errorMessage);\n      error.response = response;\n      error.statusCode = response.status;\n      throw error;\n    };\n  }\n\n  module.exports = onHttpError;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  const {\n    URL\n  } = __webpack_require__(27);\n\n  const {\n    JWT,\n    JWK\n  } = __webpack_require__(37);\n\n  const DEFAULT_MAX_AGE = 3600; // Default token expiration, in seconds\n\n  class PoPToken extends JWT {\n    /**\n     * @param resourceServerUri {string} RS URI for which this token is intended\n     *\n     * @param session {Session}\n     * @param session.sessionKey {string}\n     * @param session.authorization.client_id {string}\n     * @param session.authorization.id_token {string}\n     *\n     * @returns {Promise<string>} PoPToken, encoded as compact JWT\n     */\n    static issueFor(resourceServerUri, session) {\n      if (!resourceServerUri) {\n        throw new Error('Cannot issue PoPToken - missing resource server URI');\n      }\n\n      if (!session.sessionKey) {\n        throw new Error('Cannot issue PoPToken - missing session key');\n      }\n\n      if (!session.authorization.id_token) {\n        throw new Error('Cannot issue PoPToken - missing id token');\n      }\n\n      let jwk = JSON.parse(session.sessionKey);\n      return JWK.importKey(jwk).then(importedSessionJwk => {\n        let options = {\n          aud: new URL(resourceServerUri).origin,\n          key: importedSessionJwk,\n          iss: session.authorization.client_id,\n          id_token: session.authorization.id_token\n        };\n        return PoPToken.issue(options);\n      }).then(jwt => {\n        return jwt.encode();\n      });\n    }\n    /**\n     * issue\n     *\n     * @param options {Object}\n     * @param options.iss {string} Token issuer (RP client_id)\n     * @param options.aud {string|Array<string>} Audience for the token\n     *   (such as the Resource Server url)\n     * @param options.key {JWK} Proof of Possession (private) signing key, see\n     *   https://tools.ietf.org/html/rfc7800#section-3.1\n     *\n     * @param options.id_token {string} JWT compact encoded ID Token\n     *\n     * Optional:\n     * @param [options.iat] {number} Issued at timestamp (in seconds)\n     * @param [options.max] {number} Max token lifetime in seconds\n     *\n     * @returns {PoPToken} Proof of Possession Token (JWT instance)\n     */\n\n\n    static issue(options) {\n      let {\n        aud,\n        iss,\n        key\n      } = options;\n      let alg = key.alg;\n      let iat = options.iat || Math.floor(Date.now() / 1000);\n      let max = options.max || DEFAULT_MAX_AGE;\n      let exp = iat + max; // token expiration\n\n      let header = {\n        alg\n      };\n      let payload = {\n        iss,\n        aud,\n        exp,\n        iat,\n        id_token: options.id_token,\n        token_type: 'pop'\n      };\n      let jwt = new PoPToken({\n        header,\n        payload,\n        key: key.cryptoKey\n      }, {\n        filter: false\n      });\n      return jwt;\n    }\n\n  }\n\n  module.exports = PoPToken;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  exports = module.exports = HttpError;\n\n  var StandardError = __webpack_require__(77);\n\n  var STATUS_CODE_TO_NAME = __webpack_require__(78);\n\n  var STATUS_NAME_TO_CODE = exports;\n\n  function HttpError(code, msg, props) {\n    if (typeof code == \"string\") code = STATUS_NAME_TO_CODE[code];\n    if (typeof code != \"number\") throw new TypeError(\"Non-numeric HTTP code\");\n\n    if (typeof msg == \"object\" && msg != null) {\n      props = msg;\n      msg = null;\n    }\n\n    StandardError.call(this, msg || STATUS_CODE_TO_NAME[code], props);\n    this.code = code;\n  }\n\n  HttpError.prototype = Object.create(StandardError.prototype, {\n    constructor: {\n      value: HttpError,\n      configurable: true,\n      writable: true\n    }\n  }); // Set name explicitly for when the code gets minified.\n\n  HttpError.prototype.name = \"HttpError\";\n  Object.defineProperties(HttpError.prototype, {\n    statusCode: alias(\"code\"),\n    statusMessage: alias(\"message\"),\n    status: {\n      configurable: true,\n      get: function () {\n        return this.code;\n      },\n      set: function (value) {\n        Object.defineProperty(this, \"status\", {\n          value: value,\n          configurable: true,\n          enumerable: true,\n          writable: true\n        });\n      }\n    }\n  });\n\n  HttpError.prototype.toString = function () {\n    return this.name + \": \" + this.code + \" \" + this.message;\n  };\n\n  for (var code in STATUS_CODE_TO_NAME) {\n    var name = STATUS_CODE_TO_NAME[code];\n    exports[name.replace(\"'\", \"\").replace(/[- ]/g, \"_\").toUpperCase()] = +code;\n  }\n\n  function alias(name) {\n    return {\n      configurable: true,\n      get: function () {\n        return this[name];\n      },\n      set: function (value) {\n        return this[name] = value;\n      }\n    };\n  }\n  /***/\n\n}, function (module, exports) {\n  var has = Object.hasOwnProperty;\n  var proto = Object.getPrototypeOf;\n  var trace = Error.captureStackTrace;\n  module.exports = StandardError;\n\n  function StandardError(msg, props) {\n    // Let all properties be enumerable for easier serialization.\n    if (msg && typeof msg == \"object\") props = msg, msg = undefined;else this.message = msg; // Name has to be an own property (or on the prototype a single step up) for\n    // the stack to be printed with the correct name.\n\n    if (props) for (var key in props) this[key] = props[key];\n    if (!has.call(this, \"name\")) this.name = has.call(proto(this), \"name\") ? this.name : this.constructor.name;\n    if (trace && !(\"stack\" in this)) trace(this, this.constructor);\n  }\n\n  StandardError.prototype = Object.create(Error.prototype, {\n    constructor: {\n      value: StandardError,\n      configurable: true,\n      writable: true\n    }\n  }); // Set name explicitly for when the code gets minified.\n\n  StandardError.prototype.name = \"StandardError\";\n  /***/\n}, function (module) {\n  module.exports = JSON.parse(\"{\\\"100\\\":\\\"Continue\\\",\\\"101\\\":\\\"Switching Protocols\\\",\\\"102\\\":\\\"Processing\\\",\\\"200\\\":\\\"OK\\\",\\\"201\\\":\\\"Created\\\",\\\"202\\\":\\\"Accepted\\\",\\\"203\\\":\\\"Non-Authoritative Information\\\",\\\"204\\\":\\\"No Content\\\",\\\"205\\\":\\\"Reset Content\\\",\\\"206\\\":\\\"Partial Content\\\",\\\"207\\\":\\\"Multi-Status\\\",\\\"208\\\":\\\"Already Reported\\\",\\\"226\\\":\\\"IM Used\\\",\\\"300\\\":\\\"Multiple Choices\\\",\\\"301\\\":\\\"Moved Permanently\\\",\\\"302\\\":\\\"Found\\\",\\\"303\\\":\\\"See Other\\\",\\\"304\\\":\\\"Not Modified\\\",\\\"305\\\":\\\"Use Proxy\\\",\\\"307\\\":\\\"Temporary Redirect\\\",\\\"308\\\":\\\"Permanent Redirect\\\",\\\"400\\\":\\\"Bad Request\\\",\\\"401\\\":\\\"Unauthorized\\\",\\\"402\\\":\\\"Payment Required\\\",\\\"403\\\":\\\"Forbidden\\\",\\\"404\\\":\\\"Not Found\\\",\\\"405\\\":\\\"Method Not Allowed\\\",\\\"406\\\":\\\"Not Acceptable\\\",\\\"407\\\":\\\"Proxy Authentication Required\\\",\\\"408\\\":\\\"Request Timeout\\\",\\\"409\\\":\\\"Conflict\\\",\\\"410\\\":\\\"Gone\\\",\\\"411\\\":\\\"Length Required\\\",\\\"412\\\":\\\"Precondition Failed\\\",\\\"413\\\":\\\"Payload Too Large\\\",\\\"414\\\":\\\"URI Too Long\\\",\\\"415\\\":\\\"Unsupported Media Type\\\",\\\"416\\\":\\\"Range Not Satisfiable\\\",\\\"417\\\":\\\"Expectation Failed\\\",\\\"418\\\":\\\"I'm a teapot\\\",\\\"421\\\":\\\"Misdirected Request\\\",\\\"422\\\":\\\"Unprocessable Entity\\\",\\\"423\\\":\\\"Locked\\\",\\\"424\\\":\\\"Failed Dependency\\\",\\\"425\\\":\\\"Unordered Collection\\\",\\\"426\\\":\\\"Upgrade Required\\\",\\\"428\\\":\\\"Precondition Required\\\",\\\"429\\\":\\\"Too Many Requests\\\",\\\"431\\\":\\\"Request Header Fields Too Large\\\",\\\"500\\\":\\\"Internal Server Error\\\",\\\"501\\\":\\\"Not Implemented\\\",\\\"502\\\":\\\"Bad Gateway\\\",\\\"503\\\":\\\"Service Unavailable\\\",\\\"504\\\":\\\"Gateway Timeout\\\",\\\"505\\\":\\\"HTTP Version Not Supported\\\",\\\"506\\\":\\\"Variant Also Negotiates\\\",\\\"507\\\":\\\"Insufficient Storage\\\",\\\"508\\\":\\\"Loop Detected\\\",\\\"509\\\":\\\"Bandwidth Limit Exceeded\\\",\\\"510\\\":\\\"Not Extended\\\",\\\"511\\\":\\\"Network Authentication Required\\\"}\");\n  /***/\n}, function (module, exports, __webpack_require__) {\n  /**\n   * Dependencies\n   */\n  const {\n    JSONSchema\n  } = __webpack_require__(28);\n  /**\n   * RelyingParty Schema\n   *\n   * This schema initializes and verifies Relying Party client configuration.\n   * RelyingParty objects can be persisted and rehydrated. By encapsulating this data in\n   * it's own class, it's possible to have multiple RP configurations running\n   * simultaneously.\n   */\n\n\n  const RelyingPartySchema = new JSONSchema({\n    type: 'object',\n    properties: {\n      /**\n       * provider\n       *\n       * Information about the provider, including issuer URL, human readable name,\n       * and any configuration or provider metadata retrieved from the OP.\n       */\n      provider: {\n        type: 'object',\n        properties: {\n          name: {\n            type: 'string'\n          },\n          url: {\n            type: 'string',\n            format: 'uri'\n          },\n          // NOTE:\n          // OpenID Configuration (discovery response) and JSON Web Keys Set for an\n          // issuer can be cached here. However the cache should not be persisted or\n          // relied upon.\n          //\n          configuration: {},\n          // .well-known/openid-configuration\n          jwks: {} // /jwks\n\n        },\n        required: ['url']\n      },\n\n      /**\n       * defaults\n       *\n       * Default request parameters for authentication and dynamic registration requests.\n       * These values can be extended or overridden via arguments to the respective\n       * request methods.\n       *\n       * These are part of the relying party client configuration and can be serialized\n       * and persisted.\n       */\n      defaults: {\n        type: 'object',\n        properties: {\n          /**\n           * Use Proof of Possession token semantics for the ID Token\n           */\n          popToken: {\n            type: 'boolean',\n            default: false\n          },\n\n          /**\n           * Default authentication request parameters\n           */\n          authenticate: {\n            type: 'object',\n            properties: {\n              redirect_uri: {\n                type: 'string',\n                format: 'uri'\n              },\n              response_type: {\n                type: 'string',\n                default: 'id_token token',\n                // browser detection\n                enum: ['code', 'token', 'id_token token', 'id_token token code']\n              },\n              display: {\n                type: 'string',\n                default: 'page',\n                enum: ['page', 'popup']\n              },\n              scope: {\n                type: ['string', 'array'],\n                default: ['openid']\n              }\n            }\n          },\n\n          /**\n           * Default client registration parameters\n           */\n          register: {}\n        }\n      },\n\n      /**\n       * registration\n       *\n       * This is the client registration response from dynamic registration. It should\n       * always reflect the client configuration on the openid provider. A client access\n       * token is stored here\n       */\n      registration: {},\n      // ClientMetadataSchema\n\n      /**\n       * store\n       */\n      store: {\n        type: 'object',\n        default: {}\n      }\n    }\n  });\n  /**\n   * Export\n   */\n\n  module.exports = RelyingPartySchema;\n  /***/\n}, function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var _require = __webpack_require__(27),\n      URL = _require.URL;\n\n  var _require2 = __webpack_require__(37),\n      JWT = _require2.JWT,\n      JWK = _require2.JWK;\n\n  var DEFAULT_MAX_AGE = 3600; // Default token expiration, in seconds\n\n  var PoPToken = function (_JWT) {\n    _inherits(PoPToken, _JWT);\n\n    function PoPToken() {\n      _classCallCheck(this, PoPToken);\n\n      return _possibleConstructorReturn(this, (PoPToken.__proto__ || Object.getPrototypeOf(PoPToken)).apply(this, arguments));\n    }\n\n    _createClass(PoPToken, null, [{\n      key: 'issueFor',\n\n      /**\n       * @param resourceServerUri {string} RS URI for which this token is intended\n       *\n       * @param session {Session}\n       * @param session.sessionKey {string}\n       * @param session.authorization.client_id {string}\n       * @param session.authorization.id_token {string}\n       *\n       * @returns {Promise<string>} PoPToken, encoded as compact JWT\n       */\n      value: function issueFor(resourceServerUri, session) {\n        if (!resourceServerUri) {\n          throw new Error('Cannot issue PoPToken - missing resource server URI');\n        }\n\n        if (!session.sessionKey) {\n          throw new Error('Cannot issue PoPToken - missing session key');\n        }\n\n        if (!session.authorization.id_token) {\n          throw new Error('Cannot issue PoPToken - missing id token');\n        }\n\n        var jwk = JSON.parse(session.sessionKey);\n        return JWK.importKey(jwk).then(function (importedSessionJwk) {\n          var options = {\n            aud: new URL(resourceServerUri).origin,\n            key: importedSessionJwk,\n            iss: session.authorization.client_id,\n            id_token: session.authorization.id_token\n          };\n          return PoPToken.issue(options);\n        }).then(function (jwt) {\n          return jwt.encode();\n        });\n      }\n      /**\n       * issue\n       *\n       * @param options {Object}\n       * @param options.iss {string} Token issuer (RP client_id)\n       * @param options.aud {string|Array<string>} Audience for the token\n       *   (such as the Resource Server url)\n       * @param options.key {JWK} Proof of Possession (private) signing key, see\n       *   https://tools.ietf.org/html/rfc7800#section-3.1\n       *\n       * @param options.id_token {string} JWT compact encoded ID Token\n       *\n       * Optional:\n       * @param [options.iat] {number} Issued at timestamp (in seconds)\n       * @param [options.max] {number} Max token lifetime in seconds\n       *\n       * @returns {PoPToken} Proof of Possession Token (JWT instance)\n       */\n\n    }, {\n      key: 'issue',\n      value: function issue(options) {\n        var aud = options.aud,\n            iss = options.iss,\n            key = options.key;\n        var alg = key.alg;\n        var iat = options.iat || Math.floor(Date.now() / 1000);\n        var max = options.max || DEFAULT_MAX_AGE;\n        var exp = iat + max; // token expiration\n\n        var header = {\n          alg: alg\n        };\n        var payload = {\n          iss: iss,\n          aud: aud,\n          exp: exp,\n          iat: iat,\n          id_token: options.id_token,\n          token_type: 'pop'\n        };\n        var jwt = new PoPToken({\n          header: header,\n          payload: payload,\n          key: key.cryptoKey\n        }, {\n          filter: false\n        });\n        return jwt;\n      }\n    }]);\n\n    return PoPToken;\n  }(JWT);\n\n  module.exports = PoPToken;\n  /***/\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"openIdpPopup\", function () {\n    return openIdpPopup;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"obtainSession\", function () {\n    return obtainSession;\n  });\n  /* harmony export (binding) */\n\n\n  __webpack_require__.d(__webpack_exports__, \"popupHandler\", function () {\n    return popupHandler;\n  });\n  /* harmony import */\n\n\n  var _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);\n  /* harmony import */\n\n\n  var _url_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n\n  function openIdpPopup(popupUri) {\n    const width = 650;\n    const height = 400;\n    const left = window.screenX + (window.innerWidth - width) / 2;\n    const top = window.screenY + (window.innerHeight - height) / 2;\n    const settings = \"width=\".concat(width, \",height=\").concat(height, \",left=\").concat(left, \",top=\").concat(top);\n    return window.open(popupUri, 'solid-auth-client', settings);\n  }\n\n  function obtainSession(store, popup, options) {\n    return new Promise((resolve, reject) => {\n      const popupServer = new _ipc__WEBPACK_IMPORTED_MODULE_0__[\"Server\"](popup, Object(_url_util__WEBPACK_IMPORTED_MODULE_1__[\"originOf\"])(options.popupUri || ''), popupHandler(store, options, session => {\n        popupServer.stop();\n        resolve(session);\n      }));\n      popupServer.start();\n    });\n  }\n\n  function popupHandler(store, _ref, foundSessionCb) {\n    let {\n      popupUri,\n      callbackUri\n    } = _ref;\n    return async function (method) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      switch (method) {\n        // Origin\n        case 'getAppOrigin':\n          return window.location.origin;\n        // Storage\n\n        case 'storage/getItem':\n          return store.getItem(...args);\n\n        case 'storage/setItem':\n          return store.setItem(...args);\n\n        case 'storage/removeItem':\n          return store.removeItem(...args);\n        // Login\n\n        case 'getLoginOptions':\n          return {\n            popupUri,\n            callbackUri\n          };\n\n        case 'foundSession':\n          foundSessionCb(...args);\n      }\n    };\n  }\n  /***/\n\n}])[\"default\"];","map":{"version":3,"sources":["/Users/mark/localRepos/StarBrightlyShining/node_modules/meld-clients-core/node_modules/solid-auth-client/browser/index.js"],"names":["module","exports","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_solid_auth_client__WEBPACK_IMPORTED_MODULE_0__","auth","getOwnPropertyNames","forEach","window","console","warn","warned","SolidAuthClient","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default","events__WEBPACK_IMPORTED_MODULE_1__","events__WEBPACK_IMPORTED_MODULE_1___default","_authn_fetch__WEBPACK_IMPORTED_MODULE_2__","_popup__WEBPACK_IMPORTED_MODULE_3__","_session__WEBPACK_IMPORTED_MODULE_4__","_storage__WEBPACK_IMPORTED_MODULE_5__","_url_util__WEBPACK_IMPORTED_MODULE_6__","_webid_oidc__WEBPACK_IMPORTED_MODULE_7__","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread","target","arguments","length","source","getOwnPropertyDescriptors","defineProperties","globalFetch","fetch","a","constructor","input","options","emit","login","idp","defaultLoginOptions","popupLogin","test","popupUri","URL","location","toString","callbackUri","popup","session","storage","currentSession","undefined","_pendingSession","err","error","trackSession","callback","on","stopTrackSession","removeListener","logout","url","split","_defineProperty","obj","configurable","writable","R","Reflect","ReflectApply","receiver","args","Function","ReflectOwnKeys","concat","ProcessEmitWarning","warning","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","set","arg","RangeError","getPrototypeOf","setMaxListeners","$getMaxListeners","that","getMaxListeners","type","doError","events","er","Error","message","context","handler","len","listeners","arrayClone","_addListener","listener","prepend","existing","TypeError","newListener","unshift","w","String","emitter","count","addListener","prependListener","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","once","prependOnceListener","list","position","originalListener","shift","spliceOne","off","removeAllListeners","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","arr","copy","Array","index","pop","ret","authnFetch","isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__","isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default","_url_util__WEBPACK_IMPORTED_MODULE_1__","_host__WEBPACK_IMPORTED_MODULE_2__","_session__WEBPACK_IMPORTED_MODULE_3__","_webid_oidc__WEBPACK_IMPORTED_MODULE_4__","shouldShareCredentials","resp","status","requestHost","requiresAuth","currentUrl","currentUrlNoParams","navigateTo","originOf","toUrlString","getLocation","href","pathname","origin","getHost","saveHost","updateHostFromResponse","_session__WEBPACK_IMPORTED_MODULE_1__","_storage__WEBPACK_IMPORTED_MODULE_2__","_webid_oidc__WEBPACK_IMPORTED_MODULE_3__","host","hosts","_ref","data","getSession","saveSession","clearSession","_storage__WEBPACK_IMPORTED_MODULE_1__","NAMESPACE","defaultStorage","getData","updateStorage","asyncStorage","memStorage","ipcStorage","_ipc__WEBPACK_IMPORTED_MODULE_0__","hasLocalStorage","localStorage","store","serialized","getItem","JSON","parse","e","update","currentData","newData","setItem","stringify","Promise","resolve","val","removeItem","client","request","Server","Client","clientWindow","clientOrigin","handle","_clientWindow","_clientOrigin","_handler","_messageListener","event","_handleMessage","req","method","id","postMessage","start","addEventListener","stop","removeEventListener","serverWindow","serverOrigin","_serverWindow","_serverOrigin","Math","random","_len","_key","reject","responseListener","timeout","setTimeout","_ref2","clearTimeout","getRegisteredRp","fetchWithCredentials","_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default","auth_header__WEBPACK_IMPORTED_MODULE_2__","auth_header__WEBPACK_IMPORTED_MODULE_2___default","_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__","_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default","_solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4__","_solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4___default","_url_util__WEBPACK_IMPORTED_MODULE_5__","_storage__WEBPACK_IMPORTED_MODULE_6__","rp","saveAppHashFragment","sendAuthRequest","getStoredRp","hash","restoreAppHashFragment","storeData","validateResponse","webId","idClaims","sub","issuer","credentials","provider","registration","redirect_uris","includes","registerRp","storeRp","rpConfig","from","opts","responseType","clientNameI18n","entries","_","startsWith","replace","supplementaryOptions","logo_uri","logoUri","contacts","client_name","clientName","grant_types","response_types","scope","defaults","authenticate","redirect_uri","response_type","register","_ref3","createRequest","appHashFragment","_ref4","wwwAuthHeader","headers","scheme","params","origHeaders","popToken","issueFor","authorization","objectWithoutPropertiesLoose","_objectWithoutProperties","excluded","sourceSymbolKeys","indexOf","propertyIsEnumerable","_objectWithoutPropertiesLoose","sourceKeys","_format","default","_parse","_interopRequireDefault","_util","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","iterator","isArray","arr2","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","_i","_s","next","done","xxx","isToken","quote","build","reduce","prev","values","transform","map","challenge","_default","token","isScheme","join","unquote","str","substr","body","normalize","_cur","cur","charAt","trim","parseProperties","string","res","exec","global","assert","Headers","JSONDocument","JWKSet","AuthenticationRequest","AuthenticationResponse","RelyingPartySchema","onHttpError","FormUrlEncoded","RelyingParty","schema","validation","validate","valid","jwks","then","importKeys","assign","discover","response","json","configuration","registration_endpoint","uri","serialize","jwks_uri","match","redirect","authResponse","userinfo","userinfo_endpoint","access_token","logoutRequest","id_token_hint","post_logout_redirect_uri","end_session_endpoint","log","search","encode","SESSION_PRIVATE_KEY","popTokenFor","idToken","PoPToken","g","objectAssign","compare","b","x","y","min","isBuffer","Buffer","_isBuffer","util","hasOwn","pSlice","slice","functionsHaveNames","foo","pToString","isView","arrbuf","ArrayBuffer","DataView","buffer","ok","regex","getName","func","isFunction","AssertionError","actual","expected","operator","generatedMessage","getMessage","stackStartFunction","fail","captureStackTrace","stack","out","fn_name","idx","next_line","substring","inherits","truncate","inspect","something","rawname","self","equal","notEqual","deepEqual","_deepEqual","deepStrictEqual","strict","memos","isDate","getTime","isRegExp","multiline","lastIndex","ignoreCase","Float32Array","Float64Array","Uint8Array","actualIndex","objEquiv","isArguments","actualVisitedObjects","isPrimitive","aIsArgs","bIsArgs","ka","objectKeys","kb","sort","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","expectedException","isPrototypeOf","_tryBlock","block","_throws","shouldThrow","userProvidedMessage","isUnwantedException","isError","isUnexpectedException","throws","doesNotThrow","ifError","propIsEnumerable","toObject","shouldUseNative","test1","test2","fromCharCode","order2","test3","letter","to","process","descriptors","formatRegExp","format","f","isString","objects","isNull","isObject","deprecate","fn","msg","noDeprecation","deprecated","throwDeprecation","traceDeprecation","trace","debugs","debugEnviron","debuglog","isUndefined","env","NODE_DEBUG","toUpperCase","RegExp","pid","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","style","arrayToHash","array","recurseTimes","primitive","formatPrimitive","visibleKeys","formatError","Date","base","braces","toUTCString","output","formatArray","formatProperty","reduceToSingleString","simple","isNumber","desc","line","numLinesEst","ar","isNullOrUndefined","isSymbol","re","objectToString","pad","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","add","prop","kCustomPromisifiedSymbol","promisify","original","promiseResolve","promiseReject","promise","setPrototypeOf","custom","callbackifyOnRejected","reason","cb","newReason","callbackify","callbackified","maybeCb","nextTick","rej","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","Item","title","browser","argv","version","versions","noop","binding","cwd","chdir","dir","umask","fill","readUInt8","ctor","superCtor","super_","TempCtor","Formats","Initializer","JSONMapping","JSONPatch","JSONPointer","JSONSchema","Validator","_createClass","props","descriptor","Constructor","protoProps","staticProps","_classCallCheck","instance","DATETIME_REGEXP","URI_REGEXP","EMAIL_REGEXP","IPV4_REGEXP","IPV6_REGEXP","HOSTNAME_REGEXP","pattern","initialize","formats","_typeof","root","level","compile","declarations","properties","items","member","item","declaration","additionalProperties","additionalItems","subschema","initializer","_index","alternate","patch","ops","select","project","mapping","deserialize","THROW","RECOVER","SILENT","OPERATIONS","_this","operation","op","path","pointer","remove","move","expr","tokens","parseURIFragmentIdentifier","parseJSONString","escape","unescape","toJSONString","decodeURIComponent","toURIFragmentIdentifier","encodeURIComponent","current","splice","parseInt","Map","right","left","writeable","extend","extender","result","indexCount","validator","address","require","required","number","enum","anyOf","allOf","not","oneOf","types","conditions","keywords","validations","constraints","keyword","_enum","enumerated","isRequired","segment","otherProperties","patternValidations","additionalValidations","patternProperties","_schema","otherPropertiesCalled","minProperties","maxProperties","dependencies","dependency","_schema2","counter","minItems","maxItems","uniqueItems","minLength","maxLength","matcher","minimum","_schema3","exclusiveMinimum","maximum","_schema4","exclusiveMaximum","multipleOf","decimals","toFixed","pow","condition","JWA","JWK","JWT","JWS","Base64URLSchema","JOSEHeaderSchema","JWKSchema","JWKSetSchema","JWTClaimsSetSchema","JWTSchema","base64url","supportedAlgorithms","_require","NotSupportedError","sign","alg","normalizedAlgorithm","verify","signature","importKey","pad_string_1","encoding","fromBase64","decode","toBase64","base64","toBuffer","ieee754","SlowBuffer","INSPECT_MAX_BYTES","TYPED_ARRAY_SUPPORT","typedArraySupport","kMaxLength","__proto__","subarray","byteLength","createBuffer","encodingOrOffset","allocUnsafe","poolSize","_augment","fromArrayBuffer","fromString","fromObject","species","assertSize","size","alloc","checked","allocUnsafeSlow","isEncoding","write","fromArrayLike","byteOffset","isnan","toLowerCase","pos","buf","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","equals","max","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","toHex","bytes","newBuf","sliceLen","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","floor","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","code","charCodeAt","INVALID_BASE64_RE","base64clean","stringtrim","units","Infinity","leadSurrogate","byteArray","hi","lo","toByteArray","src","dst","lookup","revLookup","Arr","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","curByte","tripletToBase64","num","encodeChunk","uint8","extraBytes","parts","maxChunkLength","len2","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","padString","segmentLength","stringLength","diff","padLength","paddedStringLength","None","HMAC","RSASSA_PKCS1_v1_5","SupportedAlgorithms","define","crypto","TextEncoder","algorithm","subtle","assertSufficientKeyLength","bitlength","jwk","usages","use","key_ops","cryptoKey","operations","argument","registeredAlgorithms","SyntaxError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","_Error","DataError","_JSONDocument","_require2","BASE64_REGEXP","kty","kid","x5u","x5c","x5t","imported","importing","all","isJWE","header","enc","resolveKeys","find","JWE","encrypt","ExtendedJWT","jwt","signatures","recipients","serialization","segments","payload","verified","protected","unprotected","iv","aad","ciphertext","tag","encrypted_key","iss","aud","exp","nbf","iat","jti","typ","cty","jku","crit","zip","sliceIterator","_jwt$segments","endpoint","authorization_endpoint","client_id","getRandomValues","nonce","digest","digests","generateSessionKeys","sessionKeys","storeSessionKeys","request_parameter_supported","encodeRequestParams","encodedParams","generateKey","modulusLength","publicExponent","keyPair","exportKey","publicKey","privateKey","jwkPair","publicJwk","privateJwk","public","private","excludeParams","keysToEncode","requestParamJwt","requestParamCompact","newParams","pairs","pair","IDToken","Session","HttpError","parseResponse","errorResponse","matchRequest","validateStateParam","validateResponseMode","validateResponseParams","exchangeAuthorizationCode","validateIDToken","fromAuthResponse","errorCode","errorParams","info","octets","encoded","expectedParams","id_token","token_type","secret","token_endpoint","bodyContents","authMethod","tokenResponse","decryptIDToken","decodeIDToken","validateIssuer","validateAudience","verifySignature","validateExpires","verifyNonce","validateAcr","validateAuthTime","validateAccessTokenHash","validateAuthorizationCodeHash","decoded","decodeError","cause","azp","expectedAlgorithm","now","IDTokenSchema","auth_time","acr","amr","credentialType","sessionKey","accessClaims","rpAuthOptions","refresh_token","hasCredentials","bearerTokenFor","errorMessage","statusText","statusCode","DEFAULT_MAX_AGE","resourceServerUri","importedSessionJwk","issue","StandardError","STATUS_CODE_TO_NAME","STATUS_NAME_TO_CODE","alias","statusMessage","has","proto","display","_JWT","openIdpPopup","obtainSession","popupHandler","width","height","screenX","innerWidth","top","screenY","innerHeight","settings","open","popupServer","foundSessionCb"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,MAAI+H,gBAAgB,GAAG,IAAI/H,UAAJ,CAAe;AACpCziB,IAAAA,IAAI,EAAE,QAD8B;AAEpCikB,IAAAA,UAAU,EAAE;AAEV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI+X,MAAAA,GAAG,EAAE;AACHh8B,QAAAA,IAAI,EAAE;AADH,OAvEK;;AA2EV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIi8B,MAAAA,GAAG,EAAE;AACHj8B,QAAAA,IAAI,EAAE,QADH;AAEHunB,QAAAA,IAAI,EAAE,CAAC,KAAD;AAFH,OAzIK;;AA8IV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI2D,MAAAA,GAAG,EAAE;AACHlrB,QAAAA,IAAI,EAAE,QADH;AAEHwa,QAAAA,MAAM,EAAE;AAFL,OAzLK;;AA8LV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI0hB,MAAAA,GAAG,EAAE;AACHl8B,QAAAA,IAAI,EAAE,QADH;AAEHwa,QAAAA,MAAM,EAAE;AAFL,OA5NK;;AAiOV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;;AAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIqf,MAAAA,GAAG,EAAE;AACH75B,QAAAA,IAAI,EAAE;AADH,OAxRK;;AA4RV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI85B,MAAAA,GAAG,EAAE;AACH95B,QAAAA,IAAI,EAAE,QADH;AAEHwa,QAAAA,MAAM,EAAE;AAFL,OAhUK;;AAqUV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIuf,MAAAA,GAAG,EAAE;AACH/5B,QAAAA,IAAI,EAAE,OADH;AAEHkkB,QAAAA,KAAK,EAAE;AACLlkB,UAAAA,IAAI,EAAE,QADD;AAELwa,UAAAA,MAAM,EAAE;AAFH;AAFJ,OAvWK;;AA+WV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIwf,MAAAA,GAAG,EAAE;AACHh6B,QAAAA,IAAI,EAAE,QADH;AAEHwa,QAAAA,MAAM,EAAE;AAFL,OA1YK;;AA+YV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACA;AACA;AACA;;AAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI2hB,MAAAA,IAAI,EAAE;AACJn8B,QAAAA,IAAI,EAAE,OADF;AAEJkkB,QAAAA,KAAK,EAAE;AACLlkB,UAAAA,IAAI,EAAE;AADD,SAFH;AAKJkpB,QAAAA,QAAQ,EAAE;AALN,OA/dI;;AAueV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIoR,MAAAA,GAAG,EAAE;AACHt6B,QAAAA,IAAI,EAAE,QADH;AAEHwa,QAAAA,MAAM,EAAE;AAFL,OAhgBK;;AAqgBV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI4hB,MAAAA,GAAG,EAAE;AACHp8B,QAAAA,IAAI,EAAE;AADH;AA7hBK;AAFwB,GAAf,CAAvB;AAqiBA;AA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B,aAAOmvB,aAAP;AACD;;AANuB;AAS1B;AACA;AACA;;;AAGA7pC,EAAAA,MAAM,CAACC,OAAP,GAAiBknC,OAAjB;AAEA;AAAO,CA3oXG,EA6oXH,UAASnnC,MAAT,EAAiBC,OAAjB,EAA0BG,mBAA1B,EAA+C;AAEtD;AACA;AACA;AACA,QAAM;AACJozB,IAAAA;AADI,MAEFpzB,mBAAmB,CAAC,EAAD,CAFvB;AAGA;AACA;AACA;;;AAGA,QAAMypC,aAAa,GAAGrW,SAAS,CAAC9D,MAAV,CAAiB;AACrC7C,IAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACA;AACA;AACA;AACA;AACIoW,MAAAA,MAAM,EAAE,CAAC;AAAD,OARE;;AAWV;AACJ;AACA;AACIY,MAAAA,OAAO,EAAE;AACPhX,QAAAA,UAAU,EAAE;AACV;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACQyX,UAAAA,GAAG,EAAE;AACH17B,YAAAA,IAAI,EAAE,QADH;AAEHwa,YAAAA,MAAM,EAAE;AAFL,WATK;;AAcV;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ7P,UAAAA,GAAG,EAAE;AACH3K,YAAAA,IAAI,EAAE,QADH;AAEHspB,YAAAA,SAAS,EAAE;AAFR,WAxBK;;AA6BV;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ;;AAEA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ;;AAEA;AACR;AACA;AACA;AACA;AACA;AACA;AACQ;;AAEA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ4X,UAAAA,SAAS,EAAE;AACTlhC,YAAAA,IAAI,EAAE,SADG;AAETwa,YAAAA,MAAM,EAAE;AAFC,WA7ED;;AAkFV;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQmiB,UAAAA,KAAK,EAAE;AACL38B,YAAAA,IAAI,EAAE;AADD,WAjGG;;AAqGV;AACR;AACA;AACA;AACA;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","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n // Export a singleton instance of SolidAuthClient\n\nconst auth = new _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n/* harmony default export */ __webpack_exports__[\"default\"] = (auth); // Bind methods to instance, so they can be invoked as regular functions\n// (e.g., to pass around the fetch function)\n\nObject.getOwnPropertyNames(_solid_auth_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype).forEach(property => {\n  const value = auth[property];\n\n  if (typeof value === 'function') {\n    auth[property] = value.bind(auth);\n  }\n}); // Expose window.SolidAuthClient for backward compatibility\n\nif (typeof window !== 'undefined') {\n  if ('SolidAuthClient' in window) {\n    console.warn('Caution: multiple versions of solid-auth-client active.');\n  } else {\n    let warned = false;\n    Object.defineProperty(window, 'SolidAuthClient', {\n      enumerable: true,\n      get: () => {\n        if (!warned) {\n          warned = true;\n          console.warn('window.SolidAuthClient has been deprecated.');\n          console.warn('Please use window.solid.auth instead.');\n        }\n\n        return auth;\n      }\n    });\n  }\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SolidAuthClient; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _authn_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);\n/* harmony import */ var _popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(81);\n/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8);\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9);\n/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6);\n/* harmony import */ var _webid_oidc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11);\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* global fetch */\n\n\n\n\n\n\n // Store the global fetch, so the user is free to override it\n\nconst globalFetch = fetch;\nclass SolidAuthClient extends events__WEBPACK_IMPORTED_MODULE_1___default.a {\n  constructor() {\n    super(...arguments);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_pendingSession\", void 0);\n  }\n\n  fetch(input, options) {\n    this.emit('request', Object(_url_util__WEBPACK_IMPORTED_MODULE_6__[\"toUrlString\"])(input));\n    return Object(_authn_fetch__WEBPACK_IMPORTED_MODULE_2__[\"authnFetch\"])(Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])(), globalFetch, input, options);\n  }\n\n  login(idp, options) {\n    options = _objectSpread({}, defaultLoginOptions(Object(_url_util__WEBPACK_IMPORTED_MODULE_6__[\"currentUrlNoParams\"])()), {}, options);\n    return _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[\"login\"](idp, options);\n  }\n\n  async popupLogin(options) {\n    options = _objectSpread({}, defaultLoginOptions(), {}, options);\n\n    if (!/https?:/.test(options.popupUri)) {\n      options.popupUri = new URL(options.popupUri || '/.well-known/solid/login', window.location).toString();\n    }\n\n    if (!options.callbackUri) {\n      options.callbackUri = options.popupUri;\n    }\n\n    const popup = Object(_popup__WEBPACK_IMPORTED_MODULE_3__[\"openIdpPopup\"])(options.popupUri);\n    const session = await Object(_popup__WEBPACK_IMPORTED_MODULE_3__[\"obtainSession\"])(options.storage, popup, options);\n    this.emit('login', session);\n    this.emit('session', session);\n    return session;\n  }\n\n  async currentSession() {\n    let storage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])();\n    // Try to obtain a stored or pending session\n    let session = this._pendingSession || (await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"getSession\"])(storage)); // If none found, attempt to create a new session\n\n    if (!session) {\n      // Try to create a new OIDC session from stored tokens\n      try {\n        this._pendingSession = _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[\"currentSession\"](storage);\n        session = await this._pendingSession;\n      } catch (err) {\n        console.error(err);\n      } // Save the new session and emit session events\n\n\n      if (session) {\n        await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"saveSession\"])(storage)(session);\n        this.emit('login', session);\n        this.emit('session', session);\n      }\n\n      delete this._pendingSession;\n    }\n\n    return session;\n  }\n\n  async trackSession(callback) {\n    /* eslint-disable standard/no-callback-literal */\n    callback((await this.currentSession()));\n    this.on('session', callback);\n  }\n\n  stopTrackSession(callback) {\n    this.removeListener('session', callback);\n  }\n\n  async logout() {\n    let storage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])();\n    const session = await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"getSession\"])(storage);\n\n    if (session) {\n      try {\n        await _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[\"logout\"](storage, globalFetch);\n        this.emit('logout');\n        this.emit('session', null);\n      } catch (err) {\n        console.warn('Error logging out:');\n        console.error(err);\n      }\n\n      await Object(_session__WEBPACK_IMPORTED_MODULE_4__[\"clearSession\"])(storage);\n    }\n  }\n\n}\n\nfunction defaultLoginOptions(url) {\n  return {\n    callbackUri: url ? url.split('#')[0] : '',\n    popupUri: '',\n    storage: Object(_storage__WEBPACK_IMPORTED_MODULE_5__[\"defaultStorage\"])()\n  };\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"authnFetch\", function() { return authnFetch; });\n/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);\n/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n/* harmony import */ var _host__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7);\n/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8);\n/* harmony import */ var _webid_oidc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11);\n\n\n\n\n\nasync function authnFetch(storage, fetch, input, options) {\n  // If not authenticated, perform a regular fetch\n  const session = await Object(_session__WEBPACK_IMPORTED_MODULE_3__[\"getSession\"])(storage);\n\n  if (!session) {\n    return fetch(input, options);\n  } // If we know the server expects credentials, send them\n\n\n  if (await shouldShareCredentials(storage, input)) {\n    return Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_4__[\"fetchWithCredentials\"])(session, fetch, input, options);\n  } // If we don't know for sure, try a regular fetch first\n\n\n  let resp = await fetch(input, options); // If the server then requests credentials, send them\n\n  if (resp.status === 401) {\n    await Object(_host__WEBPACK_IMPORTED_MODULE_2__[\"updateHostFromResponse\"])(storage)(resp);\n\n    if (await shouldShareCredentials(storage, input)) {\n      resp = Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_4__[\"fetchWithCredentials\"])(session, fetch, input, options);\n    }\n  }\n\n  return resp;\n}\n\nasync function shouldShareCredentials(storage, input) {\n  const requestHost = await Object(_host__WEBPACK_IMPORTED_MODULE_2__[\"getHost\"])(storage)(Object(_url_util__WEBPACK_IMPORTED_MODULE_1__[\"toUrlString\"])(input));\n  return requestHost != null && requestHost.requiresAuth;\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n(function() { module.exports = window[\"fetch\"]; }());\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"currentUrl\", function() { return currentUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"currentUrlNoParams\", function() { return currentUrlNoParams; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"navigateTo\", function() { return navigateTo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"originOf\", function() { return originOf; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toUrlString\", function() { return toUrlString; });\n/* eslint-env browser */\nfunction getLocation() {\n  return typeof window !== 'undefined' ? window.location : {\n    href: 'https://example.org/',\n    pathname: '/',\n    origin: 'example.org'\n  };\n}\n\nconst currentUrl = () => getLocation().href;\nconst currentUrlNoParams = () => getLocation().origin + getLocation().pathname;\nconst navigateTo = url => {\n  getLocation().href = url;\n};\nconst originOf = url => new URL(url).origin;\nconst toUrlString = url => {\n  if (typeof url !== 'string') {\n    url = 'url' in url ? url.url : url.toString();\n  }\n\n  return new URL(url, currentUrl()).toString();\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getHost\", function() { return getHost; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveHost\", function() { return saveHost; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateHostFromResponse\", function() { return updateHostFromResponse; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8);\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9);\n/* harmony import */ var _webid_oidc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11);\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* globalRequest, Response, URL */\n\n\n\nfunction getHost(storage) {\n  return async url => {\n    const {\n      host\n    } = new URL(url);\n    const session = await Object(_session__WEBPACK_IMPORTED_MODULE_1__[\"getSession\"])(storage);\n\n    if (session && host === new URL(session.idp).host) {\n      return {\n        url: host,\n        requiresAuth: true\n      };\n    }\n\n    const {\n      hosts\n    } = await Object(_storage__WEBPACK_IMPORTED_MODULE_2__[\"getData\"])(storage);\n    return hosts && hosts[host];\n  };\n}\nfunction saveHost(storage) {\n  return async (_ref) => {\n    let {\n      url,\n      requiresAuth\n    } = _ref;\n    await Object(_storage__WEBPACK_IMPORTED_MODULE_2__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n      hosts: _objectSpread({}, data.hosts, {\n        [url]: {\n          requiresAuth\n        }\n      })\n    }));\n  };\n}\nfunction updateHostFromResponse(storage) {\n  return async resp => {\n    if (_webid_oidc__WEBPACK_IMPORTED_MODULE_3__[\"requiresAuth\"](resp)) {\n      const {\n        host\n      } = new URL(resp.url);\n      await saveHost(storage)({\n        url: host,\n        requiresAuth: true\n      });\n    }\n  };\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSession\", function() { return getSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveSession\", function() { return saveSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clearSession\", function() { return clearSession; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9);\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\nasync function getSession(storage) {\n  const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_1__[\"getData\"])(storage);\n  return data.session || null;\n}\nfunction saveSession(storage) {\n  return async session => {\n    const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_1__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n      session\n    }));\n    return data.session;\n  };\n}\nasync function clearSession(storage) {\n  await Object(_storage__WEBPACK_IMPORTED_MODULE_1__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n    session: null\n  }));\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NAMESPACE\", function() { return NAMESPACE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"defaultStorage\", function() { return defaultStorage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getData\", function() { return getData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateStorage\", function() { return updateStorage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"asyncStorage\", function() { return asyncStorage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"memStorage\", function() { return memStorage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ipcStorage\", function() { return ipcStorage; });\n/* harmony import */ var _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);\n\nconst NAMESPACE = 'solid-auth-client';\nconst defaultStorage = () => {\n  const hasLocalStorage = typeof window !== 'undefined' && 'localStorage' in window;\n  return asyncStorage(hasLocalStorage ? window.localStorage : memStorage());\n};\n/**\n * Gets the deserialized stored data\n */\n\nasync function getData(store) {\n  let serialized;\n  let data;\n\n  try {\n    serialized = await store.getItem(NAMESPACE);\n    data = JSON.parse(serialized || '{}');\n  } catch (e) {\n    console.warn('Could not deserialize data:', serialized);\n    console.error(e);\n    data = {};\n  }\n\n  return data;\n}\n/**\n * Updates a Storage object without mutating its intermediate representation.\n */\n\nasync function updateStorage(store, update) {\n  const currentData = await getData(store);\n  const newData = update(currentData);\n  await store.setItem(NAMESPACE, JSON.stringify(newData));\n  return newData;\n}\n/**\n * Takes a synchronous storage interface and wraps it with an async interface.\n */\n\nfunction asyncStorage(storage) {\n  return {\n    getItem: key => {\n      return Promise.resolve(storage.getItem(key));\n    },\n    setItem: (key, val) => {\n      return Promise.resolve(storage.setItem(key, val));\n    },\n    removeItem: key => {\n      return Promise.resolve(storage.removeItem(key));\n    }\n  };\n}\nconst memStorage = () => {\n  const store = {};\n  return {\n    getItem: key => {\n      if (typeof store[key] === 'undefined') return null;\n      return store[key];\n    },\n    setItem: (key, val) => {\n      store[key] = val;\n    },\n    removeItem: key => {\n      delete store[key];\n    }\n  };\n};\nfunction ipcStorage(client) {\n  return {\n    getItem: key => client.request('storage/getItem', key),\n    setItem: (key, val) => client.request('storage/setItem', key, val),\n    removeItem: key => client.request('storage/removeItem', key)\n  };\n}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Server\", function() { return Server; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Client\", function() { return Client; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n\n\n/*\n  This module describes a simple IPC interface for communicating between browser windows.\n  window.postMessage() is the transport interface, and a request/response interface\n  is defined on top of it as follows:\n\n  const request = {\n    'solid-auth-client': {\n      id: 1234,\n      method: 'doSomethingPlease',\n      args: [ 'one', 'two', 'three' ]\n    }\n  }\n\n  const response = {\n    'solid-auth-client': {\n      id: 1234,\n      ret: 'the_value'\n    }\n  }\n*/\nconst NAMESPACE = 'solid-auth-client';\n/**\n * Receives and handles remote procedure calls.\n */\n\nclass Server {\n  constructor(clientWindow, clientOrigin, handle) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_clientWindow\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_clientOrigin\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_handler\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_messageListener\", void 0);\n\n    this._clientWindow = clientWindow;\n    this._clientOrigin = clientOrigin;\n    this._handler = handle;\n\n    this._messageListener = event => this._handleMessage(event);\n  }\n\n  async _handleMessage(_ref) {\n    let {\n      data,\n      origin\n    } = _ref;\n\n    // Ensure we can post to the origin\n    if (origin !== this._clientOrigin) {\n      console.warn(\"solid-auth-client is listening to \".concat(this._clientOrigin, \" \") + \"so ignored a message received from \".concat(origin, \".\"));\n      return;\n    } // Parse the request and send it to the handler\n\n\n    const req = data && data[NAMESPACE];\n\n    if (req && req.method) {\n      const {\n        id,\n        method,\n        args\n      } = req;\n      const ret = await this._handler(method, ...args);\n\n      this._clientWindow.postMessage({\n        [NAMESPACE]: {\n          id,\n          ret\n        }\n      }, this._clientOrigin);\n    }\n  }\n\n  start() {\n    window.addEventListener('message', this._messageListener);\n  }\n\n  stop() {\n    window.removeEventListener('message', this._messageListener);\n  }\n\n}\n/**\n * Makes remote procedure calls.\n */\n\nclass Client {\n  constructor(serverWindow, serverOrigin) {\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_serverWindow\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_serverOrigin\", void 0);\n\n    this._serverWindow = serverWindow;\n    this._serverOrigin = serverOrigin;\n  }\n\n  request(method) {\n    // Send the request as a message to the server window\n    const id = Math.random();\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    this._serverWindow.postMessage({\n      [NAMESPACE]: {\n        id,\n        method,\n        args\n      }\n    }, this._serverOrigin); // Create a promise that resolves to the request's return value\n\n\n    return new Promise((resolve, reject) => {\n      // Listen for responses to the request\n      window.addEventListener('message', responseListener); // Cancel if the response takes too long\n\n      const timeout = setTimeout(() => {\n        reject(new Error('Could not connect to main window.'));\n        window.removeEventListener('message', responseListener);\n      }, 2000); // Processes a possible response to the request\n\n      function responseListener(_ref2) {\n        let {\n          data\n        } = _ref2;\n        const resp = data && data[NAMESPACE];\n\n        if (resp && resp.id === id && resp.hasOwnProperty('ret')) {\n          resolve(resp.ret);\n          clearTimeout(timeout);\n          window.removeEventListener('message', responseListener);\n        }\n      }\n    });\n  }\n\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"login\", function() { return login; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"currentSession\", function() { return currentSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"logout\", function() { return logout; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRegisteredRp\", function() { return getRegisteredRp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"requiresAuth\", function() { return requiresAuth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetchWithCredentials\", function() { return fetchWithCredentials; });\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12);\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var auth_header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14);\n/* harmony import */ var auth_header__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(auth_header__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18);\n/* harmony import */ var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80);\n/* harmony import */ var _solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6);\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9);\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* global Response */\n\n\n\n\n\nasync function login(idp, options) {\n  try {\n    const rp = await getRegisteredRp(idp, options);\n    await saveAppHashFragment(options.storage);\n    return sendAuthRequest(rp, options);\n  } catch (err) {\n    console.warn('Error logging in with WebID-OIDC');\n    console.error(err);\n    return null;\n  }\n}\nasync function currentSession() {\n  let storage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"defaultStorage\"])();\n\n  try {\n    // Obtain the Relying Party\n    const rp = await getStoredRp(storage);\n\n    if (!rp) {\n      return null;\n    } // Obtain and clear the OIDC URL fragment\n\n\n    const url = Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[\"currentUrl\"])();\n\n    if (!/#(.*&)?access_token=/.test(url)) {\n      return null;\n    }\n\n    window.location.hash = '';\n    await restoreAppHashFragment(storage); // Obtain a session from the Relying Party\n\n    const storeData = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"getData\"])(storage);\n    const session = await rp.validateResponse(url, storeData);\n\n    if (!session) {\n      return null;\n    }\n\n    return _objectSpread({}, session, {\n      webId: session.idClaims.sub,\n      idp: session.issuer\n    });\n  } catch (err) {\n    console.warn('Error finding a WebID-OIDC session');\n    console.error(err);\n    return null;\n  }\n}\nasync function logout(storage, fetch) {\n  const rp = await getStoredRp(storage);\n\n  if (rp) {\n    try {\n      // First log out from the IDP\n      await rp.logout(); // Then, log out from the RP\n\n      try {\n        await fetch('/.well-known/solid/logout', {\n          credentials: 'include'\n        });\n      } catch (e) {// Ignore errors for when we are not on a Solid pod\n      }\n    } catch (err) {\n      console.warn('Error logging out of the WebID-OIDC session');\n      console.error(err);\n    }\n  }\n}\nasync function getRegisteredRp(idp, options) {\n  // To reuse a possible previous RP,\n  // it be for the same IDP and redirect URI\n  let rp = await getStoredRp(options.storage);\n\n  if (!rp || rp.provider.url !== idp || !rp.registration.redirect_uris.includes(options.callbackUri)) {\n    // Register a new RP\n    rp = await registerRp(idp, options);\n    await storeRp(options.storage, idp, rp);\n  }\n\n  return rp;\n}\n\nasync function getStoredRp(storage) {\n  const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"getData\"])(storage);\n  const {\n    rpConfig\n  } = data;\n\n  if (rpConfig) {\n    rpConfig.store = storage;\n    return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.from(rpConfig);\n  } else {\n    return null;\n  }\n}\n\nasync function storeRp(storage, idp, rp) {\n  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(storage, data => _objectSpread({}, data, {\n    rpConfig: rp\n  }));\n  return rp;\n}\n\nfunction registerRp(idp, opts) {\n  const {\n    storage,\n    callbackUri\n  } = opts;\n  const responseType = 'id_token token';\n  const clientNameI18n = {};\n  Object.entries(opts).filter((_ref) => {\n    let [key, _] = _ref;\n    return key.startsWith('clientName#');\n  }).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    return clientNameI18n[key.replace('clientName#', 'client_name#')] = value;\n  });\n  const supplementaryOptions = {\n    logo_uri: opts.logoUri,\n    contacts: opts.contacts,\n    client_name: opts.clientName\n  };\n\n  const registration = _objectSpread({\n    issuer: idp,\n    grant_types: ['implicit'],\n    redirect_uris: [callbackUri],\n    response_types: [responseType],\n    scope: 'openid profile'\n  }, clientNameI18n, {}, supplementaryOptions);\n\n  const options = {\n    defaults: {\n      authenticate: {\n        redirect_uri: callbackUri,\n        response_type: responseType\n      }\n    },\n    store: storage\n  };\n  return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.register(idp, registration, options);\n}\n\nasync function sendAuthRequest(rp, _ref3) {\n  let {\n    callbackUri,\n    storage\n  } = _ref3;\n  const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"getData\"])(storage);\n  const url = await rp.createRequest({\n    redirect_uri: callbackUri\n  }, data);\n  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(storage, () => data);\n  return Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[\"navigateTo\"])(url);\n}\n\nasync function saveAppHashFragment(store) {\n  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(store, data => _objectSpread({}, data, {\n    appHashFragment: window.location.hash\n  }));\n}\n\nasync function restoreAppHashFragment(store) {\n  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__[\"updateStorage\"])(store, (_ref4) => {\n    let {\n      appHashFragment = ''\n    } = _ref4,\n        data = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref4, [\"appHashFragment\"]);\n\n    window.location.hash = appHashFragment;\n    return data;\n  });\n}\n/**\n * Answers whether a HTTP response requires WebID-OIDC authentication.\n */\n\n\nfunction requiresAuth(resp) {\n  if (resp.status !== 401) {\n    return false;\n  }\n\n  const wwwAuthHeader = resp.headers.get('www-authenticate');\n\n  if (!wwwAuthHeader) {\n    return false;\n  }\n\n  const auth = auth_header__WEBPACK_IMPORTED_MODULE_2__[\"parse\"](wwwAuthHeader);\n  return auth.scheme === 'Bearer' && auth.params && auth.params.scope === 'openid webid';\n}\n/**\n * Fetches a resource, providing the WebID-OIDC ID Token as authentication.\n * Assumes that the resource has requested those tokens in a previous response.\n */\n\nasync function fetchWithCredentials(session, fetch, input, options) {\n  // Create a copy of the headers\n  const headers = {};\n  const origHeaders = options ? options.headers : input.headers;\n\n  if (origHeaders) {\n    const entries = typeof origHeaders.entries === 'function' ? origHeaders.entries() : Object.entries(origHeaders);\n\n    for (const [name, value] of entries) {\n      headers[name] = value;\n    }\n  } // Add Authorization header\n\n\n  const popToken = await _solid_oidc_rp_lib_PoPToken__WEBPACK_IMPORTED_MODULE_4___default.a.issueFor(Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[\"toUrlString\"])(input), session);\n  headers.authorization = \"Bearer \".concat(popToken);\n  return fetch(input, _objectSpread({}, options, {\n    credentials: 'include',\n    headers\n  }));\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar objectWithoutPropertiesLoose = __webpack_require__(13);\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"format\", {\n  enumerable: true,\n  get: function get() {\n    return _format.default;\n  }\n});\nObject.defineProperty(exports, \"parse\", {\n  enumerable: true,\n  get: function get() {\n    return _parse.default;\n  }\n});\n\nvar _format = _interopRequireDefault(__webpack_require__(15));\n\nvar _parse = _interopRequireDefault(__webpack_require__(17));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n//# sourceMappingURL=index.js.map\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _util = __webpack_require__(16);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar xxx = function xxx(key) {\n  return function (value) {\n    return `${key}=${value && !(0, _util.isToken)(value) ? (0, _util.quote)(value) : value}`;\n  };\n};\n\nvar build = function build(params) {\n  return params.reduce(function (prev, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        values = _ref2[1];\n\n    var transform = xxx(key);\n\n    if (!(0, _util.isToken)(key)) {\n      throw new TypeError();\n    }\n\n    if (Array.isArray(values)) {\n      return _toConsumableArray(prev).concat(_toConsumableArray(values.map(transform)));\n    }\n\n    return _toConsumableArray(prev).concat([transform(values)]);\n  }, []);\n};\n\nvar challenge = function challenge(params, options) {\n  if (Array.isArray(params)) {\n    return build(params);\n  } else if (typeof params === 'object') {\n    var entries = params;\n    return challenge(Object.keys(params).map(function (key) {\n      return [key, entries[key]];\n    }), options);\n  }\n\n  throw new TypeError();\n};\n\nvar _default = function _default(scheme, token, params) {\n  var obj = typeof scheme === 'string' ? {\n    scheme,\n    token,\n    params\n  } : scheme;\n\n  if (typeof obj !== 'object') {\n    throw new TypeError();\n  } else if (!(0, _util.isScheme)(obj.scheme)) {\n    throw new TypeError('Invalid scheme.');\n  }\n\n  return [obj.scheme].concat(_toConsumableArray(typeof obj.token !== 'undefined' ? [obj.token] : []), _toConsumableArray(typeof obj.params !== 'undefined' ? challenge(obj.params) : [])).join(' ');\n};\n\nexports.default = _default;\n//# sourceMappingURL=format.js.map\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unquote = exports.quote = exports.isScheme = exports.isToken = void 0;\nvar token = /^[^\\u0000-\\u001F\\u007F()<>@,;:\\\\\"/?={}\\[\\]\\u0020\\u0009]+$/;\n\nvar isToken = function isToken(str) {\n  return typeof str === 'string' && token.test(str);\n};\n\nexports.isToken = isToken;\nvar isScheme = isToken;\nexports.isScheme = isScheme;\n\nvar quote = function quote(str) {\n  return `\"${str.replace(/\"/g, '\\\\\"')}\"`;\n};\n\nexports.quote = quote;\n\nvar unquote = function unquote(str) {\n  return str.substr(1, str.length - 2).replace(/\\\\\"/g, '\"');\n};\n\nexports.unquote = unquote;\n//# sourceMappingURL=util.js.map\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _util = __webpack_require__(16);\n\n// lol dis\nvar body = /((?:[a-zA-Z0-9._~+\\/-]+=*(?:\\s+|$))|[^\\u0000-\\u001F\\u007F()<>@,;:\\\\\"/?={}\\[\\]\\u0020\\u0009]+)(?:=([^\\\\\"=\\s,]+|\"(?:[^\"\\\\]|\\\\.)*\"))?/g; // eslint-disable-line\n\nvar normalize = function normalize(prev, _cur) {\n  // Fixup quoted strings and tokens with spaces around them\n  var cur = _cur.charAt(0) === '\"' ? (0, _util.unquote)(_cur) : _cur.trim(); // Marshal\n\n  if (Array.isArray(prev)) {\n    return prev.concat(cur);\n  } else if (typeof prev === 'string') {\n    return [prev, cur];\n  }\n\n  return cur;\n};\n\nvar parseProperties = function parseProperties(scheme, string) {\n  var token = null;\n  var params = {}; // eslint-disable-next-line no-constant-condition\n\n  while (true) {\n    var res = body.exec(string);\n\n    if (res === null) {\n      break;\n    }\n\n    if (res[2]) {\n      params[res[1]] = normalize(params[res[1]], res[2]);\n    } else {\n      token = normalize(token, res[1]);\n    }\n  }\n\n  return {\n    scheme,\n    params,\n    token\n  };\n};\n\nvar _default = function _default(str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Header value must be a string.');\n  }\n\n  var start = str.indexOf(' ');\n  var scheme = str.substr(0, start);\n\n  if (!(0, _util.isScheme)(scheme)) {\n    throw new TypeError(`Invalid scheme ${scheme}`);\n  }\n\n  return parseProperties(scheme, str.substr(start));\n};\n\nexports.default = _default;\n//# sourceMappingURL=parse.js.map\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = __webpack_require__(19);\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {/**\n * Dependencies\n */\nconst assert = __webpack_require__(21);\n\nconst fetch = __webpack_require__(5);\n\nconst {\n  URL\n} = __webpack_require__(27);\n\nconst Headers = fetch.Headers ? fetch.Headers : global.Headers;\n\nconst {\n  JSONDocument\n} = __webpack_require__(28);\n\nconst {\n  JWKSet\n} = __webpack_require__(37);\n\nconst AuthenticationRequest = __webpack_require__(68);\n\nconst AuthenticationResponse = __webpack_require__(70);\n\nconst RelyingPartySchema = __webpack_require__(79);\n\nconst onHttpError = __webpack_require__(74);\n\nconst FormUrlEncoded = __webpack_require__(69);\n/**\n * RelyingParty\n *\n * @class\n * Client interface for OpenID Connect Relying Party.\n *\n * @example\n *  let client = RelyingParty({\n *    provider: {\n *      name: 'Anvil Research, Inc.',\n *      url: 'https://forge.anvil.io'\n *      // configuration\n *      // jwks\n *    },\n *    defaults: {\n *      popToken: false,\n *      authenticate: {\n *        response_type: 'code',\n *        display: 'popup',\n *        scope: 'openid profile email'\n *      },\n *      register: {\n *        client_name: 'Example',\n *        client_uri: 'https://example.com',\n *        logo_uri: 'https://example.com/assets/logo.png',\n *        redirect_uris: ['https://app.example.com/callback'],\n *        response_types: ['code', 'code id_token token'],\n *        grant_types: ['authorization_code'],\n *        default_max_age: 7200,\n *        post_logout_redirect_uris: ['https://app.example.com']\n *      },\n *    },\n *    registration: {\n *      // if you have it saved somewhere\n *    },\n *    store: localStorage || req.session\n *  })\n *\n *  client.discover() => Promise\n *  client.jwks() => Promise\n *  client.authenticate()\n *  client.authenticateUri()\n *  client.validateResponse(uri) => Promise\n *  client.userinfo() => Promise\n *  client.logout()\n */\n\n\nclass RelyingParty extends JSONDocument {\n  /**\n   * Schema\n   */\n  static get schema() {\n    return RelyingPartySchema;\n  }\n  /**\n   * from\n   *\n   * @description\n   * Create a RelyingParty instance from a previously registered client.\n   *\n   * @param {Object} data\n   * @returns {Promise<RelyingParty>}\n   */\n\n\n  static from(data) {\n    let rp = new RelyingParty(data);\n    let validation = rp.validate(); // schema validation\n\n    if (!validation.valid) {\n      return Promise.reject(new Error(JSON.stringify(validation)));\n    }\n\n    let jwks = rp.provider.jwks; // request the JWK Set if missing\n\n    if (!jwks) {\n      return rp.jwks().then(() => rp);\n    } // otherwise import the JWK Set to webcrypto\n\n\n    return JWKSet.importKeys(jwks).then(jwks => {\n      rp.provider.jwks = jwks;\n      return rp;\n    });\n  }\n  /**\n   * register\n   *\n   * @param issuer {string} Provider URL\n   * @param registration {Object} Client dynamic registration options\n   * @param options {Object}\n   * @param options.defaults\n   * @param [options.store] {Session|Storage}\n   * @returns {Promise<RelyingParty>} RelyingParty instance, registered.\n   */\n\n\n  static register(issuer, registration, options) {\n    let rp = new RelyingParty({\n      provider: {\n        url: issuer\n      },\n      defaults: Object.assign({}, options.defaults),\n      store: options.store\n    });\n    return Promise.resolve().then(() => rp.discover()).then(() => rp.jwks()).then(() => rp.register(registration)).then(() => rp);\n  }\n  /**\n   * Discover\n   *\n   * @description Fetches the issuer's OpenID Configuration.\n   * @returns {Promise<Object>} Resolves with the provider configuration response\n   */\n\n\n  discover() {\n    try {\n      let issuer = this.provider.url;\n      assert(issuer, 'RelyingParty provider must define \"url\"');\n      let url = new URL(issuer);\n      url.pathname = '.well-known/openid-configuration';\n      return fetch(url.toString()).then(onHttpError('Error fetching openid configuration')).then(response => {\n        return response.json().then(json => this.provider.configuration = json);\n      });\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  }\n  /**\n   * Register\n   *\n   * @description Register's a client with provider as a Relying Party\n   *\n   * @param options {Object}\n   * @returns {Promise<Object>} Resolves with the registration response object\n   */\n\n\n  register(options) {\n    try {\n      let configuration = this.provider.configuration;\n      assert(configuration, 'OpenID Configuration is not initialized.');\n      assert(configuration.registration_endpoint, 'OpenID Configuration is missing registration_endpoint.');\n      let uri = configuration.registration_endpoint;\n      let method = 'post';\n      let headers = new Headers({\n        'Content-Type': 'application/json'\n      });\n      let params = this.defaults.register;\n      let body = JSON.stringify(Object.assign({}, params, options));\n      return fetch(uri, {\n        method,\n        headers,\n        body\n      }).then(onHttpError('Error registering client')).then(response => {\n        return response.json().then(json => this.registration = json);\n      });\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  }\n\n  serialize() {\n    return JSON.stringify(this);\n  }\n  /**\n   * jwks\n   *\n   * @description Promises the issuer's JWK Set.\n   * @returns {Promise}\n   */\n\n\n  jwks() {\n    try {\n      let configuration = this.provider.configuration;\n      assert(configuration, 'OpenID Configuration is not initialized.');\n      assert(configuration.jwks_uri, 'OpenID Configuration is missing jwks_uri.');\n      let uri = configuration.jwks_uri;\n      return fetch(uri).then(onHttpError('Error resolving provider keys')).then(response => {\n        return response.json().then(json => JWKSet.importKeys(json)).then(jwks => this.provider.jwks = jwks);\n      });\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  }\n  /**\n   * createRequest\n   *\n   * @param options {Object} Authn request options hashmap\n   * @param options.redirect_uri {string}\n   * @param options.response_type {string} e.g. 'code' or 'id_token token'\n   * @param session {Session|Storage} req.session or localStorage\n   * @returns {Promise<string>} Authn request URL\n   */\n\n\n  createRequest(options, session) {\n    return AuthenticationRequest.create(this, options, session || this.store);\n  }\n  /**\n   * Validate Response\n   *\n   * @param response {string} req.query or req.body.text\n   * @param session {Session|Storage} req.session or localStorage or similar\n   *\n   * @returns {Promise<Session>}\n   */\n\n\n  validateResponse(response, session = this.store) {\n    let options;\n\n    if (response.match(/^http(s?):\\/\\//)) {\n      options = {\n        rp: this,\n        redirect: response,\n        session\n      };\n    } else {\n      options = {\n        rp: this,\n        body: response,\n        session\n      };\n    }\n\n    const authResponse = new AuthenticationResponse(options);\n    return AuthenticationResponse.validateResponse(authResponse);\n  }\n  /**\n   * userinfo\n   *\n   * @description Promises the authenticated user's claims.\n   * @returns {Promise}\n   */\n\n\n  userinfo() {\n    try {\n      let configuration = this.provider.configuration;\n      assert(configuration, 'OpenID Configuration is not initialized.');\n      assert(configuration.userinfo_endpoint, 'OpenID Configuration is missing userinfo_endpoint.');\n      let uri = configuration.userinfo_endpoint;\n      let access_token = this.store.access_token;\n      assert(access_token, 'Missing access token.');\n      let headers = new Headers({\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${access_token}`\n      });\n      return fetch(uri, {\n        headers\n      }).then(onHttpError('Error fetching userinfo')).then(response => response.json());\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  }\n  /**\n   * logoutRequest\n   *\n   * Composes and returns the logout request URI, based on the OP's\n   * `end_session_endpoint`, with appropriate parameters.\n   *\n   * Note: Calling client code has the responsibility to clear the local\n   * session state (for example, by calling `rp.clearSession()`). In addition,\n   * some IdPs (such as Google) may not provide an `end_session_endpoint`,\n   * in which case, this method will return null.\n   *\n   * @see https://openid.net/specs/openid-connect-session-1_0.html#RPLogout\n   *\n   * @throws {Error} If provider config is not initialized\n   *\n   * @throws {Error} If `post_logout_redirect_uri` was provided without a\n   *   corresponding `id_token_hint`\n   *\n   * @param [options={}] {object}\n   *\n   * @param [options.id_token_hint] {string} RECOMMENDED.\n   *   Previously issued ID Token passed to the logout endpoint as\n   *   a hint about the End-User's current authenticated session with the\n   *   Client. This is used as an indication of the identity of the End-User\n   *   that the RP is requesting be logged out by the OP. The OP *need not* be\n   *   listed as an audience of the ID Token when it is used as an\n   *   `id_token_hint` value.\n   *\n   * @param [options.post_logout_redirect_uri] {string} OPTIONAL. URL to which\n   *   the RP is requesting that the End-User's User Agent be redirected after\n   *   a logout has been performed. The value MUST have been previously\n   *   registered with the OP, either using the `post_logout_redirect_uris`\n   *   Registration parameter or via another mechanism. If supplied, the OP\n   *   SHOULD honor this request following the logout.\n   *\n   *   Note: The requirement to validate the uri for previous registration means\n   *   that, in practice, the `id_token_hint` is REQUIRED if\n   *   `post_logout_redirect_uri` is used. Otherwise, the OP has no way to get\n   *   the `client_id` to load the saved client registration, to validate the\n   *   uri. The only way it can get it is by decoding the `id_token_hint`.\n   *\n   * @param [options.state] {string} OPTIONAL. Opaque value used by the RP to\n   *   maintain state between the logout request and the callback to the\n   *   endpoint specified by the `post_logout_redirect_uri` query parameter. If\n   *   included in the logout request, the OP passes this value back to the RP\n   *   using the `state` query parameter when redirecting the User Agent back to\n   *   the RP.\n   *\n   * TODO: In the future, consider adding `response_mode` param, for the OP to\n   *   determine how to return the `state` back the RP.\n   *   @see http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html#ResponseModes\n   *\n   * TODO: Handle special cases for popular providers (Google, MSFT)\n   *\n   * @returns {string|null} Logout uri (or null if no end_session_endpoint was\n   *   provided in the IdP config)\n   */\n\n\n  logoutRequest(options = {}) {\n    const {\n      id_token_hint,\n      post_logout_redirect_uri,\n      state\n    } = options;\n    let configuration;\n    assert(this.provider, 'OpenID Configuration is not initialized');\n    configuration = this.provider.configuration;\n    assert(configuration, 'OpenID Configuration is not initialized');\n\n    if (!configuration.end_session_endpoint) {\n      console.log(`OpenId Configuration for ` + `${configuration.issuer} is missing end_session_endpoint`);\n      return null;\n    }\n\n    if (post_logout_redirect_uri && !id_token_hint) {\n      throw new Error('id_token_hint is required when using post_logout_redirect_uri');\n    }\n\n    const params = {};\n\n    if (id_token_hint) {\n      params.id_token_hint = id_token_hint;\n    }\n\n    if (post_logout_redirect_uri) {\n      params.post_logout_redirect_uri = post_logout_redirect_uri;\n    }\n\n    if (state) {\n      params.state = state;\n    }\n\n    const url = new URL(configuration.end_session_endpoint);\n    url.search = FormUrlEncoded.encode(params);\n    return url.href;\n  }\n  /**\n   * Logout\n   *\n   * @deprecated\n   *\n   * TODO: Add deprecation warnings, then remove. Client code should\n   *   use `logoutRequest()` instead\n   *\n   * @returns {Promise}\n   */\n\n\n  logout() {\n    let configuration;\n\n    try {\n      assert(this.provider, 'OpenID Configuration is not initialized.');\n      configuration = this.provider.configuration;\n      assert(configuration, 'OpenID Configuration is not initialized.');\n      assert(configuration.end_session_endpoint, 'OpenID Configuration is missing end_session_endpoint.');\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    if (!configuration.end_session_endpoint) {\n      this.clearSession();\n      return Promise.resolve(undefined);\n    }\n\n    let uri = configuration.end_session_endpoint;\n    let method = 'get';\n    return fetch(uri, {\n      method,\n      credentials: 'include'\n    }).then(onHttpError('Error logging out')).then(() => this.clearSession()); // TODO: Validate `frontchannel_logout_uri` if necessary\n\n    /**\n     * frontchannel_logout_uri - OPTIONAL. RP URL that will cause the RP to log\n     * itself out when rendered in an iframe by the OP.\n     *\n     * An `iss` (issuer) query parameter and a `sid`\n     * (session ID) query parameter MAY be included by the OP to enable the RP\n     * to validate the request and to determine which of the potentially\n     * multiple sessions is to be logged out. If a sid (session ID) query\n     * parameter is included, an iss (issuer) query parameter MUST also be\n     * included.\n     * @see https://openid.net/specs/openid-connect-frontchannel-1_0.html#RPLogout\n     */\n  }\n\n  clearSession() {\n    let session = this.store;\n\n    if (!session) {\n      return;\n    }\n\n    delete session[SESSION_PRIVATE_KEY];\n  }\n  /**\n   * @param uri {string} Target Resource Server URI\n   * @param idToken {IDToken} ID Token to be embedded in the PoP token\n   *\n   * @returns {Promise<PoPToken>}\n   */\n\n\n  popTokenFor(uri, idToken) {\n    return PoPToken.issueFor(uri, idToken);\n  }\n\n}\n\nconst SESSION_PRIVATE_KEY = 'oidc.session.privateKey';\nRelyingParty.SESSION_PRIVATE_KEY = SESSION_PRIVATE_KEY;\nmodule.exports = RelyingParty;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(20)))\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar objectAssign = __webpack_require__(22);\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = __webpack_require__(23);\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(20)))\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = __webpack_require__(25);\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = __webpack_require__(26);\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(24)))\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n(function() { module.exports = window[\"window\"]; }());\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n  Formats: __webpack_require__(29),\n  Initializer: __webpack_require__(30),\n  JSONDocument: __webpack_require__(31),\n  JSONMapping: __webpack_require__(34),\n  JSONPatch: __webpack_require__(32),\n  JSONPointer: __webpack_require__(33),\n  JSONSchema: __webpack_require__(35),\n  Validator: __webpack_require__(36)\n};\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * JSON Schema Formats\n *\n * TODO\n * Is there a good way to express these over multiple lines with comments\n * for easier debugging and auditing?\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DATETIME_REGEXP = /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s][0-2]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:z|[+-]\\d\\d:\\d\\d)$/i;\nvar URI_REGEXP = /^(?:[a-z][a-z0-9+-.]*)?(?:\\:|\\/)\\/?[^\\s]*$/i;\nvar EMAIL_REGEXP = /^[a-z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i;\nvar IPV4_REGEXP = /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/;\nvar IPV6_REGEXP = /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i;\nvar HOSTNAME_REGEXP = /^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i;\n\n/**\n * Formats\n */\n\nvar Formats = function () {\n  function Formats() {\n    _classCallCheck(this, Formats);\n  }\n\n  _createClass(Formats, [{\n    key: 'register',\n\n\n    /**\n     * Register\n     *\n     * @description\n     * Register a new mapping from named format to RegExp instance\n     *\n     * TODO\n     * We can do some extra validation of the RegExp to\n     * ensure it's the acceptable subset of RegExps allowed\n     * by JSON Schema.\n     *\n     * @param {string} name\n     * @param {RegExp} pattern\n     * @returns {RegExp}\n     */\n    value: function register(name, pattern) {\n      // verify name is a string\n      if (typeof name !== 'string') {\n        throw new Error('Format name must be a string');\n      }\n\n      // cast a string to RegExp\n      if (typeof pattern === 'string') {\n        pattern = new RegExp(pattern);\n      }\n\n      return this[name] = pattern;\n    }\n\n    /**\n     * Resolve\n     *\n     * @description\n     * Given a format name, return the corresponding registered validation. In the\n     * event a format is not registered, throw an error.\n     *\n     * @param {string} name\n     * @returns {RegExp}\n     */\n\n  }, {\n    key: 'resolve',\n    value: function resolve(name) {\n      var format = this[name];\n\n      if (!format) {\n        throw new Error('Unknown JSON Schema format.');\n      }\n\n      return format;\n    }\n\n    /**\n     * Test\n     *\n     * @description\n     * Test that a value conforms to a format.\n     *\n     * @param {string} name\n     * @param {string} value\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: 'test',\n    value: function test(name, value) {\n      var format = this.resolve(name);\n      return format.test(value);\n    }\n  }], [{\n    key: 'initialize',\n\n\n    /**\n     * Initialize\n     *\n     * @description\n     * Create a new Formats instance and register default formats\n     *\n     * @returns {Formats}\n     */\n    value: function initialize() {\n      var formats = new Formats();\n      formats.register('date-time', DATETIME_REGEXP);\n      formats.register('uri', URI_REGEXP);\n      formats.register('email', EMAIL_REGEXP);\n      formats.register('ipv4', IPV4_REGEXP);\n      formats.register('ipv6', IPV6_REGEXP);\n      formats.register('hostname', HOSTNAME_REGEXP);\n      return formats;\n    }\n  }]);\n\n  return Formats;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = Formats.initialize();\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Initializer\n */\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Initializer = function () {\n\n  /**\n   * constructor\n   */\n  function Initializer(schema, options) {\n    _classCallCheck(this, Initializer);\n\n    Object.assign(this, options || {});\n    this.root = this.root || this;\n\n    this.root.depth = this.root.depth || 1;\n\n    if (this.level > this.root.depth) {\n      this.root.depth = this.level;\n    }\n\n    this.level = this.level || 0;\n    this.schema = schema;\n  }\n\n  /**\n   * compile (static)\n   */\n\n\n  _createClass(Initializer, [{\n    key: 'compile',\n\n\n    /**\n     * compile\n     */\n    value: function compile() {\n      var root = this.root,\n          depth = this.depth,\n          level = this.level;\n\n      var declarations = '';\n      var body = '';\n\n      // traverse the schema and generate code\n      body += this.default();\n      body += this.properties();\n      //body += this.additionalProperties()\n      body += this.items();\n      //body += this.additionalItems()\n\n\n      // value\n      body += this.member();\n      body += this.item();\n\n      // after traversing the schema\n      // generate the variable declarations\n      if (root === this) {\n        for (var i = 1; i <= this.root.depth; i++) {\n          declarations += this.declaration(i);\n        }\n\n        return '\\n        options = options || {}\\n\\n        if (options.filter === false) {\\n          Object.assign(target, JSON.parse(JSON.stringify(source)))\\n        }\\n\\n        ' + declarations + '\\n        ' + body + '\\n      ';\n      }\n\n      return body;\n    }\n\n    /**\n     * declaration\n     */\n\n  }, {\n    key: 'declaration',\n    value: function declaration(level) {\n      return '\\n      var target' + level + '\\n      var source' + level + '\\n      var count' + level + '\\n    ';\n    }\n\n    /**\n     * default\n     */\n\n  }, {\n    key: 'default',\n    value: function _default() {\n      var schema = this.schema,\n          level = this.level,\n          key = this.key,\n          index = this.index;\n      var value = schema.default; // rename default to value because it's a keyword and syntax highlighter breaks\n\n      var block = '';\n\n      if (schema.hasOwnProperty('default')) {\n\n        if (key) {\n          block += '\\n          target' + level + '[\\'' + key + '\\'] = ' + JSON.stringify(value) + '\\n        ';\n        }\n\n        if (index) {\n          block += '\\n          target' + level + '[' + index + '] = ' + JSON.stringify(value) + '\\n        ';\n        }\n\n        if (level > 1) {\n          block += '\\n          count' + level + '++\\n        ';\n        }\n\n        block = '\\n        if (options.defaults !== false) {\\n          ' + block + '\\n        }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * member\n     */\n\n  }, {\n    key: 'member',\n    value: function member() {\n      var schema = this.schema,\n          root = this.root,\n          level = this.level,\n          key = this.key;\n      var properties = schema.properties,\n          additionalProperties = schema.additionalProperties,\n          items = schema.items,\n          additionalItems = schema.additionalItems;\n\n      var block = '';\n\n      // `key` tells us to treat this subschema as an object member vs an array item\n      // and the absence of the other values here indicates we are dealing with a\n      // primitive value\n      if (key && !properties && !additionalProperties && !items && !additionalItems) {\n\n        // first generate the assignment statement\n        block += '\\n        target' + level + '[\\'' + key + '\\'] = source' + level + '[\\'' + key + '\\']\\n      ';\n\n        // for nested container objects, add the counter incrementing statement\n        if (level > 1) {\n          block += '\\n          count' + level + '++\\n        ';\n        }\n\n        // wrap the foregoing in a check for presence on the source\n        block = '\\n        if (source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n          ' + block + '\\n        }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * item\n     */\n\n  }, {\n    key: 'item',\n    value: function item() {\n      var schema = this.schema,\n          root = this.root,\n          level = this.level,\n          index = this.index;\n      var properties = schema.properties,\n          additionalProperties = schema.additionalProperties,\n          items = schema.items,\n          additionalItems = schema.additionalItems;\n\n      var block = '';\n\n      if (index && !properties && !additionalProperties && !items && !additionalItems) {\n\n        block += '\\n        target' + level + '[' + index + '] = source' + level + '[' + index + ']\\n      ';\n\n        if (level > 1) {\n          block += '\\n          count' + level + '++\\n        ';\n        }\n\n        block = '\\n        if (' + index + ' < len) {\\n          ' + block + '\\n        }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * properties\n     */\n\n  }, {\n    key: 'properties',\n    value: function properties() {\n      var schema = this.schema,\n          root = this.root,\n          level = this.level,\n          key = this.key,\n          index = this.index;\n      var properties = schema.properties;\n\n      var block = '';\n\n      if (properties) {\n        Object.keys(properties).forEach(function (key) {\n          var subschema = properties[key];\n          var initializer = new Initializer(subschema, { key: key, root: root, level: level + 1 });\n\n          block += initializer.compile();\n        });\n\n        // root-level properties boilerplate\n        if (root === this) {\n          block = '\\n          if (typeof source === \\'object\\' && source !== null && !Array.isArray(source)) {\\n            if (typeof target !== \\'object\\') {\\n              throw new Error(\\'?\\')\\n            }\\n\\n            source1 = source\\n            target1 = target\\n            count1 = 0\\n\\n            ' + block + '\\n          }\\n        ';\n\n          // nested properties boilerplate\n        } else {\n\n          if (index) {\n            block = '\\n            if (' + index + ' < source' + level + '.length || typeof source' + level + '[' + index + '] === \\'object\\') {\\n\\n              source' + (level + 1) + ' = source' + level + '[' + index + '] || {}\\n              count' + (level + 1) + ' = 0\\n\\n              if (' + index + ' < target' + level + '.length || typeof target' + level + '[' + index + '] !== \\'object\\') {\\n                target' + (level + 1) + ' = {}\\n                if (' + index + ' < source' + level + '.length) {\\n                  count' + (level + 1) + '++\\n                }\\n              } else {\\n                target' + (level + 1) + ' = target' + level + '[' + index + ']\\n              }\\n\\n              ' + block + '\\n\\n              if (count' + (level + 1) + ' > 0) {\\n                target' + level + '[' + index + '] = target' + (level + 1) + '\\n                count' + level + '++\\n              }\\n\\n            } else {\\n              target' + level + '[' + index + '] = source' + level + '[' + index + ']\\n              count' + level + '++\\n            }\\n          ';\n          }\n\n          if (key) {\n            block = '\\n            if ((typeof source' + level + '[\\'' + key + '\\'] === \\'object\\'\\n                  && source' + level + '[\\'' + key + '\\'] !== null\\n                  && !Array.isArray(source' + level + '[\\'' + key + '\\']))\\n                || !source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n\\n              source' + (level + 1) + ' = source' + level + '[\\'' + key + '\\'] || {}\\n              count' + (level + 1) + ' = 0\\n\\n              if (!target' + level + '.hasOwnProperty(\\'' + key + '\\')\\n                  || typeof target' + level + '[\\'' + key + '\\'] !== \\'object\\'\\n                  || target' + level + '[\\'' + key + '\\'] === null\\n                  || Array.isArray(target' + level + '[\\'' + key + '\\'])) {\\n                target' + (level + 1) + ' = {}\\n                if (source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n                  count' + (level + 1) + '++\\n                }\\n              } else {\\n                target' + (level + 1) + ' = target' + level + '[\\'' + key + '\\']\\n                count' + (level + 1) + '++\\n              }\\n\\n              ' + block + '\\n\\n              if (count' + (level + 1) + ' > 0) {\\n                target' + level + '[\\'' + key + '\\'] = target' + (level + 1) + '\\n                count' + level + '++\\n              }\\n\\n            } else {\\n              target' + level + '[\\'' + key + '\\'] = source' + level + '[\\'' + key + '\\']\\n              count' + level + '++\\n            }\\n          ';\n          }\n        }\n      }\n\n      return block;\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'additionalProperties',\n    value: function additionalProperties() {}\n\n    /**\n     * items\n     */\n\n  }, {\n    key: 'items',\n    value: function items() {\n      var schema = this.schema,\n          root = this.root,\n          level = this.level,\n          key = this.key,\n          index = this.index;\n      var items = schema.items;\n\n      var block = '';\n\n      if (items) {\n\n        if (Array.isArray(items)) {\n          // TODO\n          //\n          //\n          //\n          //\n          //\n          // ...\n\n        } else if ((typeof items === 'undefined' ? 'undefined' : _typeof(items)) === 'object' && items !== null) {\n          var _index = 'i' + (level + 1);\n          var initializer = new Initializer(items, { index: _index, root: root, level: level + 1 });\n\n          block += '\\n          var sLen = source' + (level + 1) + '.length || 0\\n          var tLen = target' + (level + 1) + '.length || 0\\n          var len = 0\\n\\n          if (sLen > len) { len = sLen }\\n          // THIS IS WRONG, CAUSED SIMPLE ARRAY INIT TO FAIL (OVERWRITE\\n          // EXISTING TARGET VALUES WITH UNDEFINED WHEN SOURCE IS SHORTER THAN\\n          // TARGET). LEAVING HERE UNTIL WE FINISH TESTING AND SEE WHY IT MIGHT\\n          // HAVE BEEN HERE IN THE FIRST PLACE.\\n          //\\n          // if (tLen > len) { len = tLen }\\n\\n          for (var ' + _index + ' = 0; ' + _index + ' < len; ' + _index + '++) {\\n            ' + initializer.compile() + '\\n          }\\n        ';\n        }\n\n        // root-level properties boilerplate\n        if (root === this) {\n          block = '\\n          if (Array.isArray(source)) {\\n            if (!Array.isArray(target)) {\\n              throw new Error(\\'?\\')\\n            }\\n\\n            source1 = source\\n            target1 = target\\n\\n            ' + block + '\\n          }\\n        ';\n\n          // nested properties boilerplate\n        } else {\n          block = '\\n          if (Array.isArray(source' + level + '[\\'' + key + '\\']) || !source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n\\n            source' + (level + 1) + ' = source' + level + '[\\'' + key + '\\'] || []\\n            count' + (level + 1) + ' = 0\\n\\n            if (!target' + level + '.hasOwnProperty(\\'' + key + '\\') || !Array.isArray(target' + level + '[\\'' + key + '\\'])) {\\n              target' + (level + 1) + ' = []\\n                if (source' + level + '.hasOwnProperty(\\'' + key + '\\')) {\\n                  count' + (level + 1) + '++\\n                }\\n\\n            } else {\\n              target' + (level + 1) + ' = target' + level + '[\\'' + key + '\\']\\n              count' + (level + 1) + '++\\n            }\\n\\n            ' + block + '\\n\\n            if (count' + (level + 1) + ' > 0) {\\n              target' + level + '[\\'' + key + '\\'] = target' + (level + 1) + '\\n              count' + level + '++\\n            }\\n\\n          } else {\\n            target' + level + '[\\'' + key + '\\'] = source' + level + '[\\'' + key + '\\']\\n            count' + level + '++\\n          }\\n        ';\n        }\n      }\n\n      return block;\n    }\n\n    /**\n     *\n     */\n\n  }, {\n    key: 'additionalItems',\n    value: function additionalItems() {}\n  }], [{\n    key: 'compile',\n    value: function compile(schema) {\n      var initializer = new Initializer(schema);\n      var block = initializer.compile();\n\n      //console.log(beautify(block))\n      try {\n        return new Function('target', 'source', 'options', block);\n      } catch (e) {\n        console.log(e, e.stack);\n      }\n    }\n  }]);\n\n  return Initializer;\n}();\n\nmodule.exports = Initializer;\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Module dependencies\n * @ignore\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar JSONPatch = __webpack_require__(32);\n\n/**\n * JSONDocument\n *\n * @class\n * JSONDocument is a high level interface that binds together all other features of\n * this package and provides the principle method of data modeling.\n */\n\nvar JSONDocument = function () {\n  _createClass(JSONDocument, null, [{\n    key: 'schema',\n\n\n    /**\n     * Schema\n     */\n    get: function get() {\n      throw new Error('Schema must be defined by classes extending JSONDocument');\n    }\n\n    /**\n     * Constructor\n     *\n     * @param {Object} data\n     * @param {Object} options\n     */\n\n  }]);\n\n  function JSONDocument() {\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, JSONDocument);\n\n    this.initialize(data, options);\n  }\n\n  /**\n   * Initialize\n   *\n   * @param {Object} data\n   * @param {Object} options\n   */\n\n\n  _createClass(JSONDocument, [{\n    key: 'initialize',\n    value: function initialize() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var schema = this.constructor.schema;\n\n      schema.initialize(this, data, options);\n    }\n\n    /**\n     * Validate\n     *\n     * @param {JSONSchema} alternate - OPTIONAL alternate schema\n     * @returns {Object}\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(alternate) {\n      var schema = this.constructor.schema;\n\n      return (alternate || schema).validate(this);\n    }\n\n    /**\n     * Patch\n     *\n     * @param {Array} ops\n     */\n\n  }, {\n    key: 'patch',\n    value: function patch(ops) {\n      var patch = new JSONPatch(ops);\n      patch.apply(this);\n    }\n\n    /**\n     * Select\n     */\n\n  }, {\n    key: 'select',\n    value: function select() {}\n\n    /**\n     * Project\n     *\n     * @description\n     * Given a mapping, return an object projected from the current instance.\n     *\n     * @example\n     * let schema = new JSONSchema({\n     *   properties: {\n     *     foo: { type: 'Array' }\n     *   }\n     * })\n     *\n     * let mapping = new JSONMapping({\n     *   '/foo/0': '/bar/baz'\n     * })\n     *\n     * class FooTracker extends JSONDocument {\n     *   static get schema () { return schema }\n     * }\n     *\n     * let instance = new FooTracker({ foo: ['qux'] })\n     * instance.project(mapping)\n     * // => { bar: { baz: 'qux' } }\n     *\n     * @param {JSONMapping} mapping\n     * @return {Object}\n     */\n\n  }, {\n    key: 'project',\n    value: function project(mapping) {\n      return mapping.project(this);\n    }\n\n    /**\n     * Serialize\n     *\n     * @param {Object} object\n     * @returns {string}\n     */\n\n  }], [{\n    key: 'serialize',\n    value: function serialize(object) {\n      return JSON.stringify(object);\n    }\n\n    /**\n     * Deserialize\n     *\n     * @param {string} data\n     * @return {*}\n     */\n\n  }, {\n    key: 'deserialize',\n    value: function deserialize(data) {\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        throw new Error('Failed to parse JSON');\n      }\n    }\n  }]);\n\n  return JSONDocument;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = JSONDocument;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Module dependencies\n * @ignore\n */\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar JSONPointer = __webpack_require__(33);\n\n/**\n * Modes\n */\nvar THROW = 0;\nvar RECOVER = 1;\nvar SILENT = 2;\n\n/**\n * Operations list\n */\nvar OPERATIONS = ['add', 'remove', 'replace', 'move', 'copy', 'test'];\n\n/**\n * Patch\n *\n * @class\n * Implements RFC 6902: JavaScript Object Notation (JSON) Patch\n * https://tools.ietf.org/html/rfc6902\n */\n\nvar JSONPatch = function () {\n\n  /**\n   * Constructor\n   *\n   * @param {Array} ops\n   */\n  function JSONPatch(ops) {\n    _classCallCheck(this, JSONPatch);\n\n    this.ops = ops || [];\n  }\n\n  /**\n   * Apply\n   *\n   * @todo handle errors/roll back\n   * @todo protect properties that are private in the schema\n   * @todo map JSON Pointers real property names\n   *\n   * @param {Object} target\n   */\n\n\n  _createClass(JSONPatch, [{\n    key: 'apply',\n    value: function apply(target) {\n      var _this = this;\n\n      this.ops.forEach(function (operation) {\n        var op = operation.op;\n\n        if (!op) {\n          throw new Error('Missing \"op\" in JSON Patch operation');\n        }\n\n        if (OPERATIONS.indexOf(op) === -1) {\n          throw new Error('Invalid \"op\" in JSON Patch operation');\n        }\n\n        if (!operation.path) {\n          throw new Error('Missing \"path\" in JSON Patch operation');\n        }\n\n        _this[op](operation, target);\n      });\n    }\n\n    /**\n     * Add\n     *\n     * @param {Object} op\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'add',\n    value: function add(op, target) {\n      if (op.value === undefined) {\n        throw new Error('Missing \"value\" in JSON Patch add operation');\n      }\n\n      var pointer = new JSONPointer(op.path, SILENT);\n      pointer.add(target, op.value);\n    }\n\n    /**\n     * Remove\n     *\n     * @param {Object} op\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(op, target) {\n      var pointer = new JSONPointer(op.path);\n      pointer.remove(target);\n    }\n\n    /**\n     * Replace\n     *\n     * @param {Object} op\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'replace',\n    value: function replace(op, target) {\n      if (op.value === undefined) {\n        throw new Error('Missing \"value\" in JSON Patch replace operation');\n      }\n\n      var pointer = new JSONPointer(op.path);\n      pointer.replace(target, op.value);\n    }\n\n    /**\n     * Move\n     *\n     * @param {Object} op\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'move',\n    value: function move(op, target) {\n      if (op.from === undefined) {\n        throw new Error('Missing \"from\" in JSON Patch move operation');\n      }\n\n      if (op.path.match(new RegExp('^' + op.from))) {\n        throw new Error('Invalid \"from\" in JSON Patch move operation');\n      }\n\n      var pointer = new JSONPointer(op.path);\n      var from = new JSONPointer(op.from);\n      var value = from.get(target);\n\n      from.remove(target);\n      pointer.add(target, value);\n    }\n\n    /**\n     * Copy\n     *\n     * @param {Object} op\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'copy',\n    value: function copy(op, target) {\n      if (op.from === undefined) {\n        throw new Error('Missing \"from\" in JSON Patch copy operation');\n      }\n\n      var pointer = new JSONPointer(op.path);\n      var from = new JSONPointer(op.from);\n      var value = from.get(target);\n\n      pointer.add(target, value);\n    }\n\n    /**\n     * Test\n     *\n     * @param {Object} op\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'test',\n    value: function test(op, target) {\n      if (op.value === undefined) {\n        throw new Error('Missing \"value\" in JSON Patch test operation');\n      }\n\n      var pointer = new JSONPointer(op.path);\n      var value = pointer.get(target);\n\n      switch (_typeof(op.value)) {\n        //case 'string':\n        //case 'number':\n        //case 'boolean':\n        //  if (value !== op.value) {\n        //    throw new Error('Mismatching JSON Patch test value')\n        //  }\n        default:\n          if (value !== op.value) {\n            throw new Error('Mismatching JSON Patch test value');\n          }\n      }\n    }\n  }]);\n\n  return JSONPatch;\n}();\n\n/**\n * Exports\n */\n\n\nmodule.exports = JSONPatch;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Mode enumeration\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar THROW = 0;\nvar RECOVER = 1;\nvar SILENT = 2;\n\n/**\n * JSONPointer\n *\n * @class\n * Implements RFC 6901: JavaScript Object Notation (JSON) Pointer\n * https://tools.ietf.org/html/rfc6901\n */\n\nvar JSONPointer = function () {\n\n  /**\n   * Constructor\n   */\n  function JSONPointer(expr, mode) {\n    _classCallCheck(this, JSONPointer);\n\n    this.expr = expr;\n    this.mode = mode || THROW;\n    this.tokens = expr && expr.charAt(0) === '#' ? this.parseURIFragmentIdentifier(expr) : this.parseJSONString(expr);\n  }\n\n  /**\n   * Escape\n   */\n\n\n  _createClass(JSONPointer, [{\n    key: 'escape',\n    value: function escape(expr) {\n      return expr.replace(/~/g, '~0').replace(/\\//g, '~1');\n    }\n\n    /**\n     * Unescape\n     */\n\n  }, {\n    key: 'unescape',\n    value: function unescape(expr) {\n      return expr.replace(/~1/g, '/').replace(/~0/g, '~');\n    }\n\n    /**\n     * Parse\n     */\n\n  }, {\n    key: 'parseJSONString',\n\n\n    /**\n     * Parse JSON String\n     *\n     * @description Parse an expression into a list of tokens\n     * @param {string} expr\n     * @returns {Array}\n     */\n    value: function parseJSONString(expr) {\n      if (typeof expr !== 'string') {\n        throw new Error('JSON Pointer must be a string');\n      }\n\n      if (expr === '') {\n        return [];\n      }\n\n      if (expr.charAt(0) !== '/') {\n        throw new Error('Invalid JSON Pointer');\n      }\n\n      if (expr === '/') {\n        return [''];\n      }\n\n      return expr.substr(1).split('/').map(this.unescape);\n    }\n\n    /**\n     * To JSON String\n     *\n     * @description Render a JSON string representation of a pointer\n     * @returns {string}\n     */\n\n  }, {\n    key: 'toJSONString',\n    value: function toJSONString() {\n      return '/' + this.tokens.map(this.escape).join('/');\n    }\n\n    /**\n     * Parse URI Fragment Identifer\n     */\n\n  }, {\n    key: 'parseURIFragmentIdentifier',\n    value: function parseURIFragmentIdentifier(expr) {\n      if (typeof expr !== 'string') {\n        throw new Error('JSON Pointer must be a string');\n      }\n\n      if (expr.charAt(0) !== '#') {\n        throw new Error('Invalid JSON Pointer URI Fragment Identifier');\n      }\n\n      return this.parseJSONString(decodeURIComponent(expr.substr(1)));\n    }\n\n    /**\n     * To URI Fragment Identifier\n     *\n     * @description Render a URI Fragment Identifier representation of a pointer\n     * @returns {string}\n     */\n\n  }, {\n    key: 'toURIFragmentIdentifier',\n    value: function toURIFragmentIdentifier() {\n      var _this = this;\n\n      var value = this.tokens.map(function (token) {\n        return encodeURIComponent(_this.escape(token));\n      }).join('/');\n\n      return '#/' + value;\n    }\n\n    /**\n     * Get\n     *\n     * @description Get a value from the source object referenced by the pointer\n     * @param {Object} source\n     * @returns {*}\n     */\n\n  }, {\n    key: 'get',\n    value: function get(source) {\n      var current = source;\n      var tokens = this.tokens;\n\n      for (var i = 0; i < tokens.length; i++) {\n        if (!current || current[tokens[i]] === undefined) {\n          if (this.mode !== THROW) {\n            return undefined;\n          } else {\n            throw new Error('Invalid JSON Pointer reference');\n          }\n        }\n\n        current = current[tokens[i]];\n      }\n\n      return current;\n    }\n\n    /**\n     * Add\n     *\n     * @description Set a value on a target object referenced by the pointer. Put\n     * will insert an array element. To change an existing array elemnent, use\n     * `pointer.set()`\n     * @param {Object} target\n     * @param {*} value\n     */\n\n  }, {\n    key: 'add',\n    value: function add(target, value) {\n      var tokens = this.tokens;\n      var current = target;\n\n      // iterate through the tokens\n      for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n\n        // set the property on the target location\n        if (i === tokens.length - 1) {\n          if (token === '-') {\n            current.push(value);\n          } else if (Array.isArray(current)) {\n            current.splice(token, 0, value);\n          } else if (value !== undefined) {\n            current[token] = value;\n          }\n\n          // handle missing target location based on \"mode\"\n        } else if (!current[token]) {\n          switch (this.mode) {\n            case THROW:\n              throw new Error('Invalid JSON Pointer reference');\n\n            case RECOVER:\n              current = current[token] = parseInt(token) ? [] : {};\n              break;\n\n            case SILENT:\n              return;\n\n            default:\n              throw new Error('Invalid pointer mode');\n          }\n\n          // reference the next object in the path\n        } else {\n          current = current[token];\n        }\n      }\n    }\n\n    /**\n     * Replace\n     *\n     * @description Set a value on a target object referenced by the pointer. Set will\n     * overwrite an existing array element at the target location.\n     * @param {Object} target\n     * @param {*} value\n     */\n\n  }, {\n    key: 'replace',\n    value: function replace(target, value) {\n      var tokens = this.tokens;\n      var current = target;\n\n      for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n\n        if (i === tokens.length - 1) {\n          current[token] = value;\n        } else if (!current[token]) {\n          current = current[token] = parseInt(token) ? [] : {};\n        } else {\n          current = current[token];\n        }\n      }\n    }\n\n    /**\n     * Del\n     *\n     * - if this is an array it should splice the value out\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(target) {\n      var tokens = this.tokens;\n      var current = target;\n\n      for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n\n        if (current === undefined || current[token] === undefined) {\n          return undefined;\n        } else if (Array.isArray(current)) {\n          current.splice(token, 1);\n          return undefined;\n        } else if (i === tokens.length - 1) {\n          delete current[token];\n        }\n\n        current = current[token];\n      }\n\n      // delete from the target\n    }\n  }], [{\n    key: 'parse',\n    value: function parse(expr) {\n      return new JSONPointer(expr);\n    }\n  }]);\n\n  return JSONPointer;\n}();\n\n/**\n * Exports\n */\n\n\nmodule.exports = JSONPointer;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Module dependencies\n * @ignore\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar JSONPointer = __webpack_require__(33);\n\n/**\n * JSONPointer mode\n */\nvar RECOVER = 1;\n\n/**\n * JSONMapping\n *\n * @class\n * Defines a means to declaratively translate between object\n * representations using JSON Pointer syntax.\n */\n\nvar JSONMapping = function () {\n\n  /**\n   * Constructor\n   *\n   * @description Translate pointers from JSON Strings into Pointer objects\n   * @param {Object} mapping\n   */\n  function JSONMapping(mapping) {\n    var _this = this;\n\n    _classCallCheck(this, JSONMapping);\n\n    Object.defineProperty(this, 'mapping', {\n      enumerable: false,\n      value: new Map()\n    });\n\n    Object.keys(mapping).forEach(function (key) {\n      var value = mapping[key];\n      _this.mapping.set(new JSONPointer(key, RECOVER), new JSONPointer(value, RECOVER));\n    });\n  }\n\n  /**\n   * Map\n   *\n   * @description Assign values from source to target by reading the mapping\n   * from right to left.\n   * @param {Object} target\n   * @param {Object} source\n   */\n\n\n  _createClass(JSONMapping, [{\n    key: 'map',\n    value: function map(target, source) {\n      this.mapping.forEach(function (right, left) {\n        left.add(target, right.get(source));\n      });\n    }\n\n    /**\n     * Project\n     *\n     * @description Assign values from source to target by reading the mapping\n     * from left to right.\n     * @param {Object} source\n     * @param {Object} target\n     */\n\n  }, {\n    key: 'project',\n    value: function project(source, target) {\n      this.mapping.forEach(function (right, left) {\n        right.add(target, left.get(source));\n      });\n    }\n  }]);\n\n  return JSONMapping;\n}();\n\n/**\n * Exports\n */\n\n\nmodule.exports = JSONMapping;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Module dependencies\n * @ignore\n */\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Initializer = __webpack_require__(30);\nvar Validator = __webpack_require__(36);\n\n/**\n * JSONSchema\n *\n * @class\n * Compiles JSON Schema documents to an object with object initialization\n * and validation methods.\n */\n\nvar JSONSchema = function () {\n\n  /**\n   * Constructor\n   *\n   * @param {Object} schema\n   */\n  function JSONSchema(schema) {\n    _classCallCheck(this, JSONSchema);\n\n    // TODO: optionally parse JSON string?\n    Object.assign(this, schema);\n\n    // add schema-derived initialize and validate methods\n    Object.defineProperties(this, {\n      initialize: {\n        enumerable: false,\n        writeable: false,\n        value: Initializer.compile(schema)\n      },\n      validate: {\n        enumerable: false,\n        writeable: false,\n        value: Validator.compile(schema)\n      }\n    });\n  }\n\n  /**\n   * Extend\n   *\n   * @description\n   * ...\n   * Dear future,\n   *\n   * This function was meticulously plagiarized from some curious amalgam of\n   * stackoverflow posts whilst dozing off at my keyboard, too deprived of REM-\n   * sleep to recurse unassisted. If it sucks, you have only yourself to blame.\n   *\n   * Goodnight.\n   *\n   * @param {Object} schema\n   * @returns {JSONSchema}\n   */\n\n\n  _createClass(JSONSchema, [{\n    key: 'extend',\n    value: function extend(schema) {\n      function isObject(data) {\n        return data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data !== null && !Array.isArray(data);\n      }\n\n      function extender(target, source) {\n        var result = Object.assign({}, target);\n        if (isObject(target) && isObject(source)) {\n          Object.keys(source).forEach(function (key) {\n            if (isObject(source[key])) {\n              if (!(key in target)) {\n                Object.assign(result, _defineProperty({}, key, source[key]));\n              } else {\n                result[key] = extender(target[key], source[key]);\n              }\n            } else {\n              Object.assign(result, _defineProperty({}, key, source[key]));\n            }\n          });\n        }\n        return result;\n      }\n\n      var descriptor = extender(this, schema);\n      return new JSONSchema(descriptor);\n    }\n  }]);\n\n  return JSONSchema;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = JSONSchema;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Module dependencies\n * @ignore\n */\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar formats = __webpack_require__(29);\n\n/**\n * For variable iterator counter\n *\n * @type {number}\n */\nvar indexCount = 0;\n\n/**\n * Validator\n *\n * Compile an object describing a JSON Schema into a validation function.\n */\n\nvar Validator = function () {\n  _createClass(Validator, null, [{\n    key: 'compile',\n\n\n    /**\n     * Compile (static)\n     *\n     * @description\n     * Compile an object describing a JSON Schema into a validation function.\n     *\n     * @param {Object} schema\n     * @returns {Function}\n     */\n    value: function compile(schema) {\n      var validator = new Validator(schema);\n\n      var body = '\\n      // \"cursor\"\\n      let value = data\\n      let container\\n      let stack = []\\n      let top = -1\\n\\n      // error state\\n      let valid = true\\n      let errors = []\\n\\n      // complex schema state\\n      let initialValidity\\n      let anyValid\\n      let notValid\\n      let countOfValid\\n      let initialErrorCount\\n      let accumulatedErrorCount\\n\\n      // validation code\\n      ' + validator.compile() + '\\n\\n      // validation result\\n      return {\\n        valid,\\n        errors\\n      }\\n    ';\n\n      return new Function('data', body);\n    }\n\n    /**\n     * Return current iterator index counter and increase value\n     *\n     * @returns {number}\n     */\n\n  }, {\n    key: 'counter',\n    get: function get() {\n      return indexCount++;\n    }\n\n    /**\n     * Constructor\n     *\n     * @param {Object} schema - object representation of a schema\n     * @param {string} options - compilation options\n     */\n\n  }]);\n\n  function Validator(schema) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Validator);\n\n    // assign schema to this\n    this.schema = schema;\n\n    // assign all options to this\n    Object.assign(this, options);\n\n    // ensure address is defined\n    if (!this.address) {\n      this.address = '';\n    }\n\n    // ensure require is boolean\n    if (this.require !== true) {\n      this.require = false;\n    }\n  }\n\n  /**\n   * Compile\n   *\n   * @description\n   * The instance compile method is \"dumb\". It only sequences invocation of\n   * more specific compilation methods. It generates code to\n   *\n   *  - read a value from input\n   *  - validate type(s) of input\n   *  - validate constraints described by various schema keywords\n   *\n   * Conditional logic related to code generation is pushed downsteam to\n   * type-specific methods.\n   */\n\n\n  _createClass(Validator, [{\n    key: 'compile',\n    value: function compile() {\n      var block = '';\n\n      if (this.require) {\n        block += this.required();\n      }\n\n      // type validation\n      block += this.type();\n\n      // type specific validation generators\n      // null and boolean are covered by this.type()\n      // integer should be covered by number and this.type()\n      block += this.array();\n      block += this.number();\n      block += this.object();\n      block += this.string();\n\n      // non-type-specific validation generators\n      block += this.enum();\n      block += this.anyOf();\n      block += this.allOf();\n      block += this.not();\n      block += this.oneOf();\n\n      return block;\n    }\n\n    /**\n     * push\n     */\n\n  }, {\n    key: 'push',\n    value: function push() {\n      return '\\n      stack.push(value)\\n      container = value\\n      top++\\n    ';\n    }\n\n    /**\n     * pop\n     */\n\n  }, {\n    key: 'pop',\n    value: function pop() {\n      return '\\n      if (stack.length > 1) {\\n        top--\\n        stack.pop()\\n      }\\n\\n      value = container = stack[top]\\n    ';\n    }\n\n    /**\n     * type\n     *\n     * @description\n     * > An instance matches successfully if its primitive type is one of the\n     * > types defined by keyword. Recall: \"number\" includes \"integer\".\n     * > JSON Schema Validation Section 5.5.2\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'type',\n    value: function type() {\n      var type = this.schema.type,\n          address = this.address;\n\n      var block = '';\n\n      if (type) {\n        var types = Array.isArray(type) ? type : [type];\n        var conditions = types.map(function (type) {\n          // TODO: can we make a mapping object for this to clean it up?\n          if (type === 'array') return '!Array.isArray(value)';\n          if (type === 'boolean') return 'typeof value !== \\'boolean\\'';\n          if (type === 'integer') return '!Number.isInteger(value)';\n          if (type === 'null') return 'value !== null';\n          if (type === 'number') return 'typeof value !== \\'number\\'';\n          if (type === 'object') return '(typeof value !== \\'object\\' || Array.isArray(value) || value === null)';\n          if (type === 'string') return 'typeof value !== \\'string\\'';\n        }).join(' && ');\n\n        block += '\\n      // ' + address + ' type checking\\n      if (value !== undefined && ' + conditions + ') {\\n        valid = false\\n        errors.push({\\n          keyword: \\'type\\',\\n          message: \\'invalid type\\'\\n        })\\n      }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * Type-specific validations\n     *\n     * Type checking is optional in JSON Schema, and a schema can allow\n     * multiple types. Generated code needs to apply type-specific validations\n     * only to appropriate values, and ignore everything else. Type validation\n     * itself is handled separately from other validation keywords.\n     *\n     * The methods `array`, `number`, `object`, `string` generate type-specific\n     * validation code blocks, wrapped in a conditional such that they will\n     * only be applied to values of that type.\n     *\n     * For example, the `number` method, given the schema\n     *\n     *     { minimum: 3 }\n     *\n     * will generate\n     *\n     *     if (typeof value === 'number') {\n     *       if (value < 3) {\n     *         valid = false\n     *         errors.push({ message: '...' })\n     *       }\n     *     }\n     *\n     * Integer values are also numbers, and are validated the same as numbers\n     * other than the type validation itself. Therefore no `integer` method is\n     * needed.\n     */\n\n    /**\n     * array\n     *\n     * @description\n     * Invoke methods for array-specific keywords and wrap resulting code in\n     * type-checking conditional so that any resulting validations are only\n     * applied to array values.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'array',\n    value: function array() {\n      var keywords = ['additionalItems', 'items', 'minItems', 'maxItems', 'uniqueItems'];\n      var validations = this.validations(keywords);\n      var block = '';\n\n      if (validations.length > 0) {\n        block += '\\n      /**\\n       * Array validations\\n       */\\n      if (Array.isArray(value)) {\\n      ' + validations + '\\n      }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * number\n     *\n     * @description\n     * Invoke methods for number-specific keywords and wrap resulting code in\n     * type-checking conditional so that any resulting validations are only\n     * applied to number values.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'number',\n    value: function number() {\n      var keywords = ['minimum', 'maximum', 'multipleOf'];\n      var validations = this.validations(keywords);\n      var block = '';\n\n      if (validations.length > 0) {\n        block += '\\n      /**\\n       * Number validations\\n       */\\n      if (typeof value === \\'number\\') {\\n      ' + validations + '\\n      }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * object\n     *\n     * @description\n     * Invoke methods for object-specific keywords and wrap resulting code in\n     * type-checking conditional so that any resulting validations are only\n     * applied to object values.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'object',\n    value: function object() {\n      var keywords = ['maxProperties', 'minProperties', 'additionalProperties', 'properties', 'patternProperties', 'dependencies', 'schemaDependencies', 'propertyDependencies'];\n      var validations = this.validations(keywords);\n      var block = '';\n\n      if (validations.length > 0) {\n        block += '\\n      /**\\n       * Object validations\\n       */\\n      if (typeof value === \\'object\\' && value !== null && !Array.isArray(value)) {\\n      ' + validations + '\\n      }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * string\n     *\n     * @description\n     * Invoke methods for string-specific keywords and wrap resulting code in\n     * type-checking conditional so that any resulting validations are only\n     * applied to string values.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'string',\n    value: function string() {\n      var keywords = ['maxLength', 'minLength', 'pattern', 'format'];\n      var validations = this.validations(keywords);\n      var block = '';\n\n      if (validations.length > 0) {\n        block += '\\n      /**\\n       * String validations\\n       */\\n      if (typeof value === \\'string\\') {\\n      ' + validations + '\\n      }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * validations\n     *\n     * @description\n     * Iterate over an array of keywords and invoke code generator methods\n     * for each. Concatenate the results together and return. Used by \"type\"\n     * methods such as this.array() and this.string()\n     *\n     * @param {Array} keywords\n     * @returns {string}\n     */\n\n  }, {\n    key: 'validations',\n    value: function validations(keywords) {\n      var _this = this;\n\n      var schema = this.schema;\n\n      var block = '';\n\n      var constraints = Object.keys(schema).filter(function (key) {\n        return keywords.indexOf(key) !== -1;\n      });\n\n      constraints.forEach(function (keyword) {\n        block += _this[keyword]();\n      });\n\n      return block;\n    }\n\n    /**\n     * enum\n     *\n     * @description\n     * > An instance validates successfully against this keyword if its value\n     * > is equal to one of the elements in this keyword's array value.\n     * > JSON Schema Validation Section 5.5.1\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'enum',\n    value: function _enum() {\n      var enumerated = this.schema.enum,\n          address = this.address;\n\n      var conditions = ['value !== undefined'];\n      var block = '';\n\n      if (enumerated) {\n        enumerated.forEach(function (value) {\n          switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n            case 'boolean':\n              conditions.push('value !== ' + value);\n              break;\n\n            case 'number':\n              conditions.push('value !== ' + value);\n              break;\n\n            case 'string':\n              conditions.push('value !== \"' + value + '\"');\n              break;\n\n            case 'object':\n              if (value === null) {\n                conditions.push('value !== null');\n              } else {\n                conditions.push('\\'' + JSON.stringify(value) + '\\' !== JSON.stringify(value)');\n              }\n              break;\n\n            default:\n              throw new Error('Things are not well in the land of enum');\n\n          }\n        });\n\n        block += '\\n      /**\\n       * Validate \"' + address + '\" enum\\n       */\\n      if (' + conditions.join(' && ') + ') {\\n        valid = false\\n        errors.push({\\n          keyword: \\'enum\\',\\n          message: JSON.stringify(value) + \\' is not an enumerated value\\'\\n        })\\n      }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * anyOf\n     *\n     * @description\n     * > An instance validates successfully against this keyword if it\n     * > validates successfully against at least one schema defined by this\n     * > keyword's value.\n     * > JSON Schema Validation Section 5.5.4\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'anyOf',\n    value: function anyOf() {\n      var anyOf = this.schema.anyOf,\n          address = this.address;\n\n      var block = '';\n\n      if (Array.isArray(anyOf)) {\n        block += '\\n        initialValidity = valid\\n        initialErrorCount = errors.length\\n        anyValid = false\\n      ';\n\n        anyOf.forEach(function (subschema) {\n          var validator = new Validator(subschema, { address: address });\n          block += '\\n        accumulatedErrorCount = errors.length\\n        ' + validator.compile() + '\\n        if (accumulatedErrorCount === errors.length) {\\n          anyValid = true\\n        }\\n        ';\n        });\n\n        block += '\\n          if (anyValid === true) {\\n            valid = initialValidity\\n            errors = errors.slice(0, initialErrorCount)\\n          }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * allOf\n     *\n     * @description\n     * > An instance validates successfully against this keyword if it\n     * > validates successfully against all schemas defined by this keyword's\n     * > value.\n     * > JSON Schema Validation Section 5.5.3\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'allOf',\n    value: function allOf() {\n      var allOf = this.schema.allOf,\n          address = this.address;\n\n      var block = '';\n\n      if (Array.isArray(allOf)) {\n        allOf.forEach(function (subschema) {\n          var validator = new Validator(subschema, { address: address });\n          block += '\\n        ' + validator.compile() + '\\n        ';\n        });\n      }\n\n      return block;\n    }\n\n    /**\n     * oneOf\n     *\n     * @description\n     * > An instance validates successfully against this keyword if it\n     * > validates successfully against exactly one schema defined by this\n     * > keyword's value.\n     * > JSON Schema Validation Section 5.5.5\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'oneOf',\n    value: function oneOf() {\n      var oneOf = this.schema.oneOf,\n          address = this.address;\n\n      var block = '';\n\n      if (Array.isArray(oneOf)) {\n        block += '\\n        /**\\n         * Validate ' + address + ' oneOf\\n         */\\n        initialValidity = valid\\n        initialErrorCount = errors.length\\n        countOfValid = 0\\n      ';\n\n        oneOf.forEach(function (subschema) {\n          var validator = new Validator(subschema, { address: address });\n          block += '\\n        accumulatedErrorCount = errors.length\\n        ' + validator.compile() + '\\n        if (accumulatedErrorCount === errors.length) {\\n          countOfValid += 1\\n        }\\n        ';\n        });\n\n        block += '\\n          if (countOfValid === 1) {\\n            valid = initialValidity\\n            errors = errors.slice(0, initialErrorCount)\\n          } else {\\n            valid = false\\n            errors.push({\\n              keyword: \\'oneOf\\',\\n              message: \\'what is a reasonable error message for this case?\\'\\n            })\\n          }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * not\n     *\n     * @description\n     * > An instance is valid against this keyword if it fails to validate\n     * > successfully against the schema defined by this keyword.\n     * > JSON Schema Validation Section 5.5.6\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'not',\n    value: function not() {\n      var not = this.schema.not,\n          address = this.address;\n\n      var block = '';\n\n      if ((typeof not === 'undefined' ? 'undefined' : _typeof(not)) === 'object' && not !== null && !Array.isArray(not)) {\n        var subschema = not;\n        var validator = new Validator(subschema, { address: address });\n\n        block += '\\n        /**\\n         * NOT\\n         */\\n        if (value !== undefined) {\\n          initialValidity = valid\\n          initialErrorCount = errors.length\\n          notValid = true\\n\\n          accumulatedErrorCount = errors.length\\n\\n          ' + validator.compile() + '\\n\\n          if (accumulatedErrorCount === errors.length) {\\n            notValid = false\\n          }\\n\\n          if (notValid === true) {\\n            valid = initialValidity\\n            errors = errors.slice(0, initialErrorCount)\\n          } else {\\n            valid = false\\n            errors = errors.slice(0, initialErrorCount)\\n            errors.push({\\n              keyword: \\'not\\',\\n              message: \\'hmm...\\'\\n            })\\n          }\\n        }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * properties\n     *\n     * @description\n     * Iterate over the `properties` schema property if it is an object. For each\n     * key, initialize a new Validator for the subschema represented by the property\n     * value and invoke compile. Append the result of compiling each subschema to\n     * the block of code being generated.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'properties',\n    value: function properties() {\n      var schema = this.schema,\n          address = this.address;\n      var properties = schema.properties,\n          required = schema.required;\n\n      var block = this.push();\n\n      // ensure the value of \"required\" schema property is an array\n      required = Array.isArray(required) ? required : [];\n\n      if ((typeof properties === 'undefined' ? 'undefined' : _typeof(properties)) === 'object') {\n        Object.keys(properties).forEach(function (key) {\n          var subschema = properties[key];\n          var isRequired = required.indexOf(key) !== -1;\n          // TODO\n          // how should we be calculating these things? should be json pointer?\n          // needs a separate function\n          var pointer = [address, key].filter(function (segment) {\n            return !!segment;\n          }).join('.');\n          var validation = new Validator(subschema, { address: pointer, require: isRequired });\n\n          // read the value\n          block += '\\n        value = container[\\'' + key + '\\']\\n        ';\n\n          block += validation.compile();\n        });\n      }\n\n      block += this.pop();\n\n      return block;\n    }\n\n    /**\n     * Other Properties\n     *\n     * @description\n     * This method is not for a keyword. It wraps validations for\n     * patternProperties and additionalProperties in a single iteration over\n     * an object-type value's properties.\n     *\n     * It should only be invoked once for a given subschema.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'otherProperties',\n    value: function otherProperties() {\n      return '\\n      /**\\n       * Validate Other Properties\\n       */\\n      ' + this.push() + '\\n\\n      for (let key in container) {\\n        value = container[key]\\n        matched = false\\n\\n        ' + this.patternValidations() + '\\n        ' + this.additionalValidations() + '\\n      }\\n\\n      ' + this.pop() + '\\n    ';\n    }\n\n    /**\n     * Pattern Validations\n     *\n     * @description\n     * Generate validation code from a subschema for properties matching a\n     * regular expression.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'patternValidations',\n    value: function patternValidations() {\n      var patternProperties = this.schema.patternProperties;\n\n      var block = '';\n\n      if ((typeof patternProperties === 'undefined' ? 'undefined' : _typeof(patternProperties)) === 'object') {\n        Object.keys(patternProperties).forEach(function (pattern) {\n          var subschema = patternProperties[pattern];\n          var validator = new Validator(subschema);\n          block += '\\n          if (key.match(\\'' + pattern + '\\')) {\\n            matched = true\\n            ' + validator.compile() + '\\n          }\\n        ';\n        });\n      }\n\n      return block;\n    }\n\n    /**\n     * Additional Validations\n     *\n     * @description\n     * Generate validation code, either from a subschema for properties not\n     * defined in the schema, or to disallow properties not defined in the\n     * schema.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'additionalValidations',\n    value: function additionalValidations() {\n      var _schema = this.schema,\n          properties = _schema.properties,\n          additionalProperties = _schema.additionalProperties,\n          address = this.address;\n\n      var validations = '';\n      var block = '';\n\n      // catch additional unmatched properties\n      var conditions = ['matched !== true'];\n\n      // ignore defined properties\n      Object.keys(properties || {}).forEach(function (key) {\n        conditions.push('key !== \\'' + key + '\\'');\n      });\n\n      // validate additional properties\n      if ((typeof additionalProperties === 'undefined' ? 'undefined' : _typeof(additionalProperties)) === 'object') {\n        var subschema = additionalProperties;\n        var validator = new Validator(subschema, { address: address + '[APKey]' });\n        block += '\\n        // validate additional properties\\n        if (' + conditions.join(' && ') + ') {\\n          ' + validator.compile() + '\\n        }\\n      ';\n      }\n\n      // error for additional properties\n      if (additionalProperties === false) {\n        block += '\\n        // validate non-presence of additional properties\\n        if (' + conditions.join(' && ') + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'additionalProperties\\',\\n            message: key + \\' is not a defined property\\'\\n          })\\n        }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * patternProperties\n     *\n     * @description\n     * Generate validation code for properties matching a pattern\n     * defined by the property name (key), which must be a string\n     * representing a valid regular expression.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'patternProperties',\n    value: function patternProperties() {\n      var block = '';\n\n      if (!this.otherPropertiesCalled) {\n        this.otherPropertiesCalled = true;\n        block += this.otherProperties();\n      }\n\n      return block;\n    }\n\n    /**\n     * additionalProperties\n     *\n     * @description\n     * Generate validation code for additional properties not defined\n     * in the schema, or disallow additional properties if the value of\n     * `additionalProperties` in the schema is `false`.\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'additionalProperties',\n    value: function additionalProperties() {\n      var block = '';\n\n      if (!this.otherPropertiesCalled) {\n        this.otherPropertiesCalled = true;\n        block += this.otherProperties();\n      }\n\n      return block;\n    }\n\n    /**\n     * minProperties\n     *\n     * @description\n     * > An object instance is valid against \"minProperties\" if its number of\n     * > properties is greater than, or equal to, the value of this keyword.\n     * > JSON Schema Validation Section 5.4.2\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'minProperties',\n    value: function minProperties() {\n      var minProperties = this.schema.minProperties,\n          address = this.address;\n\n\n      return '\\n        // ' + address + ' min properties\\n        if (Object.keys(value).length < ' + minProperties + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minProperties\\',\\n            message: \\'too few properties\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * maxProperties\n     *\n     * @description\n     * > An object instance is valid against \"maxProperties\" if its number of\n     * > properties is less than, or equal to, the value of this keyword.\n     * > JSON Schema Validation Section 5.4.1\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'maxProperties',\n    value: function maxProperties() {\n      var maxProperties = this.schema.maxProperties,\n          address = this.address;\n\n\n      return '\\n        // ' + address + ' max properties\\n        if (Object.keys(value).length > ' + maxProperties + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maxProperties\\',\\n            message: \\'too many properties\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * Dependencies\n     *\n     * @description\n     * > For all (name, schema) pair of schema dependencies, if the instance has\n     * > a property by this name, then it must also validate successfully against\n     * > the schema.\n     * >\n     * > Note that this is the instance itself which must validate successfully,\n     * > not the value associated with the property name.\n     * >\n     * > For each (name, propertyset) pair of property dependencies, if the\n     * > instance has a property by this name, then it must also have properties\n     * > with the same names as propertyset.\n     * > JSON Schema Validation Section 5.4.5.2\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'dependencies',\n    value: function dependencies() {\n      var dependencies = this.schema.dependencies,\n          address = this.address;\n\n\n      var block = this.push();\n\n      if ((typeof dependencies === 'undefined' ? 'undefined' : _typeof(dependencies)) === 'object') {\n        Object.keys(dependencies).forEach(function (key) {\n          var dependency = dependencies[key];\n          var conditions = [];\n\n          if (Array.isArray(dependency)) {\n            dependency.forEach(function (item) {\n              conditions.push('container[\\'' + item + '\\'] === undefined');\n            });\n\n            block += '\\n            if (container[\\'' + key + '\\'] !== undefined && (' + conditions.join(' || ') + ')) {\\n              valid = false\\n              errors.push({\\n                keyword: \\'dependencies\\',\\n                message: \\'unmet dependencies\\'\\n              })\\n            }\\n          ';\n          } else if ((typeof dependency === 'undefined' ? 'undefined' : _typeof(dependency)) === 'object') {\n            var subschema = dependency;\n            var validator = new Validator(subschema, { address: address });\n\n            block += '\\n            if (container[\\'' + key + '\\'] !== undefined) {\\n              ' + validator.compile() + '\\n            }\\n          ';\n          }\n        });\n      }\n\n      block += this.pop();\n\n      return block;\n    }\n\n    /**\n     * Required\n     *\n     * @description\n     * > An object instance is valid against this keyword if its property set\n     * > contains all elements in this keyword's array value.\n     * > JSON Schema Validation Section 5.4.3\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'required',\n    value: function required() {\n      var properties = this.schema.properties,\n          address = this.address;\n\n      var block = '';\n\n      block += '\\n      // validate ' + address + ' presence\\n      if (value === undefined) {\\n        valid = false\\n        errors.push({\\n          keyword: \\'required\\',\\n          message: \\'is required\\'\\n        })\\n      }\\n    ';\n\n      return block;\n    }\n\n    /**\n     * additionalItems\n     *\n     * @description\n     * > Successful validation of an array instance with regards to these two\n     * > keywords is determined as follows: if \"items\" is not present, or its\n     * > value is an object, validation of the instance always succeeds,\n     * > regardless of the value of \"additionalItems\"; if the value of\n     * > \"additionalItems\" is boolean value true or an object, validation of\n     * > the instance always succeeds; if the value of \"additionalItems\" is\n     * > boolean value false and the value of \"items\" is an array, the\n     * > instance is valid if its size is less than, or equal to, the size\n     * > of \"items\".\n     * > JSON Schema Validation Section 5.3.1\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'additionalItems',\n    value: function additionalItems() {\n      var _schema2 = this.schema,\n          items = _schema2.items,\n          additionalItems = _schema2.additionalItems,\n          address = this.address;\n\n      var block = '';\n\n      if (additionalItems === false && Array.isArray(items)) {\n        block += '\\n        // don\\'t allow additional items\\n        if (value.length > ' + items.length + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'additionalItems\\',\\n            message: \\'additional items not allowed\\'\\n          })\\n        }\\n      ';\n      }\n\n      if ((typeof additionalItems === 'undefined' ? 'undefined' : _typeof(additionalItems)) === 'object' && additionalItems !== null && Array.isArray(items)) {\n        var subschema = additionalItems;\n        var validator = new Validator(subschema);\n        var counter = Validator.counter;\n\n        block += '\\n        // additional items\\n        ' + this.push() + '\\n\\n        for (var i' + counter + ' = ' + items.length + '; i' + counter + ' <= container.length; i' + counter + '++) {\\n          value = container[i' + counter + ']\\n          ' + validator.compile() + '\\n        }\\n\\n        ' + this.pop() + '\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * Items\n     *\n     * @description\n     * > Successful validation of an array instance with regards to these two\n     * > keywords is determined as follows: if \"items\" is not present, or its\n     * > value is an object, validation of the instance always succeeds,\n     * > regardless of the value of \"additionalItems\"; if the value of\n     * > \"additionalItems\" is boolean value true or an object, validation of\n     * > the instance always succeeds; if the value of \"additionalItems\" is\n     * > boolean value false and the value of \"items\" is an array, the\n     * > instance is valid if its size is less than, or equal to, the size\n     * > of \"items\".\n     * > JSON Schema Validation Section 5.3.1\n     *\n     * Code to generate\n     *\n     *     // this outer conditional is generated by this.array()\n     *     if (Array.isArray(value) {\n     *       let parent = value\n     *       for (let i = 0; i < parent.length; i++) {\n     *         value = parent[i]\n     *         // other validation code depending on value here\n     *       }\n     *       value = parent\n     *     }\n     *\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'items',\n    value: function items() {\n      var items = this.schema.items,\n          address = this.address;\n\n      var block = '';\n\n      // if items is an array\n      if (Array.isArray(items)) {\n        block += this.push();\n\n        items.forEach(function (item, index) {\n          var subschema = item;\n          var validator = new Validator(subschema, { address: address + '[' + index + ']' });\n\n          block += '\\n          // item #' + index + '\\n          value = container[' + index + ']\\n          ' + validator.compile() + '\\n        ';\n        });\n\n        block += this.pop();\n\n        // if items is an object\n      } else if ((typeof items === 'undefined' ? 'undefined' : _typeof(items)) === 'object' && items !== null) {\n        var subschema = items;\n        var validator = new Validator(subschema);\n        var counter = Validator.counter;\n\n        block += '\\n        // items\\n        ' + this.push() + '\\n\\n        for (var i' + counter + ' = 0; i' + counter + ' < container.length; i' + counter + '++) {\\n          // read array element\\n          value = container[i' + counter + ']\\n          ' + validator.compile() + '\\n        }\\n\\n        ' + this.pop() + '\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * minItems\n     *\n     * @description\n     * > An array instance is valid against \"minItems\" if its size is greater\n     * > than, or equal to, the value of this keyword.\n     * > JSON Schema Validation Section 5.3.3\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'minItems',\n    value: function minItems() {\n      var minItems = this.schema.minItems,\n          address = this.address;\n\n\n      return '\\n        // ' + address + ' min items\\n        if (value.length < ' + minItems + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minItems\\',\\n            message: \\'too few properties\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * maxItems\n     *\n     * @description\n     * > An array instance is valid against \"maxItems\" if its size is less\n     * > than, or equal to, the value of this keyword.\n     * > JSON Schema Validation Section 5.3.2\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'maxItems',\n    value: function maxItems() {\n      var maxItems = this.schema.maxItems,\n          address = this.address;\n\n\n      return '\\n        // ' + address + ' max items\\n        if (value.length > ' + maxItems + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maxItems\\',\\n            message: \\'too many properties\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * uniqueItems\n     *\n     * @description\n     * > If this keyword has boolean value false, the instance validates\n     * > successfully. If it has boolean value true, the instance validates\n     * > successfully if all of its elements are unique.\n     * > JSON Schema Validation Section 5.3.4\n     *\n     * TODO\n     * optimize\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'uniqueItems',\n    value: function uniqueItems() {\n      var uniqueItems = this.schema.uniqueItems,\n          address = this.address;\n\n      var block = '';\n\n      if (uniqueItems === true) {\n        block += '\\n        // validate ' + address + ' unique items\\n        let values = value.map(v => JSON.stringify(v)) // TODO: optimize\\n        let set = new Set(values)\\n        if (values.length !== set.size) {\\n          valid = false\\n          errors.push({\\n            keyword: \\'uniqueItems\\',\\n            message: \\'items must be unique\\'\\n          })\\n        }\\n      ';\n      }\n\n      return block;\n    }\n\n    /**\n     * minLength\n     *\n     * @description\n     * > A string instance is valid against this keyword if its length is\n     * > greater than, or equal to, the value of this keyword. The length of\n     * > a string instance is defined as the number of its characters as\n     * > defined by RFC 4627 [RFC4627].\n     * > JSON Schema Validation Section 5.2.2\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'minLength',\n    value: function minLength() {\n      var minLength = this.schema.minLength,\n          address = this.address;\n\n\n      return '\\n        // ' + address + ' validate minLength\\n        if (Array.from(value).length < ' + minLength + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minLength\\',\\n            message: \\'too short\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * maxLength\n     *\n     * @description\n     * > A string instance is valid against this keyword if its length is less\n     * > than, or equal to, the value of this keyword. The length of a string\n     * > instance is defined as the number of its characters as defined by\n     * > RFC 4627 [RFC4627].\n     * > JSON Schema Validation Section 5.2.1\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'maxLength',\n    value: function maxLength() {\n      var maxLength = this.schema.maxLength,\n          address = this.address;\n\n\n      return '\\n        // ' + address + ' validate maxLength\\n        if (Array.from(value).length > ' + maxLength + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maxLength\\',\\n            message: \\'too long\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * Pattern\n     *\n     * @description\n     * > A string instance is considered valid if the regular expression\n     * > matches the instance successfully.\n     * > JSON Schema Validation Section 5.2.3\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'pattern',\n    value: function pattern() {\n      var pattern = this.schema.pattern,\n          address = this.address;\n\n\n      if (pattern) {\n        return '\\n          // ' + address + ' validate pattern\\n          if (!value.match(new RegExp(\\'' + pattern + '\\'))) {\\n            valid = false\\n            errors.push({\\n              keyword: \\'pattern\\',\\n              message: \\'does not match the required pattern\\'\\n            })\\n          }\\n      ';\n      }\n    }\n\n    /**\n     * Format\n     *\n     * @description\n     * > Structural validation alone may be insufficient to validate that\n     * > an instance meets all the requirements of an application. The\n     * > \"format\" keyword is defined to allow interoperable semantic\n     * > validation for a fixed subset of values which are accurately\n     * > described by authoritative resources, be they RFCs or other\n     * > external specifications.\n     * > JSON Schema Validation Section 7.1\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'format',\n    value: function format() {\n      var format = this.schema.format,\n          address = this.address;\n\n      var matcher = formats.resolve(format);\n\n      if (matcher) {\n        return '\\n      // ' + address + ' validate format\\n      if (!value.match(' + matcher + ')) {\\n        valid = false\\n        errors.push({\\n          keyword: \\'format\\',\\n          message: \\'is not \"' + format + '\" format\\'\\n        })\\n      }\\n      ';\n      }\n    }\n\n    /**\n     * Minimum\n     *\n     * @description\n     * > Successful validation depends on the presence and value of\n     * > \"exclusiveMinimum\": if \"exclusiveMinimum\" is not present, or has\n     * > boolean value false, then the instance is valid if it is greater\n     * > than, or equal to, the value of \"minimum\"; if \"exclusiveMinimum\" is\n     * > present and has boolean value true, the instance is valid if it is\n     * > strictly greater than the value of \"minimum\".\n     * > JSON Schema Validation Section 5.1.3\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'minimum',\n    value: function minimum() {\n      var _schema3 = this.schema,\n          minimum = _schema3.minimum,\n          exclusiveMinimum = _schema3.exclusiveMinimum,\n          address = this.address;\n\n      var operator = exclusiveMinimum === true ? '<=' : '<';\n\n      return '\\n        // ' + address + ' validate minimum\\n        if (value ' + operator + ' ' + minimum + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'minimum\\',\\n            message: \\'too small\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * Maximum\n     *\n     * @description\n     * > Successful validation depends on the presence and value of\n     * > \"exclusiveMaximum\": if \"exclusiveMaximum\" is not present, or has\n     * > boolean value false, then the instance is valid if it is lower than,\n     * > or equal to, the value of \"maximum\"; if \"exclusiveMaximum\" has\n     * > boolean value true, the instance is valid if it is strictly lower\n     * > than the value of \"maximum\".\n     * > JSON Schema Validation Section 5.1.2\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'maximum',\n    value: function maximum() {\n      var _schema4 = this.schema,\n          maximum = _schema4.maximum,\n          exclusiveMaximum = _schema4.exclusiveMaximum,\n          address = this.address;\n\n      var operator = exclusiveMaximum === true ? '>=' : '>';\n\n      return '\\n        // ' + address + ' validate maximum\\n        if (value ' + operator + ' ' + maximum + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'maximum\\',\\n            message: \\'too large\\'\\n          })\\n        }\\n    ';\n    }\n\n    /**\n     * multipleOf\n     *\n     * @description\n     * > A numeric instance is valid against \"multipleOf\" if the result of\n     * > the division of the instance by this keyword's value is an integer.\n     * > JSON Schema Validation Section 5.1.1\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'multipleOf',\n    value: function multipleOf() {\n      var multipleOf = this.schema.multipleOf;\n\n      var block = '';\n\n      if (typeof multipleOf === 'number') {\n        var length = multipleOf.toString().length;\n        var decimals = length - multipleOf.toFixed(0).length - 1;\n        var pow = decimals > 0 ? Math.pow(10, decimals) : 1;\n        var condition = void 0;\n\n        if (decimals > 0) {\n          condition = '(value * ' + pow + ') % ' + multipleOf * pow + ' !== 0';\n        } else {\n          condition = 'value % ' + multipleOf + ' !== 0';\n        }\n\n        block += '\\n        if (' + condition + ') {\\n          valid = false\\n          errors.push({\\n            keyword: \\'multipleOf\\',\\n            message: \\'must be a multiple of ' + multipleOf + '\\'\\n          })\\n        }\\n      ';\n      }\n\n      return block;\n    }\n  }]);\n\n  return Validator;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = Validator;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * @module JSON Object Signing and Encryption (JOSE)\n */\nvar JWA = __webpack_require__(38);\nvar JWK = __webpack_require__(57);\nvar JWKSet = __webpack_require__(60);\nvar JWT = __webpack_require__(62);\nvar JWS = __webpack_require__(67);\nvar Base64URLSchema = __webpack_require__(64);\nvar JOSEHeaderSchema = __webpack_require__(66);\nvar JWKSchema = __webpack_require__(58);\nvar JWKSetSchema = __webpack_require__(61);\nvar JWTClaimsSetSchema = __webpack_require__(65);\nvar JWTSchema = __webpack_require__(63);\n\n/**\n * Export\n */\nmodule.exports = {\n  JWA: JWA,\n  JWK: JWK,\n  JWKSet: JWKSet,\n  JWT: JWT,\n  JWS: JWS,\n  Base64URLSchema: Base64URLSchema,\n  JOSEHeaderSchema: JOSEHeaderSchema,\n  JWKSchema: JWKSchema,\n  JWKSetSchema: JWKSetSchema,\n  JWTClaimsSetSchema: JWTClaimsSetSchema,\n  JWTSchema: JWTSchema\n};\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Dependencies\n *\n * TODO\n * - switch between Node.js webcrypto package and browser implementation\n */\nvar base64url = __webpack_require__(39);\nvar supportedAlgorithms = __webpack_require__(46);\n\nvar _require = __webpack_require__(55),\n    NotSupportedError = _require.NotSupportedError;\n\n/**\n * JWA\n * https://tools.ietf.org/html/rfc7518\n */\n\n\nvar JWA = function () {\n  function JWA() {\n    _classCallCheck(this, JWA);\n  }\n\n  _createClass(JWA, null, [{\n    key: 'sign',\n\n\n    /**\n     * Sign\n     *\n     * @description\n     * Create a digital signature.\n     *\n     * @param {string} alg\n     * @param {CryptoKey} key\n     * @param {string|Buffer} data\n     *\n     * @return {Promise}\n     */\n    value: function sign(alg, key, data) {\n      // normalize the algorithm\n      var normalizedAlgorithm = supportedAlgorithms.normalize('sign', alg);\n\n      // validate algorithm is supported\n      if (normalizedAlgorithm instanceof Error) {\n        return Promise.reject(new NotSupportedError(alg));\n      }\n\n      // validate type of key\n      // TODO\n      //  - is the key suitable for the algorithm?\n      //  - does that get validated in webcrypto?\n      //if (key instanceof CryptoKey) {\n      //  return Promise.reject(new InvalidKeyError())\n      //}\n\n      // sign the data\n      return normalizedAlgorithm.sign(key, data);\n    }\n\n    /**\n     * Verify\n     *\n     * @description\n     * Verify a digital signature.\n     *\n     * @param {string} alg\n     * @param {CryptoKey} privateKey\n     * @param {string|Buffer} signature\n     * @param {string|Buffer} data\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify(alg, key, signature, data) {\n      var normalizedAlgorithm = supportedAlgorithms.normalize('verify', alg);\n\n      if (normalizedAlgorithm instanceof Error) {\n        return Promise.reject(new NotSupportedError(alg));\n      }\n\n      // TODO\n      // validate publicKey\n\n      // verify the signature\n      return normalizedAlgorithm.verify(key, signature, data);\n    }\n\n    /**\n     * Encrypt\n     */\n\n    /**\n     * Decrypt\n     */\n\n    /**\n     * Import\n     */\n\n  }, {\n    key: 'importKey',\n    value: function importKey(key) {\n      var normalizedAlgorithm = supportedAlgorithms.normalize('importKey', key.alg);\n      return normalizedAlgorithm.importKey(key);\n    }\n  }]);\n\n  return JWA;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = JWA;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(40).default;\nmodule.exports.default = module.exports;\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pad_string_1 = __webpack_require__(45);\nfunction encode(input, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    if (Buffer.isBuffer(input)) {\n        return fromBase64(input.toString(\"base64\"));\n    }\n    return fromBase64(Buffer.from(input, encoding).toString(\"base64\"));\n}\n;\nfunction decode(base64url, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    return Buffer.from(toBase64(base64url), \"base64\").toString(encoding);\n}\nfunction toBase64(base64url) {\n    base64url = base64url.toString();\n    return pad_string_1.default(base64url)\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\");\n}\nfunction fromBase64(base64) {\n    return base64\n        .replace(/=/g, \"\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\");\n}\nfunction toBuffer(base64url) {\n    return Buffer.from(toBase64(base64url), \"base64\");\n}\nvar base64url = encode;\nbase64url.encode = encode;\nbase64url.decode = decode;\nbase64url.toBase64 = toBase64;\nbase64url.fromBase64 = fromBase64;\nbase64url.toBuffer = toBuffer;\nexports.default = base64url;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(42)\nvar ieee754 = __webpack_require__(43)\nvar isArray = __webpack_require__(44)\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(20)))\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction padString(input) {\n    var segmentLength = 4;\n    var stringLength = input.length;\n    var diff = stringLength % segmentLength;\n    if (!diff) {\n        return input;\n    }\n    var position = stringLength;\n    var padLength = segmentLength - diff;\n    var paddedStringLength = stringLength + padLength;\n    var buffer = Buffer.alloc(paddedStringLength);\n    buffer.write(input);\n    while (padLength--) {\n        buffer.write(\"=\", position++);\n    }\n    return buffer.toString();\n}\nexports.default = padString;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Local dependencies\n */\nvar None = __webpack_require__(47);\nvar HMAC = __webpack_require__(48);\nvar RSASSA_PKCS1_v1_5 = __webpack_require__(52);\nvar SupportedAlgorithms = __webpack_require__(53);\n\n/**\n * Register Supported Algorithms\n */\nvar supportedAlgorithms = new SupportedAlgorithms();\n\n/**\n * Sign\n */\nsupportedAlgorithms.define('HS256', 'sign', new HMAC({\n  name: 'HMAC',\n  hash: {\n    name: 'SHA-256'\n  }\n}));\n\nsupportedAlgorithms.define('HS384', 'sign', new HMAC({\n  name: 'HMAC',\n  hash: {\n    name: 'SHA-384'\n  }\n}));\n\nsupportedAlgorithms.define('HS512', 'sign', new HMAC({\n  name: 'HMAC',\n  hash: {\n    name: 'SHA-512'\n  }\n}));\n\nsupportedAlgorithms.define('RS256', 'sign', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-256'\n  }\n}));\n\nsupportedAlgorithms.define('RS384', 'sign', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-384'\n  }\n}));\n\nsupportedAlgorithms.define('RS512', 'sign', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-512'\n  }\n}));\n//supportedAlgorithms.define('ES256', 'sign', {})\n//supportedAlgorithms.define('ES384', 'sign', {})\n//supportedAlgorithms.define('ES512', 'sign', {})\n//supportedAlgorithms.define('PS256', 'sign', {})\n//supportedAlgorithms.define('PS384', 'sign', {})\n//supportedAlgorithms.define('PS512', 'sign', {})\n\nsupportedAlgorithms.define('none', 'sign', new None({\n  // nothing goes here\n}));\n\n/**\n * Verify\n */\nsupportedAlgorithms.define('HS256', 'verify', new HMAC({\n  name: 'HMAC',\n  hash: {\n    name: 'SHA-256'\n  }\n}));\n\nsupportedAlgorithms.define('HS384', 'verify', new HMAC({\n  name: 'HMAC',\n  hash: {\n    name: 'SHA-384'\n  }\n}));\n\nsupportedAlgorithms.define('HS512', 'verify', new HMAC({\n  name: 'HMAC',\n  hash: {\n    name: 'SHA-512'\n  }\n}));\n\nsupportedAlgorithms.define('RS256', 'verify', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-256'\n  }\n}));\n\nsupportedAlgorithms.define('RS384', 'verify', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-384'\n  }\n}));\n\nsupportedAlgorithms.define('RS512', 'verify', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-512'\n  }\n}));\n//supportedAlgorithms.define('ES256', 'verify', {})\n//supportedAlgorithms.define('ES384', 'verify', {})\n//supportedAlgorithms.define('ES512', 'verify', {})\n//supportedAlgorithms.define('PS256', 'verify', {})\n//supportedAlgorithms.define('PS384', 'verify', {})\n//supportedAlgorithms.define('PS512', 'verify', {})\n\nsupportedAlgorithms.define('none', 'verify', new None({\n  // nothing goes here\n}));\n\nsupportedAlgorithms.define('RS256', 'importKey', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-256'\n  }\n}));\n\nsupportedAlgorithms.define('RS384', 'importKey', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-384'\n  }\n}));\n\nsupportedAlgorithms.define('RS512', 'importKey', new RSASSA_PKCS1_v1_5({\n  name: 'RSASSA-PKCS1-v1_5',\n  hash: {\n    name: 'SHA-512'\n  }\n}));\n\n/**\n * Export\n */\nmodule.exports = supportedAlgorithms;\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * None\n */\nvar None = function () {\n  function None() {\n    _classCallCheck(this, None);\n  }\n\n  _createClass(None, [{\n    key: 'sign',\n\n    /**\n     * sign\n     */\n    value: function sign() {\n      return Promise.resolve('');\n    }\n\n    /**\n     * verify\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify() {\n      // this will never get called. but you looked.\n    }\n  }]);\n\n  return None;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = None;\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {\n\n/**\n * Dependencies\n * @ignore\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar base64url = __webpack_require__(39);\nvar crypto = __webpack_require__(49);\nvar TextEncoder = __webpack_require__(50);\n\n/**\n * HMAC with SHA-2 Functions\n */\n\nvar HMAC = function () {\n\n  /**\n   * Constructor\n   *\n   * @param {string} bitlength\n   */\n  function HMAC(params) {\n    _classCallCheck(this, HMAC);\n\n    this.params = params;\n  }\n\n  /**\n   * Sign\n   *\n   * @description\n   * Generate a hash-based message authentication code for a\n   * given input and key. Enforce the key length is equal to\n   * or greater than the bitlength.\n   *\n   * @param {CryptoKey} key\n   * @param {string} data\n   *\n   * @returns {string}\n   */\n\n\n  _createClass(HMAC, [{\n    key: 'sign',\n    value: function sign(key, data) {\n      var algorithm = this.params;\n\n      // TODO: validate key length\n\n      data = new TextEncoder().encode(data);\n\n      return crypto.subtle.sign(algorithm, key, data).then(function (signature) {\n        return base64url(Buffer.from(signature));\n      });\n    }\n\n    /**\n     * Verify\n     *\n     * @description\n     * Verify a digital signature for a given input and private key.\n     *\n     * @param {CryptoKey} key\n     * @param {string} signature\n     * @param {string} data\n     *\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify(key, signature, data) {\n      var algorithm = this.params;\n\n      if (typeof signature === 'string') {\n        signature = Uint8Array.from(base64url.toBuffer(signature));\n      }\n\n      if (typeof data === 'string') {\n        data = new TextEncoder().encode(data);\n      }\n\n      return crypto.subtle.verify(algorithm, key, signature, data);\n    }\n\n    /**\n     * Assert Sufficient Key Length\n     *\n     * @description Assert that the key length is sufficient\n     * @param {string} key\n     */\n\n  }, {\n    key: 'assertSufficientKeyLength',\n    value: function assertSufficientKeyLength(key) {\n      if (key.length < this.bitlength) {\n        throw new Error('The key is too short.');\n      }\n    }\n  }]);\n\n  return HMAC;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = HMAC;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\n(function() { module.exports = window[\"crypto\"]; }());\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar TextEncoder = global.TextEncoder ? global.TextEncoder // browser\n: __webpack_require__(51).TextEncoder; // node shim\nmodule.exports = TextEncoder;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(20)))\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n(function() { module.exports = window[\"TextEncoder\"]; }());\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {\n\n/**\n * Dependencies\n * @ignore\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar base64url = __webpack_require__(39);\nvar crypto = __webpack_require__(49);\nvar TextEncoder = __webpack_require__(50);\n\n/**\n * RSASSA-PKCS1-v1_5\n */\n\nvar RSASSA_PKCS1_v1_5 = function () {\n\n  /**\n   * constructor\n   *\n   * @param {string} bitlength\n   */\n  function RSASSA_PKCS1_v1_5(params) {\n    _classCallCheck(this, RSASSA_PKCS1_v1_5);\n\n    this.params = params;\n  }\n\n  /**\n   * sign\n   *\n   * @description\n   * Generate a digital signature for a given input and private key.\n   *\n   * @param {CryptoKey} key\n   * @param {BufferSource} data\n   *\n   * @returns {Promise}\n   */\n\n\n  _createClass(RSASSA_PKCS1_v1_5, [{\n    key: 'sign',\n    value: function sign(key, data) {\n      var algorithm = this.params;\n\n      // TODO\n      //if (!this.sufficientKeySize()) {\n      //  return Promise.reject(\n      //    new Error(\n      //      'A key size of 2048 bits or larger must be used with RSASSA-PKCS1-v1_5'\n      //    )\n      //  )\n      //}\n\n      data = new TextEncoder().encode(data);\n\n      return crypto.subtle.sign(algorithm, key, data).then(function (signature) {\n        return base64url(Buffer.from(signature));\n      });\n    }\n\n    /**\n     * verify\n     *\n     * @description\n     * Verify a digital signature for a given input and private key.\n     *\n     * @param {CryptoKey} key\n     * @param {BufferSource} signature\n     * @param {BufferSource} data\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify(key, signature, data) {\n      var algorithm = this.params;\n\n      if (typeof signature === 'string') {\n        signature = Uint8Array.from(base64url.toBuffer(signature));\n      }\n\n      if (typeof data === 'string') {\n        data = new TextEncoder().encode(data);\n      }\n      // ...\n\n      return crypto.subtle.verify(algorithm, key, signature, data);\n    }\n\n    /**\n     * importKey\n     *\n     * @param {JWK} key\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'importKey',\n    value: function importKey(key) {\n      var jwk = Object.assign({}, key);\n      var algorithm = this.params;\n      var usages = key['key_ops'] || [];\n\n      if (key.use === 'sig') {\n        usages.push('verify');\n      }\n\n      if (key.use === 'enc') {\n        // TODO: handle encryption keys\n        return Promise.resolve(key);\n      }\n\n      if (key.key_ops) {\n        usages = key.key_ops;\n      }\n\n      return crypto.subtle.importKey('jwk', jwk, algorithm, true, usages).then(function (cryptoKey) {\n        Object.defineProperty(jwk, 'cryptoKey', {\n          enumerable: false,\n          value: cryptoKey\n        });\n\n        return jwk;\n      });\n    }\n  }]);\n\n  return RSASSA_PKCS1_v1_5;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = RSASSA_PKCS1_v1_5;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Dependencies\n */\nvar NotSupportedError = __webpack_require__(54);\n\n/**\n * Operations\n */\nvar operations = ['sign', 'verify', 'encrypt', 'decrypt', 'importKey'];\n\n/**\n * SupportedAlgorithms\n */\n\nvar SupportedAlgorithms = function () {\n\n  /**\n   * constructor\n   */\n  function SupportedAlgorithms() {\n    var _this = this;\n\n    _classCallCheck(this, SupportedAlgorithms);\n\n    operations.forEach(function (op) {\n      _this[op] = {};\n    });\n  }\n\n  /**\n   * Supported Operations\n   */\n\n\n  _createClass(SupportedAlgorithms, [{\n    key: 'define',\n\n\n    /**\n     * define\n     *\n     * @description\n     * Register Web Crypto API algorithm parameter for an algorithm\n     * and operation.\n     *\n     * @param {string} alg\n     * @param {string} op\n     * @param {Object} argument\n     */\n    value: function define(alg, op, argument) {\n      var registeredAlgorithms = this[op];\n      registeredAlgorithms[alg] = argument;\n    }\n\n    /**\n     * normalize\n     *\n     * @description\n     * Map JWA alg name to Web Crypto API algorithm parameter\n     *\n     * @param {string} op\n     * @param {Object} alg\n     *\n     * @returns {Object}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(op, alg) {\n      var registeredAlgorithms = this[op];\n\n      if (!registeredAlgorithms) {\n        return new SyntaxError(); // what kind of error should this be?\n      }\n\n      var argument = registeredAlgorithms[alg];\n\n      if (!argument) {\n        return new NotSupportedError(alg);\n      }\n\n      return argument;\n    }\n  }], [{\n    key: 'operations',\n    get: function get() {\n      return operations;\n    }\n  }]);\n\n  return SupportedAlgorithms;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = SupportedAlgorithms;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * NotSupportedError\n */\nvar NotSupportedError = function (_Error) {\n  _inherits(NotSupportedError, _Error);\n\n  function NotSupportedError(alg) {\n    _classCallCheck(this, NotSupportedError);\n\n    var _this = _possibleConstructorReturn(this, (NotSupportedError.__proto__ || Object.getPrototypeOf(NotSupportedError)).call(this));\n\n    _this.message = alg + \" is not a supported algorithm\";\n    return _this;\n  }\n\n  return NotSupportedError;\n}(Error);\n\n/**\n * Export\n */\n\n\nmodule.exports = NotSupportedError;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n  DataError: __webpack_require__(56),\n  NotSupportedError: __webpack_require__(54)\n};\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * DataError\n */\nvar DataError = function (_Error) {\n  _inherits(DataError, _Error);\n\n  function DataError(message) {\n    _classCallCheck(this, DataError);\n\n    return _possibleConstructorReturn(this, (DataError.__proto__ || Object.getPrototypeOf(DataError)).call(this, message));\n  }\n\n  return DataError;\n}(Error);\n\n/**\n * Export\n */\n\n\nmodule.exports = DataError;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n * @ignore\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(28),\n    JSONDocument = _require.JSONDocument;\n\nvar JWKSchema = __webpack_require__(58);\nvar JWA = __webpack_require__(38);\n\n/**\n * JWK Class\n */\n\nvar JWK = function (_JSONDocument) {\n  _inherits(JWK, _JSONDocument);\n\n  function JWK() {\n    _classCallCheck(this, JWK);\n\n    return _possibleConstructorReturn(this, (JWK.__proto__ || Object.getPrototypeOf(JWK)).apply(this, arguments));\n  }\n\n  _createClass(JWK, null, [{\n    key: 'importKey',\n\n\n    /**\n     * importKey\n     *\n     * TODO:\n     * - should this be on JWA?\n     */\n    value: function importKey(jwk) {\n      return JWA.importKey(jwk);\n    }\n  }, {\n    key: 'schema',\n\n\n    /**\n     * Schema\n     */\n    get: function get() {\n      return JWKSchema;\n    }\n  }]);\n\n  return JWK;\n}(JSONDocument);\n\n/**\n * Export\n */\n\n\nmodule.exports = JWK;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n * @ignore\n */\n\nvar _require = __webpack_require__(28),\n    JSONSchema = _require.JSONSchema;\n\nvar _require2 = __webpack_require__(59),\n    BASE64_REGEXP = _require2.BASE64_REGEXP;\n\n/**\n * JWK Schema\n */\n\n\nvar JWKSchema = new JSONSchema({\n  type: 'object',\n  properties: {\n\n    kty: {\n      type: 'string',\n      //format: 'case-sensitive',\n      enum: ['RSA', 'EC', 'oct'] // other values MAY be used\n    },\n\n    use: {\n      type: 'string',\n      //format: 'case-sensitive',\n      enum: ['sig', 'enc'] // other values MAY be used\n    },\n\n    key_ops: {\n      type: 'array',\n      //format: 'case-sensitive',\n      items: {\n        enum: ['sign', 'verify', 'encrypt', 'decrypt', 'wrapKey', 'unwrapKey', 'deriveKey', 'deriveBits'] // other values MAY be used\n      }\n    },\n\n    alg: {\n      type: 'string',\n      //format: 'case-sensitive',\n      enum: ['HS256', 'HS384', 'HS512', 'RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'PS256', 'PS384', 'PS512', 'none'] // other values MAY be used\n    },\n\n    kid: {\n      type: 'string'\n    },\n\n    x5u: {\n      type: 'string'\n      //format: 'url'\n    },\n\n    x5c: {\n      type: 'array'\n      //format: BASE64_REGEXP\n    },\n\n    x5t: {\n      type: 'string'\n      //format: BASE64_REGEXP\n    }\n\n    //'x5t#S256': {\n    //  type: 'string',\n    //  //format: BASE64_REGEXP\n    //}\n  }\n});\n\n/**\n * Export\n */\nmodule.exports = JWKSchema;\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Package dependencies\n */\nvar _require = __webpack_require__(28),\n    Formats = _require.Formats;\n\n/**\n * Format extensions\n */\n\n\nFormats.register('StringOrURI', new RegExp());\nFormats.register('NumericDate', new RegExp());\nFormats.register('URI', new RegExp());\nFormats.register('url', new RegExp());\nFormats.register('base64', new RegExp());\nFormats.register('base64url', new RegExp());\nFormats.register('MediaType', new RegExp());\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n */\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(28),\n    JSONDocument = _require.JSONDocument;\n\nvar JWKSetSchema = __webpack_require__(61);\nvar JWK = __webpack_require__(57);\n\n/**\n * JWKSet\n *\n * @class\n * JWKSet represents a JSON Web Key Set as described in Section 5 of RFC 7517:\n * https://tools.ietf.org/html/rfc7517#section-5\n */\n\nvar JWKSet = function (_JSONDocument) {\n  _inherits(JWKSet, _JSONDocument);\n\n  function JWKSet() {\n    _classCallCheck(this, JWKSet);\n\n    return _possibleConstructorReturn(this, (JWKSet.__proto__ || Object.getPrototypeOf(JWKSet)).apply(this, arguments));\n  }\n\n  _createClass(JWKSet, null, [{\n    key: 'importKeys',\n\n\n    /**\n     * importKeys\n     */\n    value: function importKeys(jwks) {\n      var validation = this.schema.validate(jwks);\n\n      if (!validation.valid) {\n        return Promise.reject(new Error('Invalid JWKSet: ' + JSON.stringify(validation, null, 2)));\n      }\n\n      if (!jwks.keys) {\n        return Promise.reject(new Error('Cannot import JWKSet: keys property is empty'));\n      }\n\n      var imported = void 0,\n          importing = void 0;\n\n      try {\n        imported = new JWKSet(jwks);\n        importing = jwks.keys.map(function (key) {\n          return JWK.importKey(key);\n        });\n      } catch (err) {\n        return Promise.reject(err);\n      }\n\n      return Promise.all(importing).then(function (keys) {\n        imported.keys = keys;\n        return imported;\n      });\n    }\n  }, {\n    key: 'schema',\n\n\n    /**\n     * schema\n     */\n    get: function get() {\n      return JWKSetSchema;\n    }\n  }]);\n\n  return JWKSet;\n}(JSONDocument);\n\n/**\n * Export\n */\n\n\nmodule.exports = JWKSet;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n */\n\nvar _require = __webpack_require__(28),\n    JSONSchema = _require.JSONSchema;\n\nvar JWKSchema = __webpack_require__(58);\n\n/**\n * JWKSetSchema\n */\nvar JWKSetSchema = new JSONSchema({\n  type: 'object',\n  properties: {\n    keys: {\n      type: 'array',\n      items: JWKSchema\n    }\n  }\n});\n\n/**\n * Export\n */\nmodule.exports = JWKSetSchema;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Dependencies\n */\nvar base64url = __webpack_require__(39);\n\nvar _require = __webpack_require__(28),\n    JSONDocument = _require.JSONDocument;\n\nvar JWTSchema = __webpack_require__(63);\nvar JWS = __webpack_require__(67);\nvar DataError = __webpack_require__(56);\n\n/**\n * JWT\n */\n\nvar JWT = function (_JSONDocument) {\n  _inherits(JWT, _JSONDocument);\n\n  function JWT() {\n    _classCallCheck(this, JWT);\n\n    return _possibleConstructorReturn(this, (JWT.__proto__ || Object.getPrototypeOf(JWT)).apply(this, arguments));\n  }\n\n  _createClass(JWT, [{\n    key: 'isJWE',\n\n\n    /**\n     * isJWE\n     */\n    value: function isJWE() {\n      return !!this.header.enc;\n    }\n\n    /**\n     * resolveKeys\n     */\n\n  }, {\n    key: 'resolveKeys',\n    value: function resolveKeys(jwks) {\n      var kid = this.header.kid;\n      var keys = void 0,\n          match = void 0;\n\n      // treat an array as the \"keys\" property of a JWK Set\n      if (Array.isArray(jwks)) {\n        keys = jwks;\n      }\n\n      // presence of keys indicates object is a JWK Set\n      if (jwks.keys) {\n        keys = jwks.keys;\n      }\n\n      // wrap a plain object they is not a JWK Set in Array\n      if (!jwks.keys && (typeof jwks === 'undefined' ? 'undefined' : _typeof(jwks)) === 'object') {\n        keys = [jwks];\n      }\n\n      // ensure there are keys to search\n      if (!keys) {\n        throw new DataError('Invalid JWK argument');\n      }\n\n      // match by \"kid\" or \"use\" header\n      if (kid) {\n        match = keys.find(function (jwk) {\n          return jwk.kid === kid;\n        });\n      } else {\n        match = keys.find(function (jwk) {\n          return jwk.use === 'sig';\n        });\n      }\n\n      // assign matching key to JWT and return a boolean\n      if (match) {\n        this.key = match.cryptoKey;\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    /**\n     * encode\n     *\n     * @description\n     * Encode a JWT instance\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'encode',\n    value: function encode() {\n      // validate\n      var validation = this.validate();\n\n      if (!validation.valid) {\n        return Promise.reject(validation);\n      }\n\n      var token = this;\n\n      if (this.isJWE()) {\n        return JWE.encrypt(token);\n      } else {\n        return JWS.sign(token);\n      }\n    }\n\n    /**\n     * verify\n     *\n     * @description\n     * Verify a decoded JWT instance\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify() {\n      var validation = this.validate();\n\n      if (!validation.valid) {\n        return Promise.reject(validation);\n      }\n\n      return JWS.verify(this);\n    }\n  }], [{\n    key: 'decode',\n\n\n    /**\n     * decode\n     *\n     * @description\n     * Decode a JSON Web Token\n     *\n     * @param {string} data\n     * @returns {JWT}\n     */\n    value: function decode(data) {\n      var ExtendedJWT = this;\n      var jwt = void 0;\n\n      if (typeof data !== 'string') {\n        throw new DataError('JWT must be a string');\n      }\n\n      // JSON of Flattened JSON Serialization\n      if (data.startsWith('{')) {\n        try {\n          data = JSON.parse(data, function () {});\n        } catch (error) {\n          throw new DataError('Invalid JWT serialization');\n        }\n\n        if (data.signatures || data.recipients) {\n          data.serialization = 'json';\n        } else {\n          data.serialization = 'flattened';\n        }\n\n        jwt = new ExtendedJWT(data, { filter: false });\n\n        // Compact Serialization\n      } else {\n        try {\n          var serialization = 'compact';\n          var segments = data.split('.');\n          var length = segments.length;\n\n          if (length !== 3 && length !== 5) {\n            throw new Error('Malformed JWT');\n          }\n\n          var header = JSON.parse(base64url.decode(segments[0]));\n\n          // JSON Web Signature\n          if (length === 3) {\n            var type = 'JWS';\n            var payload = JSON.parse(base64url.decode(segments[1]));\n            var signature = segments[2];\n\n            jwt = new ExtendedJWT({ type: type, segments: segments, header: header, payload: payload, signature: signature, serialization: serialization }, { filter: false });\n          }\n\n          // JSON Web Encryption\n          if (length === 5) {\n            //let type = 'JWE'\n            //let [protected, encryption_key, iv, ciphertext, tag] = segments\n\n            //jwt = new ExtendedJWT({\n            //  type,\n            //  protected: base64url.decode(JSON.parse(protected)),\n            //  encryption_key,\n            //  iv,\n            //  ciphertext,\n            //  tag,\n            //  serialization\n            //})\n          }\n        } catch (error) {\n          throw new DataError('Invalid JWT compact serialization');\n        }\n      }\n\n      return jwt;\n    }\n\n    /**\n     * encode\n     *\n     * @description\n     * Encode a JSON Web Token\n     *\n     * @param {Object} header\n     * @param {Object} payload\n     * @param {CryptoKey} key\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'encode',\n    value: function encode(header, payload, key) {\n      var jwt = new JWT(header, payload);\n      return jwt.encode(key);\n    }\n\n    /**\n     * verify\n     *\n     * @description\n     *\n     * @param {CryptoKey} key\n     * @param {string} token\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify(key, token) {\n      var jwt = JWT.decode(token);\n      jwt.key = key;\n      return jwt.verify().then(function (verified) {\n        return jwt;\n      });\n    }\n  }, {\n    key: 'schema',\n\n\n    /**\n     * schema\n     */\n    get: function get() {\n      return JWTSchema;\n    }\n  }]);\n\n  return JWT;\n}(JSONDocument);\n\n/**\n * Export\n */\n\n\nmodule.exports = JWT;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n */\nvar Base64URLSchema = __webpack_require__(64);\nvar JWTClaimsSetSchema = __webpack_require__(65);\nvar JOSEHeaderSchema = __webpack_require__(66);\n\nvar _require = __webpack_require__(28),\n    JSONSchema = _require.JSONSchema;\n\n/**\n * JWTSchema\n *\n * @description\n * This schema represents all the things a deserialized JWT can be, i.e.,\n * either a JWS or JWE, and any serialization of them. Validation of well-\n * formedness for a given serialization is accomplished at the time of\n * encoding.\n */\n\n\nvar JWTSchema = new JSONSchema({\n  type: 'object',\n  properties: {\n\n    /**\n     * type\n     */\n    type: {\n      type: 'string',\n      enum: ['JWS', 'JWE']\n    },\n\n    /**\n     * segments\n     */\n    segments: {\n      type: 'array'\n    },\n\n    /**\n     * header\n     */\n    header: JOSEHeaderSchema,\n\n    /**\n     * protected\n     */\n    protected: JOSEHeaderSchema,\n\n    /**\n     * unprotected\n     */\n    unprotected: JOSEHeaderSchema,\n\n    /**\n     * iv\n     */\n    iv: Base64URLSchema,\n\n    /**\n     * aad\n     */\n    aad: Base64URLSchema,\n\n    /**\n     * ciphertext\n     */\n    ciphertext: Base64URLSchema,\n\n    /**\n     * tag\n     */\n    tag: Base64URLSchema,\n\n    /**\n     * recipients\n     */\n    recipients: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          header: JOSEHeaderSchema,\n          encrypted_key: Base64URLSchema\n        }\n      }\n    },\n\n    /**\n     * payload\n     */\n    payload: JWTClaimsSetSchema,\n\n    /**\n     * signatures\n     */\n    signatures: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          protected: JOSEHeaderSchema,\n          header: JOSEHeaderSchema,\n          signature: Base64URLSchema,\n          key: { type: 'object' }\n        }\n      }\n    },\n\n    /**\n     * signature\n     */\n    signature: Base64URLSchema,\n\n    /**\n     * verified\n     */\n    verified: {\n      type: 'boolean',\n      default: false\n    },\n\n    /**\n     * key\n     */\n    key: {\n      type: 'object'\n    },\n\n    /**\n     * serialization\n     */\n    serialization: {\n      type: 'string',\n      enum: ['compact', 'json', 'flattened'],\n      default: 'compact'\n    }\n  }\n});\n\n/**\n * Export\n */\nmodule.exports = JWTSchema;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n */\nvar _require = __webpack_require__(28),\n    JSONSchema = _require.JSONSchema;\n\n/**\n * Base64URLSchema\n */\n\n\nvar Base64URLSchema = new JSONSchema({\n  type: 'string',\n  format: 'base64url'\n});\n\n/**\n * Export\n */\nmodule.exports = Base64URLSchema;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n */\nvar _require = __webpack_require__(28),\n    JSONSchema = _require.JSONSchema;\n\n/**\n * JWTClaimsSetSchema\n *\n * JSON Web Token (JWT)\n * https://tools.ietf.org/html/rfc7519#section-4\n *\n * 4.  JWT Claims\n *\n *   The JWT Claims Set represents a JSON object whose members are the\n *   claims conveyed by the JWT.  The Claim Names within a JWT Claims Set\n *   MUST be unique; JWT parsers MUST either reject JWTs with duplicate\n *   Claim Names or use a JSON parser that returns only the lexically last\n *   duplicate member name, as specified in Section 15.12 (\"The JSON\n *   Object\") of ECMAScript 5.1 [ECMAScript].\n *\n *   The set of claims that a JWT must contain to be considered valid is\n *   context dependent and is outside the scope of this specification.\n *   Specific applications of JWTs will require implementations to\n *   understand and process some claims in particular ways.  However, in\n *   the absence of such requirements, all claims that are not understood\n *   by implementations MUST be ignored.\n *\n *   There are three classes of JWT Claim Names: Registered Claim Names,\n *   Public Claim Names, and Private Claim Names.\n */\n\n\nvar JWTClaimsSetSchema = new JSONSchema({\n  properties: {\n\n    /**\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1\n     *\n     * 4.1.  Registered Claim Names\n     *\n     *   The following Claim Names are registered in the IANA \"JSON Web Token\n     *   Claims\" registry established by Section 10.1.  None of the claims\n     *   defined below are intended to be mandatory to use or implement in all\n     *   cases, but rather they provide a starting point for a set of useful,\n     *   interoperable claims.  Applications using JWTs should define which\n     *   specific claims they use and when they are required or optional.  All\n     *   the names are short because a core goal of JWTs is for the\n     *   representation to be compact.\n     */\n\n    /**\n     * iss\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.1\n     *\n     * 4.1.1.  \"iss\" (Issuer) Claim\n     *\n     *   The \"iss\" (issuer) claim identifies the principal that issued the\n     *   JWT.  The processing of this claim is generally application specific.\n     *   The \"iss\" value is a case-sensitive string containing a StringOrURI\n     *   value.  Use of this claim is OPTIONAL.\n     */\n    iss: {\n      type: 'string',\n      format: 'StringOrURI'\n    },\n\n    /**\n     * sub\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.2\n     *\n     * 4.1.2.  \"sub\" (Subject) Claim\n     *\n     *   The \"sub\" (subject) claim identifies the principal that is the\n     *   subject of the JWT.  The claims in a JWT are normally statements\n     *   about the subject.  The subject value MUST either be scoped to be\n     *   locally unique in the context of the issuer or be globally unique.\n     *   The processing of this claim is generally application specific.  The\n     *   \"sub\" value is a case-sensitive string containing a StringOrURI\n     *   value.  Use of this claim is OPTIONAL.\n     */\n    sub: {\n      type: 'string',\n      format: 'StringOrURI'\n    },\n\n    /**\n     * aud\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.3\n     *\n     * 4.1.3.  \"aud\" (Audience) Claim\n     *\n     *   The \"aud\" (audience) claim identifies the recipients that the JWT is\n     *   intended for.  Each principal intended to process the JWT MUST\n     *   identify itself with a value in the audience claim.  If the principal\n     *   processing the claim does not identify itself with a value in the\n     *   \"aud\" claim when this claim is present, then the JWT MUST be\n     *   rejected.  In the general case, the \"aud\" value is an array of case-\n     *   sensitive strings, each containing a StringOrURI value.  In the\n     *   special case when the JWT has one audience, the \"aud\" value MAY be a\n     *   single case-sensitive string containing a StringOrURI value.  The\n     *   interpretation of audience values is generally application specific.\n     *   Use of this claim is OPTIONAL.\n     */\n    aud: {\n      type: ['array', 'string'],\n      format: 'StringOrURI',\n      items: {\n        format: 'StringOrURI'\n      }\n    },\n\n    /**\n     * exp\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.4\n     *\n     * 4.1.4.  \"exp\" (Expiration Time) Claim\n     *\n     *   The \"exp\" (expiration time) claim identifies the expiration time on\n     *   or after which the JWT MUST NOT be accepted for processing.  The\n     *   processing of the \"exp\" claim requires that the current date/time\n     *   MUST be before the expiration date/time listed in the \"exp\" claim.\n     *\n     *   Implementers MAY provide for some small leeway, usually no more than\n     *   a few minutes, to account for clock skew.  Its value MUST be a number\n     *   containing a NumericDate value.  Use of this claim is OPTIONAL.\n     *\n     */\n    exp: {\n      type: 'number',\n      format: 'NumericDate'\n    },\n\n    /**\n     * nbf\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.5\n     *\n     * 4.1.5.  \"nbf\" (Not Before) Claim\n     *\n     *   The \"nbf\" (not before) claim identifies the time before which the JWT\n     *   MUST NOT be accepted for processing.  The processing of the \"nbf\"\n     *   claim requires that the current date/time MUST be after or equal to\n     *   the not-before date/time listed in the \"nbf\" claim.  Implementers MAY\n     *   provide for some small leeway, usually no more than a few minutes, to\n     *   account for clock skew.  Its value MUST be a number containing a\n     *   NumericDate value.  Use of this claim is OPTIONAL.\n     */\n    nbf: {\n      type: 'number',\n      format: 'NumericDate'\n    },\n\n    /**\n     * iat\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.6\n     *\n     * 4.1.6.  \"iat\" (Issued At) Claim\n     *\n     *   The \"iat\" (issued at) claim identifies the time at which the JWT was\n     *   issued.  This claim can be used to determine the age of the JWT.  Its\n     *   value MUST be a number containing a NumericDate value.  Use of this\n     *   claim is OPTIONAL.\n     */\n    iat: {\n      type: 'number',\n      format: 'NumericDate'\n    },\n\n    /**\n     * jti\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-4.1.7\n     *\n     * 4.1.7.  \"jti\" (JWT ID) Claim\n     *\n     *   The \"jti\" (JWT ID) claim provides a unique identifier for the JWT.\n     *   The identifier value MUST be assigned in a manner that ensures that\n     *   there is a negligible probability that the same value will be\n     *   accidentally assigned to a different data object; if the application\n     *   uses multiple issuers, collisions MUST be prevented among values\n     *   produced by different issuers as well.  The \"jti\" claim can be used\n     *   to prevent the JWT from being replayed.  The \"jti\" value is a case-\n     *   sensitive string.  Use of this claim is OPTIONAL.\n     */\n    jti: {\n      type: 'string'\n    }\n  }\n});\n\n/**\n * Export\n */\nmodule.exports = JWTClaimsSetSchema;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Dependencies\n */\nvar JWKSchema = __webpack_require__(58);\n\nvar _require = __webpack_require__(28),\n    JSONSchema = _require.JSONSchema;\n\n/**\n * JOSEHeaderSchema\n *\n * JSON Web Token (JWT)\n * https://tools.ietf.org/html/rfc7519#section-5\n *\n * 5.  JOSE Header\n *\n *   For a JWT object, the members of the JSON object represented by the\n *   JOSE Header describe the cryptographic operations applied to the JWT\n *   and optionally, additional properties of the JWT.  Depending upon\n *   whether the JWT is a JWS or JWE, the corresponding rules for the JOSE\n *   Header values apply.\n */\n\n\nvar JOSEHeaderSchema = new JSONSchema({\n  type: 'object',\n  properties: {\n\n    /**\n     * typ\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-5.1\n     *\n     * 5.1.  \"typ\" (Type) Header Parameter\n     *\n     *   The \"typ\" (type) Header Parameter defined by [JWS] and [JWE] is used\n     *   by JWT applications to declare the media type [IANA.MediaTypes] of\n     *   this complete JWT.  This is intended for use by the JWT application\n     *   when values that are not JWTs could also be present in an application\n     *   data structure that can contain a JWT object; the application can use\n     *   this value to disambiguate among the different kinds of objects that\n     *   might be present.  It will typically not be used by applications when\n     *   it is already known that the object is a JWT.  This parameter is\n     *   ignored by JWT implementations; any processing of this parameter is\n     *   performed by the JWT application.  If present, it is RECOMMENDED that\n     *   its value be \"JWT\" to indicate that this object is a JWT.  While\n     *   media type names are not case sensitive, it is RECOMMENDED that \"JWT\"\n     *   always be spelled using uppercase characters for compatibility with\n     *   legacy implementations.  Use of this Header Parameter is OPTIONAL.\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.9\n     *\n     * 4.1.9.  \"typ\" (Type) Header Parameter\n     *\n     *   The \"typ\" (type) Header Parameter is used by JWS applications to\n     *   declare the media type [IANA.MediaTypes] of this complete JWS.  This\n     *   is intended for use by the application when more than one kind of\n     *   object could be present in an application data structure that can\n     *   contain a JWS; the application can use this value to disambiguate\n     *   among the different kinds of objects that might be present.  It will\n     *   typically not be used by applications when the kind of object is\n     *   already known.  This parameter is ignored by JWS implementations; any\n     *   processing of this parameter is performed by the JWS application.\n     *   Use of this Header Parameter is OPTIONAL.\n     *\n     *   Per RFC 2045 [RFC2045], all media type values, subtype values, and\n     *   parameter names are case insensitive.  However, parameter values are\n     *   case sensitive unless otherwise specified for the specific parameter.\n     *\n     *   To keep messages compact in common situations, it is RECOMMENDED that\n     *   producers omit an \"application/\" prefix of a media type value in a\n     *   \"typ\" Header Parameter when no other '/' appears in the media type\n     *   value.  A recipient using the media type value MUST treat it as if\n     *   \"application/\" were prepended to any \"typ\" value not containing a\n     *   '/'.  For instance, a \"typ\" value of \"example\" SHOULD be used to\n     *   represent the \"application/example\" media type, whereas the media\n     *   type \"application/example;part=\"1/2\"\" cannot be shortened to\n     *   \"example;part=\"1/2\"\".\n     *\n     *   The \"typ\" value \"JOSE\" can be used by applications to indicate that\n     *   this object is a JWS or JWE using the JWS Compact Serialization or\n     *   the JWE Compact Serialization.  The \"typ\" value \"JOSE+JSON\" can be\n     *   used by applications to indicate that this object is a JWS or JWE\n     *   using the JWS JSON Serialization or the JWE JSON Serialization.\n     *   Other type values can also be used by applications.\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.11\n     *\n     * 4.1.11.  \"typ\" (Type) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"typ\" Header Parameter defined in Section 4.1.9 of [JWS], except\n     *   that the type is that of this complete JWE.\n     */\n    typ: {\n      type: 'string'\n    },\n\n    /**\n     * cty\n     *\n     * JSON Web Token (JWT)\n     * https://tools.ietf.org/html/rfc7519#section-5.2\n     *\n     * 5.2.  \"cty\" (Content Type) Header Parameter\n     *\n     *   The \"cty\" (content type) Header Parameter defined by [JWS] and [JWE]\n     *   is used by this specification to convey structural information about\n     *   the JWT.\n     *\n     *   In the normal case in which nested signing or encryption operations\n     *   are not employed, the use of this Header Parameter is NOT\n     *   RECOMMENDED.  In the case that nested signing or encryption is\n     *   employed, this Header Parameter MUST be present; in this case, the\n     *   value MUST be \"JWT\", to indicate that a Nested JWT is carried in this\n     *   JWT.  While media type names are not case sensitive, it is\n     *   RECOMMENDED that \"JWT\" always be spelled using uppercase characters\n     *   for compatibility with legacy implementations.  See Appendix A.2 for\n     *   an example of a Nested JWT.\n     *\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.10\n     *\n     * 4.1.10.  \"cty\" (Content Type) Header Parameter\n     *\n     *   The \"cty\" (content type) Header Parameter is used by JWS applications\n     *   to declare the media type [IANA.MediaTypes] of the secured content\n     *   (the payload).  This is intended for use by the application when more\n     *   than one kind of object could be present in the JWS Payload; the\n     *   application can use this value to disambiguate among the different\n     *   kinds of objects that might be present.  It will typically not be\n     *   used by applications when the kind of object is already known.  This\n     *   parameter is ignored by JWS implementations; any processing of this\n     *   parameter is performed by the JWS application.  Use of this Header\n     *   Parameter is OPTIONAL.\n     *\n     *   Per RFC 2045 [RFC2045], all media type values, subtype values, and\n     *   parameter names are case insensitive.  However, parameter values are\n     *   case sensitive unless otherwise specified for the specific parameter.\n     *\n     *   To keep messages compact in common situations, it is RECOMMENDED that\n     *   producers omit an \"application/\" prefix of a media type value in a\n     *   \"cty\" Header Parameter when no other '/' appears in the media type\n     *   value.  A recipient using the media type value MUST treat it as if\n     *   \"application/\" were prepended to any \"cty\" value not containing a\n     *   '/'.  For instance, a \"cty\" value of \"example\" SHOULD be used to\n     *   represent the \"application/example\" media type, whereas the media\n     *   type \"application/example;part=\"1/2\"\" cannot be shortened to\n     *   \"example;part=\"1/2\"\".\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.12\n     *\n     * 4.1.12.  \"cty\" (Content Type) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"cty\" Header Parameter defined in Section 4.1.10 of [JWS], except\n     *   that the type is that of the secured content (the plaintext).\n     */\n    cty: {\n      type: 'string',\n      enum: ['JWT']\n    },\n\n    /**\n     * alg\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.1\n     *\n     * 4.1.1.  \"alg\" (Algorithm) Header Parameter\n     *\n     *   The \"alg\" (algorithm) Header Parameter identifies the cryptographic\n     *   algorithm used to secure the JWS.  The JWS Signature value is not\n     *   valid if the \"alg\" value does not represent a supported algorithm or\n     *   if there is not a key for use with that algorithm associated with the\n     *   party that digitally signed or MACed the content.  \"alg\" values\n     *   should either be registered in the IANA \"JSON Web Signature and\n     *   Encryption Algorithms\" registry established by [JWA] or be a value\n     *   that contains a Collision-Resistant Name.  The \"alg\" value is a case-\n     *   sensitive ASCII string containing a StringOrURI value.  This Header\n     *   Parameter MUST be present and MUST be understood and processed by\n     *   implementations.\n     *\n     *   A list of defined \"alg\" values for this use can be found in the IANA\n     *   \"JSON Web Signature and Encryption Algorithms\" registry established\n     *   by [JWA]; the initial contents of this registry are the values\n     *   defined in Section 3.1 of [JWA].\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.1\n     *\n     * 4.1.1.  \"alg\" (Algorithm) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"alg\" Header Parameter defined in Section 4.1.1 of [JWS], except\n     *   that the Header Parameter identifies the cryptographic algorithm used\n     *   to encrypt or determine the value of the CEK.  The encrypted content\n     *   is not usable if the \"alg\" value does not represent a supported\n     *   algorithm, or if the recipient does not have a key that can be used\n     *   with that algorithm.\n     *\n     *   A list of defined \"alg\" values for this use can be found in the IANA\n     *   \"JSON Web Signature and Encryption Algorithms\" registry established\n     *   by [JWA]; the initial contents of this registry are the values\n     *   defined in Section 4.1 of [JWA].\n     */\n    alg: {\n      type: 'string',\n      format: 'StringOrURI'\n    },\n\n    /**\n     * jku\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.2\n     *\n     * 4.1.2.  \"jku\" (JWK Set URL) Header Parameter (JWS)\n     *\n     *   The \"jku\" (JWK Set URL) Header Parameter is a URI [RFC3986] that\n     *   refers to a resource for a set of JSON-encoded public keys, one of\n     *   which corresponds to the key used to digitally sign the JWS.  The\n     *   keys MUST be encoded as a JWK Set [JWK].  The protocol used to\n     *   acquire the resource MUST provide integrity protection; an HTTP GET\n     *   request to retrieve the JWK Set MUST use Transport Layer Security\n     *   (TLS) [RFC2818] [RFC5246]; and the identity of the server MUST be\n     *   validated, as per Section 6 of RFC 6125 [RFC6125].  Also, see\n     *   Section 8 on TLS requirements.  Use of this Header Parameter is\n     *   OPTIONAL.\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.4\n     *\n     * 4.1.4.  \"jku\" (JWK Set URL) Header Parameter (JWE)\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"jku\" Header Parameter defined in Section 4.1.2 of [JWS], except\n     *   that the JWK Set resource contains the public key to which the JWE\n     *   was encrypted; this can be used to determine the private key needed\n     *   to decrypt the JWE.\n     */\n    jku: {\n      type: 'string',\n      format: 'URI'\n    },\n\n    /**\n     * jwk\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.3\n     *\n     * 4.1.3.  \"jwk\" (JSON Web Key) Header Parameter\n     *\n     *   The \"jwk\" (JSON Web Key) Header Parameter is the public key that\n     *   corresponds to the key used to digitally sign the JWS.  This key is\n     *   represented as a JSON Web Key [JWK].  Use of this Header Parameter is\n     *   OPTIONAL.\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.5\n     *\n     * 4.1.5.  \"jwk\" (JSON Web Key) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"jwk\" Header Parameter defined in Section 4.1.3 of [JWS], except\n     *   that the key is the public key to which the JWE was encrypted; this\n     *   can be used to determine the private key needed to decrypt the JWE.\n     */\n    //jwk: JWKSchema,\n\n    /**\n     * kid\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.4\n     *\n     * 4.1.4.  \"kid\" (Key ID) Header Parameter\n     *\n     *   The \"kid\" (key ID) Header Parameter is a hint indicating which key\n     *   was used to secure the JWS.  This parameter allows originators to\n     *   explicitly signal a change of key to recipients.  The structure of\n     *   the \"kid\" value is unspecified.  Its value MUST be a case-sensitive\n     *   string.  Use of this Header Parameter is OPTIONAL.\n     *\n     *   When used with a JWK, the \"kid\" value is used to match a JWK \"kid\"\n     *   parameter value.\n     *\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.6\n     *\n     * 4.1.6.  \"kid\" (Key ID) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"kid\" Header Parameter defined in Section 4.1.4 of [JWS], except\n     *   that the key hint references the public key to which the JWE was\n     *   encrypted; this can be used to determine the private key needed to\n     *   decrypt the JWE.  This parameter allows originators to explicitly\n     *   signal a change of key to JWE recipients.\n     */\n    kid: {\n      type: 'string'\n    },\n\n    /**\n     * x5u\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.5\n     *\n     * 4.1.5.  \"x5u\" (X.509 URL) Header Parameter\n     *\n     *   The \"x5u\" (X.509 URL) Header Parameter is a URI [RFC3986] that refers\n     *   to a resource for the X.509 public key certificate or certificate\n     *   chain [RFC5280] corresponding to the key used to digitally sign the\n     *   JWS.  The identified resource MUST provide a representation of the\n     *   certificate or certificate chain that conforms to RFC 5280 [RFC5280]\n     *   in PEM-encoded form, with each certificate delimited as specified in\n     *   Section 6.1 of RFC 4945 [RFC4945].  The certificate containing the\n     *   public key corresponding to the key used to digitally sign the JWS\n     *   MUST be the first certificate.  This MAY be followed by additional\n     *   certificates, with each subsequent certificate being the one used to\n     *   certify the previous one.  The protocol used to acquire the resource\n     *   MUST provide integrity protection; an HTTP GET request to retrieve\n     *   the certificate MUST use TLS [RFC2818] [RFC5246]; and the identity of\n     *   the server MUST be validated, as per Section 6 of RFC 6125 [RFC6125].\n     *   Also, see Section 8 on TLS requirements.  Use of this Header\n     *   Parameter is OPTIONAL.\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.7\n     *\n     * 4.1.7.  \"x5u\" (X.509 URL) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"x5u\" Header Parameter defined in Section 4.1.5 of [JWS], except\n     *   that the X.509 public key certificate or certificate chain [RFC5280]\n     *   contains the public key to which the JWE was encrypted; this can be\n     *   used to determine the private key needed to decrypt the JWE.\n     */\n    x5u: {\n      type: 'string',\n      format: 'URI'\n    },\n\n    /**\n     * x5c\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.6\n     *\n     * 4.1.6.  \"x5c\" (X.509 Certificate Chain) Header Parameter\n     *\n     *   The \"x5c\" (X.509 certificate chain) Header Parameter contains the\n     *   X.509 public key certificate or certificate chain [RFC5280]\n     *   corresponding to the key used to digitally sign the JWS.  The\n     *   certificate or certificate chain is represented as a JSON array of\n     *   certificate value strings.  Each string in the array is a\n     *   base64-encoded (Section 4 of [RFC4648] -- not base64url-encoded) DER\n     *   [ITU.X690.2008] PKIX certificate value.  The certificate containing\n     *   the public key corresponding to the key used to digitally sign the\n     *   JWS MUST be the first certificate.  This MAY be followed by\n     *   additional certificates, with each subsequent certificate being the\n     *   one used to certify the previous one.  The recipient MUST validate\n     *   the certificate chain according to RFC 5280 [RFC5280] and consider\n     *   the certificate or certificate chain to be invalid if any validation\n     *   failure occurs.  Use of this Header Parameter is OPTIONAL.\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.8\n     *\n     * 4.1.8.  \"x5c\" (X.509 Certificate Chain) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"x5c\" Header Parameter defined in Section 4.1.6 of [JWS], except\n     *   that the X.509 public key certificate or certificate chain [RFC5280]\n     *   contains the public key to which the JWE was encrypted; this can be\n     *   used to determine the private key needed to decrypt the JWE.\n     */\n    x5c: {\n      type: 'array',\n      items: {\n        type: 'string',\n        format: 'base64'\n      }\n    },\n\n    /**\n     * x5t\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.7\n     *\n     * 4.1.7.  \"x5t\" (X.509 Certificate SHA-1 Thumbprint) Header Parameter\n     *\n     *   The \"x5t\" (X.509 certificate SHA-1 thumbprint) Header Parameter is a\n     *   base64url-encoded SHA-1 thumbprint (a.k.a. digest) of the DER\n     *   encoding of the X.509 certificate [RFC5280] corresponding to the key\n     *   used to digitally sign the JWS.  Note that certificate thumbprints\n     *   are also sometimes known as certificate fingerprints.  Use of this\n     *   Header Parameter is OPTIONAL.\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.9\n     *\n     * 4.1.9.  \"x5t\" (X.509 Certificate SHA-1 Thumbprint) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"x5t\" Header Parameter defined in Section 4.1.7 of [JWS], except\n     *   that the certificate referenced by the thumbprint contains the public\n     *   key to which the JWE was encrypted; this can be used to determine the\n     *   private key needed to decrypt the JWE.  Note that certificate\n     *   thumbprints are also sometimes known as certificate fingerprints.\n     */\n    x5t: {\n      type: 'string',\n      format: 'base64url'\n    },\n\n    /**\n     * x5t#S256\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.8\n     *\n     * 4.1.8.  \"x5t#S256\" (X.509 Certificate SHA-256 Thumbprint) Header\n     *         Parameter\n     *\n     *   The \"x5t#S256\" (X.509 certificate SHA-256 thumbprint) Header\n     *   Parameter is a base64url-encoded SHA-256 thumbprint (a.k.a. digest)\n     *   of the DER encoding of the X.509 certificate [RFC5280] corresponding\n     *   to the key used to digitally sign the JWS.  Note that certificate\n     *   thumbprints are also sometimes known as certificate fingerprints.\n     *   Use of this Header Parameter is OPTIONAL.\n     *\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.10\n     *\n     * 4.1.10.  \"x5t#S256\" (X.509 Certificate SHA-256 Thumbprint) Header\n     *          Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"x5t#S256\" Header Parameter defined in Section 4.1.8 of [JWS],\n     *   except that the certificate referenced by the thumbprint contains the\n     *   public key to which the JWE was encrypted; this can be used to\n     *   determine the private key needed to decrypt the JWE.  Note that\n     *   certificate thumbprints are also sometimes known as certificate\n     *   fingerprints.\n     */\n    //'x5t#S256': {\n    //  type: 'string',\n    //  format: 'base64url'\n    //},\n\n    /**\n     * crit\n     *\n     * JSON Web Signature (JWS)\n     * https://tools.ietf.org/html/rfc7515#section-4.1.11\n     *\n     * 4.1.11.  \"crit\" (Critical) Header Parameter\n     *\n     *   The \"crit\" (critical) Header Parameter indicates that extensions to\n     *   this specification and/or [JWA] are being used that MUST be\n     *   understood and processed.  Its value is an array listing the Header\n     *   Parameter names present in the JOSE Header that use those extensions.\n     *   If any of the listed extension Header Parameters are not understood\n     *   and supported by the recipient, then the JWS is invalid.  Producers\n     *   MUST NOT include Header Parameter names defined by this specification\n     *   or [JWA] for use with JWS, duplicate names, or names that do not\n     *   occur as Header Parameter names within the JOSE Header in the \"crit\"\n     *   list.  Producers MUST NOT use the empty list \"[]\" as the \"crit\"\n     *   value.  Recipients MAY consider the JWS to be invalid if the critical\n     *   list contains any Header Parameter names defined by this\n     *   specification or [JWA] for use with JWS or if any other constraints\n     *   on its use are violated.  When used, this Header Parameter MUST be\n     *   integrity protected; therefore, it MUST occur only within the JWS\n     *   Protected Header.  Use of this Header Parameter is OPTIONAL.  This\n     *   Header Parameter MUST be understood and processed by implementations.\n     *\n     *   An example use, along with a hypothetical \"exp\" (expiration time)\n     *   field is:\n     *\n     *     {\"alg\":\"ES256\",\n     *     \"crit\":[\"exp\"],\n     *     \"exp\":1363284000\n     *     }\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.13\n     *\n     *   4.1.13.  \"crit\" (Critical) Header Parameter\n     *\n     *   This parameter has the same meaning, syntax, and processing rules as\n     *   the \"crit\" Header Parameter defined in Section 4.1.11 of [JWS],\n     *   except that Header Parameters for a JWE are being referred to, rather\n     *   than Header Parameters for a JWS.\n     */\n    crit: {\n      type: 'array',\n      items: {\n        type: 'string'\n      },\n      minItems: 1\n    },\n\n    /**\n     * enc\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.2\n     *\n     * 4.1.2.  \"enc\" (Encryption Algorithm) Header Parameter\n     *\n     *   The \"enc\" (encryption algorithm) Header Parameter identifies the\n     *   content encryption algorithm used to perform authenticated encryption\n     *   on the plaintext to produce the ciphertext and the Authentication\n     *   Tag.  This algorithm MUST be an AEAD algorithm with a specified key\n     *   length.  The encrypted content is not usable if the \"enc\" value does\n     *   not represent a supported algorithm.  \"enc\" values should either be\n     *   registered in the IANA \"JSON Web Signature and Encryption Algorithms\"\n     *   registry established by [JWA] or be a value that contains a\n     *   Collision-Resistant Name.  The \"enc\" value is a case-sensitive ASCII\n     *   string containing a StringOrURI value.  This Header Parameter MUST be\n     *   present and MUST be understood and processed by implementations.\n     *\n     *   A list of defined \"enc\" values for this use can be found in the IANA\n     *   \"JSON Web Signature and Encryption Algorithms\" registry established\n     *   by [JWA]; the initial contents of this registry are the values\n     *   defined in Section 5.1 of [JWA].\n     */\n    enc: {\n      type: 'string',\n      format: 'StringOrURI'\n    },\n\n    /**\n     * zip\n     *\n     * JSON Web Encryption (JWE)\n     * https://tools.ietf.org/html/rfc7516#section-4.1.3\n     *\n     * 4.1.3.  \"zip\" (Compression Algorithm) Header Parameter\n     *\n     *   The \"zip\" (compression algorithm) applied to the plaintext before\n     *   encryption, if any.  The \"zip\" value defined by this specification\n     *   is:\n     *\n     *   o  \"DEF\" - Compression with the DEFLATE [RFC1951] algorithm\n     *\n     *   Other values MAY be used.  Compression algorithm values can be\n     *   registered in the IANA \"JSON Web Encryption Compression Algorithms\"\n     *   registry established by [JWA].  The \"zip\" value is a case-sensitive\n     *   string.  If no \"zip\" parameter is present, no compression is applied\n     *   to the plaintext before encryption.  When used, this Header Parameter\n     *   MUST be integrity protected; therefore, it MUST occur only within the\n     *   JWE Protected Header.  Use of this Header Parameter is OPTIONAL.\n     *   This Header Parameter MUST be understood and processed by\n     *   implementations.\n     */\n    zip: {\n      type: 'string'\n    }\n  }\n});\n\n/**\n * Export\n */\nmodule.exports = JOSEHeaderSchema;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Dependencies\n */\nvar base64url = __webpack_require__(39);\nvar JWA = __webpack_require__(38);\n\nvar _require = __webpack_require__(55),\n    DataError = _require.DataError;\n\n/**\n * JWS\n */\n\n\nvar JWS = function () {\n  function JWS() {\n    _classCallCheck(this, JWS);\n  }\n\n  _createClass(JWS, null, [{\n    key: 'sign',\n\n\n    /**\n     * sign\n     *\n     * @description\n     * Encode a JWT instance\n     *\n     * @param {Object} token\n     * @returns {Promise}\n     */\n    value: function sign(token) {\n      var payload = base64url(JSON.stringify(token.payload));\n\n      // compact serialization\n      if (token.serialization === 'compact') {\n        var key = token.key,\n            alg = token.header.alg;\n\n        var header = base64url(JSON.stringify(token.header));\n        var data = header + '.' + payload;\n\n        return JWA.sign(alg, key, data).then(function (signature) {\n          return data + '.' + signature;\n        });\n      }\n\n      // JSON serialization\n      if (token.serialization === 'json') {}\n\n      // Flattened serialization\n      if (token.serialization === 'flattened') {}\n\n      return Promise.reject(new DataError('Unsupported serialization'));\n    }\n\n    /**\n     * verify\n     */\n\n  }, {\n    key: 'verify',\n    value: function verify(jwt) {\n      // multiple signatures\n      if (jwt.signatures) {\n        // ...\n      }\n\n      var key = jwt.key,\n          signature = jwt.signature,\n          alg = jwt.header.alg;\n\n      // one signature\n\n      if (jwt.signature) {\n        var _jwt$segments = _slicedToArray(jwt.segments, 2),\n            header = _jwt$segments[0],\n            payload = _jwt$segments[1];\n\n        var data = header + '.' + payload;\n\n        if (alg === 'none') {\n          return Promise.reject(new DataError('Signature provided to verify with alg: none'));\n        }\n\n        return JWA.verify(alg, key, signature, data).then(function (verified) {\n          jwt.verified = verified;\n          return verified;\n        });\n      }\n\n      if (alg === 'none') {\n        if (!key && !signature) {\n          jwt.verified = true;\n\n          return Promise.resolve(true);\n        }\n\n        if (key) {\n          return Promise.reject(new DataError('Key provided to verify signature with alg: none'));\n        }\n      }\n\n      // no signatures to verify\n      return Promise.reject(new DataError('Missing signature(s)'));\n    }\n  }]);\n\n  return JWS;\n}();\n\n/**\n * Export\n */\n\n\nmodule.exports = JWS;\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(Buffer) {/**\n * Dependencies\n */\nconst assert = __webpack_require__(21);\n\nconst base64url = __webpack_require__(39);\n\nconst crypto = __webpack_require__(49);\n\nconst {\n  JWT\n} = __webpack_require__(37);\n\nconst FormUrlEncoded = __webpack_require__(69);\n\nconst {\n  URL\n} = __webpack_require__(27);\n/**\n * Authentication Request\n */\n\n\nclass AuthenticationRequest {\n  /**\n   * create\n   *\n   * @description\n   * Create a new authentication request with generated state and nonce,\n   * validate presence of required parameters, serialize the request data and\n   * persist it to the session, and return a promise for an authentication\n   * request URI.\n   *\n   * @param {RelyingParty} rp  instance of RelyingParty\n   * @param {Object} options - optional request parameters\n   * @param {Object} session  reference to localStorage or other session object\n   *\n   * @returns {Promise}\n   */\n  static create(rp, options, session) {\n    const {\n      provider,\n      defaults,\n      registration\n    } = rp;\n    let issuer, endpoint, client, params;\n    return Promise.resolve().then(() => {\n      // validate presence of OP configuration, RP client registration,\n      // and default parameters\n      assert(provider.configuration, 'RelyingParty provider OpenID Configuration is missing');\n      assert(defaults.authenticate, 'RelyingParty default authentication parameters are missing');\n      assert(registration, 'RelyingParty client registration is missing'); // define basic elements of the request\n\n      issuer = provider.configuration.issuer;\n      endpoint = provider.configuration.authorization_endpoint;\n      client = {\n        client_id: registration.client_id\n      };\n      params = Object.assign(defaults.authenticate, client, options); // validate presence of required configuration and parameters\n\n      assert(issuer, 'Missing issuer in provider OpenID Configuration');\n      assert(endpoint, 'Missing authorization_endpoint in provider OpenID Configuration');\n      assert(params.scope, 'Missing scope parameter in authentication request');\n      assert(params.response_type, 'Missing response_type parameter in authentication request');\n      assert(params.client_id, 'Missing client_id parameter in authentication request');\n      assert(params.redirect_uri, 'Missing redirect_uri parameter in authentication request'); // generate state and nonce random octets\n\n      params.state = Array.from(crypto.getRandomValues(new Uint8Array(16)));\n      params.nonce = Array.from(crypto.getRandomValues(new Uint8Array(16))); // hash the state and nonce parameter values\n\n      return Promise.all([crypto.subtle.digest({\n        name: 'SHA-256'\n      }, new Uint8Array(params.state)), crypto.subtle.digest({\n        name: 'SHA-256'\n      }, new Uint8Array(params.nonce))]);\n    }) // serialize the request with original values, store in session by\n    // encoded state param, and replace state/nonce octets with encoded\n    // digests\n    .then(digests => {\n      let state = base64url(Buffer.from(digests[0]));\n      let nonce = base64url(Buffer.from(digests[1]));\n      let key = `${issuer}/requestHistory/${state}`; // store the request params for response validation\n      // with serialized octet values for state and nonce\n\n      session[key] = JSON.stringify(params); // replace state and nonce octets with base64url encoded digests\n\n      params.state = state;\n      params.nonce = nonce;\n    }).then(() => AuthenticationRequest.generateSessionKeys()).then(sessionKeys => {\n      AuthenticationRequest.storeSessionKeys(sessionKeys, params, session);\n    }) // optionally encode a JWT with the request parameters\n    // and replace params with `{ request: <jwt> }\n    .then(() => {\n      if (provider.configuration.request_parameter_supported) {\n        return AuthenticationRequest.encodeRequestParams(params).then(encodedParams => {\n          params = encodedParams;\n        });\n      }\n    }) // render the request URI and terminate the algorithm\n    .then(() => {\n      let url = new URL(endpoint);\n      url.search = FormUrlEncoded.encode(params);\n      return url.href;\n    });\n  }\n\n  static generateSessionKeys() {\n    return crypto.subtle.generateKey({\n      name: \"RSASSA-PKCS1-v1_5\",\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n      hash: {\n        name: \"SHA-256\"\n      }\n    }, true, [\"sign\", \"verify\"]).then(keyPair => {\n      // returns a keypair object\n      return Promise.all([crypto.subtle.exportKey('jwk', keyPair.publicKey), crypto.subtle.exportKey('jwk', keyPair.privateKey)]);\n    }).then(jwkPair => {\n      let [publicJwk, privateJwk] = jwkPair;\n      return {\n        public: publicJwk,\n        private: privateJwk\n      };\n    });\n  }\n\n  static storeSessionKeys(sessionKeys, params, session) {\n    // store the private one in session, public one goes into params\n    session['oidc.session.privateKey'] = JSON.stringify(sessionKeys.private);\n    params.key = sessionKeys.public;\n  }\n\n  static encodeRequestParams(params) {\n    const excludeParams = ['scope', 'client_id', 'response_type', 'state'];\n    const keysToEncode = Object.keys(params).filter(key => !excludeParams.includes(key));\n    let payload = {};\n    keysToEncode.forEach(key => {\n      payload[key] = params[key];\n    });\n    let requestParamJwt = new JWT({\n      header: {\n        alg: 'none'\n      },\n      payload\n    }, {\n      filter: false\n    });\n    return requestParamJwt.encode().then(requestParamCompact => {\n      let newParams = {\n        scope: params['scope'],\n        client_id: params['client_id'],\n        response_type: params['response_type'],\n        request: requestParamCompact,\n        state: params['state']\n      };\n      return newParams;\n    });\n  }\n\n}\n/**\n * Export\n */\n\n\nmodule.exports = AuthenticationRequest;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports) {\n\n/**\n * Dependencies\n */\n\n/**\n * FormUrlEncoded\n */\nclass FormUrlEncoded {\n  /**\n   * Encode\n   *\n   * @description\n   * Represent an object as x-www-form-urlencoded string.\n   *\n   * @param {Object} data\n   * @returns {string}\n   */\n  static encode(data) {\n    let pairs = [];\n    Object.keys(data).forEach(function (key) {\n      pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n    });\n    return pairs.join('&');\n  }\n  /**\n   * Decode\n   *\n   * @description\n   * Parse a x-www-form-urlencoded into an object.\n   *\n   * @param {string} data\n   * @returns {Object}\n   */\n\n\n  static decode(data) {\n    let obj = {};\n    data.split('&').forEach(function (property) {\n      let pair = property.split('=');\n      let key = decodeURIComponent(pair[0]);\n      let val = decodeURIComponent(pair[1]);\n      obj[key] = val;\n    });\n    return obj;\n  }\n\n}\n/**\n * Export\n */\n\n\nmodule.exports = FormUrlEncoded;\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global, Buffer) {/**\n * Dependencies\n */\nconst {\n  URL\n} = __webpack_require__(27);\n\nconst assert = __webpack_require__(21);\n\nconst crypto = __webpack_require__(49);\n\nconst base64url = __webpack_require__(39);\n\nconst fetch = __webpack_require__(5);\n\nconst Headers = fetch.Headers ? fetch.Headers : global.Headers;\n\nconst FormUrlEncoded = __webpack_require__(69);\n\nconst IDToken = __webpack_require__(71);\n\nconst Session = __webpack_require__(73);\n\nconst onHttpError = __webpack_require__(74);\n\nconst HttpError = __webpack_require__(76);\n/**\n * AuthenticationResponse\n */\n\n\nclass AuthenticationResponse {\n  /**\n   * @param rp {RelyingParty}\n   * @param [redirect] {string} req.query\n   * @param [body] {string} req.body.text\n   * @param session {Session|Storage} req.session or localStorage or similar\n   * @param params {object} hashmap\n   * @param mode {string} 'query'/'fragment'/'form_post',\n   *   determined in `parseResponse()`\n   */\n  constructor({\n    rp,\n    redirect,\n    body,\n    session,\n    mode,\n    params = {}\n  }) {\n    this.rp = rp;\n    this.redirect = redirect;\n    this.body = body;\n    this.session = session;\n    this.mode = mode;\n    this.params = params;\n  }\n  /**\n   * validateResponse\n   *\n   * @description\n   * Authentication response validation.\n   *\n   * @param {string|Object} response\n   *\n   * @returns {Promise<Session>}\n   */\n\n\n  static validateResponse(response) {\n    return Promise.resolve(response).then(this.parseResponse).then(this.errorResponse).then(this.matchRequest).then(this.validateStateParam).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(Session.fromAuthResponse);\n  }\n  /**\n   * parseResponse\n   *\n   * @param {object} response\n   *\n   * @returns {object}\n   */\n\n\n  static parseResponse(response) {\n    let {\n      redirect,\n      body\n    } = response; // response must be either a redirect uri or request body, but not both\n\n    if (redirect && body || !redirect && !body) {\n      throw new HttpError(400, 'Invalid response mode');\n    } // parse redirect uri\n\n\n    if (redirect) {\n      let url = new URL(redirect);\n      let {\n        search,\n        hash\n      } = url;\n\n      if (search && hash || !search && !hash) {\n        throw new HttpError(400, 'Invalid response mode');\n      }\n\n      if (search) {\n        response.params = FormUrlEncoded.decode(search.substring(1));\n        response.mode = 'query';\n      }\n\n      if (hash) {\n        response.params = FormUrlEncoded.decode(hash.substring(1));\n        response.mode = 'fragment';\n      }\n    } // parse request form body\n\n\n    if (body) {\n      response.params = FormUrlEncoded.decode(body);\n      response.mode = 'form_post';\n    }\n\n    return response;\n  }\n  /**\n   * errorResponse\n   *\n   * @param {AuthenticationResponse} response\n   *\n   * @throws {Error} If response params include the OAuth2 'error' param,\n   *   throws an error based on it.\n   *\n   * @returns {AuthenticationResponse} Chainable\n   *\n   * @todo Figure out HTTP status code (typically 400, 401 or 403)\n   *   based on the OAuth2/OIDC `error` code, probably using an external library\n   */\n\n\n  static errorResponse(response) {\n    const errorCode = response.params.error;\n\n    if (errorCode) {\n      const errorParams = {};\n      errorParams['error'] = errorCode;\n      errorParams['error_description'] = response.params['error_description'];\n      errorParams['error_uri'] = response.params['error_uri'];\n      errorParams['state'] = response.params['state'];\n      const error = new Error(`AuthenticationResponse error: ${errorCode}`);\n      error.info = errorParams;\n      throw error;\n    }\n\n    return response;\n  }\n  /**\n   * matchRequest\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static matchRequest(response) {\n    let {\n      rp,\n      params,\n      session\n    } = response;\n    let state = params.state;\n    let issuer = rp.provider.configuration.issuer;\n\n    if (!state) {\n      throw new Error('Missing state parameter in authentication response');\n    }\n\n    let key = `${issuer}/requestHistory/${state}`;\n    let request = session[key];\n\n    if (!request) {\n      throw new Error('Mismatching state parameter in authentication response');\n    }\n\n    response.request = JSON.parse(request);\n    return response;\n  }\n  /**\n   * validateStateParam\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateStateParam(response) {\n    let octets = new Uint8Array(response.request.state);\n    let encoded = response.params.state;\n    return crypto.subtle.digest({\n      name: 'SHA-256'\n    }, octets).then(digest => {\n      if (encoded !== base64url(Buffer.from(digest))) {\n        throw new Error('Mismatching state parameter in authentication response');\n      }\n\n      return response;\n    });\n  }\n  /**\n   * validateResponseMode\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateResponseMode(response) {\n    if (response.request.response_type !== 'code' && response.mode === 'query') {\n      throw new Error('Invalid response mode');\n    }\n\n    return response;\n  }\n  /**\n   * validateResponseParams\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateResponseParams(response) {\n    let {\n      request,\n      params\n    } = response;\n    let expectedParams = request.response_type.split(' ');\n\n    if (expectedParams.includes('code')) {\n      assert(params.code, 'Missing authorization code in authentication response'); // TODO assert novelty of code\n    }\n\n    if (expectedParams.includes('id_token')) {\n      assert(params.id_token, 'Missing id_token in authentication response');\n    }\n\n    if (expectedParams.includes('token')) {\n      assert(params.access_token, 'Missing access_token in authentication response');\n      assert(params.token_type, 'Missing token_type in authentication response');\n    }\n\n    return response;\n  }\n  /**\n   * exchangeAuthorizationCode\n   *\n   * @param {Object} response\n   * @returns {Promise} response object\n   */\n\n\n  static exchangeAuthorizationCode(response) {\n    let {\n      rp,\n      params,\n      request\n    } = response;\n    let code = params.code; // only exchange the authorization code when the response type is \"code\"\n\n    if (!code || request['response_type'] !== 'code') {\n      return Promise.resolve(response);\n    }\n\n    let {\n      provider,\n      registration\n    } = rp;\n    let id = registration['client_id'];\n    let secret = registration['client_secret']; // verify the client is not public\n\n    if (!secret) {\n      return Promise.reject(new Error('Client cannot exchange authorization code because ' + 'it is not a confidential client'));\n    } // initialize token request arguments\n\n\n    let endpoint = provider.configuration.token_endpoint;\n    let method = 'POST'; // initialize headers\n\n    let headers = new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }); // initialize the token request parameters\n\n    let bodyContents = {\n      'grant_type': 'authorization_code',\n      'code': code,\n      'redirect_uri': request['redirect_uri'] // determine client authentication method\n\n    };\n    let authMethod = registration['token_endpoint_auth_method'] || 'client_secret_basic'; // client secret basic authentication\n\n    if (authMethod === 'client_secret_basic') {\n      let credentials = new Buffer(`${id}:${secret}`).toString('base64');\n      headers.set('Authorization', `Basic ${credentials}`);\n    } // client secret post authentication\n\n\n    if (authMethod === 'client_secret_post') {\n      bodyContents['client_id'] = id;\n      bodyContents['client_secret'] = secret;\n    }\n\n    let body = FormUrlEncoded.encode(bodyContents); // TODO\n    // client_secret_jwt authentication\n    // private_key_jwt\n    // make the token request\n\n    return fetch(endpoint, {\n      method,\n      headers,\n      body\n    }).then(onHttpError('Error exchanging authorization code')).then(tokenResponse => tokenResponse.json()).then(tokenResponse => {\n      assert(tokenResponse['access_token'], 'Missing access_token in token response');\n      assert(tokenResponse['token_type'], 'Missing token_type in token response');\n      assert(tokenResponse['id_token'], 'Missing id_token in token response'); // anything else?\n      // IS THIS THE RIGHT THING TO DO HERE?\n\n      response.params = Object.assign(response.params, tokenResponse);\n      return response;\n    });\n  }\n  /**\n   * validateIDToken\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateIDToken(response) {\n    // only validate the ID Token if present in the response\n    if (!response.params.id_token) {\n      return Promise.resolve(response);\n    }\n\n    return Promise.resolve(response).then(AuthenticationResponse.decryptIDToken).then(AuthenticationResponse.decodeIDToken).then(AuthenticationResponse.validateIssuer).then(AuthenticationResponse.validateAudience).then(AuthenticationResponse.resolveKeys).then(AuthenticationResponse.verifySignature).then(AuthenticationResponse.validateExpires).then(AuthenticationResponse.verifyNonce).then(AuthenticationResponse.validateAcr).then(AuthenticationResponse.validateAuthTime).then(AuthenticationResponse.validateAccessTokenHash).then(AuthenticationResponse.validateAuthorizationCodeHash);\n  }\n  /**\n   * decryptIDToken\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static decryptIDToken(response) {\n    // TODO\n    return Promise.resolve(response);\n  }\n  /**\n   * decodeIDToken\n   *\n   * Note: If the `id_token` is not present in params, this method does not\n   * get called (short-circuited in `validateIDToken()`).\n   *\n   * @param response {AuthenticationResponse}\n   * @param response.params {object}\n   * @param [response.params.id_token] {string} IDToken encoded as a JWT\n   *\n   * @returns {AuthenticationResponse} Chainable\n   */\n\n\n  static decodeIDToken(response) {\n    let jwt = response.params.id_token;\n\n    try {\n      response.decoded = IDToken.decode(jwt);\n    } catch (decodeError) {\n      const error = new HttpError(400, 'Error decoding ID Token');\n      error.cause = decodeError;\n      error.info = {\n        id_token: jwt\n      };\n      throw error;\n    }\n\n    return response;\n  }\n  /**\n   * validateIssuer\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateIssuer(response) {\n    let configuration = response.rp.provider.configuration;\n    let payload = response.decoded.payload; // validate issuer of token matches this relying party's provider\n\n    if (payload.iss !== configuration.issuer) {\n      throw new Error('Mismatching issuer in ID Token');\n    }\n\n    return response;\n  }\n  /**\n   * validateAudience\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateAudience(response) {\n    let registration = response.rp.registration;\n    let {\n      aud,\n      azp\n    } = response.decoded.payload; // validate audience includes this relying party\n\n    if (typeof aud === 'string' && aud !== registration['client_id']) {\n      throw new Error('Mismatching audience in id_token');\n    } // validate audience includes this relying party\n\n\n    if (Array.isArray(aud) && !aud.includes(registration['client_id'])) {\n      throw new Error('Mismatching audience in id_token');\n    } // validate authorized party is present if required\n\n\n    if (Array.isArray(aud) && !azp) {\n      throw new Error('Missing azp claim in id_token');\n    } // validate authorized party is this relying party\n\n\n    if (azp && azp !== registration['client_id']) {\n      throw new Error('Mismatching azp claim in id_token');\n    }\n\n    return response;\n  }\n  /**\n   * resolveKeys\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static resolveKeys(response) {\n    let rp = response.rp;\n    let provider = rp.provider;\n    let decoded = response.decoded;\n    return Promise.resolve(provider.jwks).then(jwks => jwks ? jwks : rp.jwks()).then(jwks => {\n      if (decoded.resolveKeys(jwks)) {\n        return Promise.resolve(response);\n      } else {\n        throw new Error('Cannot resolve signing key for ID Token');\n      }\n    });\n  }\n  /**\n   * verifySignature\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static verifySignature(response) {\n    let alg = response.decoded.header.alg;\n    let registration = response.rp.registration;\n    let expectedAlgorithm = registration['id_token_signed_response_alg'] || 'RS256'; // validate signing algorithm matches expectation\n\n    if (alg !== expectedAlgorithm) {\n      throw new Error(`Expected ID Token to be signed with ${expectedAlgorithm}`);\n    }\n\n    return response.decoded.verify().then(verified => {\n      if (!verified) {\n        throw new Error('Invalid ID Token signature');\n      }\n\n      return response;\n    });\n  }\n  /**\n   * validateExpires\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateExpires(response) {\n    let exp = response.decoded.payload.exp; // validate expiration of token\n\n    if (exp <= Math.floor(Date.now() / 1000)) {\n      throw new Error('Expired ID Token');\n    }\n\n    return response;\n  }\n  /**\n   * verifyNonce\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static verifyNonce(response) {\n    let octets = new Uint8Array(response.request.nonce);\n    let nonce = response.decoded.payload.nonce;\n\n    if (!nonce) {\n      throw new Error('Missing nonce in ID Token');\n    }\n\n    return crypto.subtle.digest({\n      name: 'SHA-256'\n    }, octets).then(digest => {\n      if (nonce !== base64url(Buffer.from(digest))) {\n        throw new Error('Mismatching nonce in ID Token');\n      }\n\n      return response;\n    });\n  }\n  /**\n   * validateAcr\n   *\n   * @param {Object} response\n   * @returns {Object}\n   */\n\n\n  static validateAcr(response) {\n    // TODO\n    return response;\n  }\n  /**\n   * validateAuthTime\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateAuthTime(response) {\n    // TODO\n    return response;\n  }\n  /**\n   * validateAccessTokenHash\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateAccessTokenHash(response) {\n    // TODO\n    return response;\n  }\n  /**\n   * validateAuthorizationCodeHash\n   *\n   * @param {Object} response\n   * @returns {Promise}\n   */\n\n\n  static validateAuthorizationCodeHash(response) {\n    // TODO\n    return response;\n  }\n\n}\n/**\n * Export\n */\n\n\nmodule.exports = AuthenticationResponse;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(20), __webpack_require__(41).Buffer))\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Local dependencies\n */\nconst {\n  JWT\n} = __webpack_require__(37);\n\nconst IDTokenSchema = __webpack_require__(72);\n/**\n * IDToken\n */\n\n\nclass IDToken extends JWT {\n  /**\n   * Schema\n   */\n  static get schema() {\n    return IDTokenSchema;\n  }\n\n}\n/**\n * Export\n */\n\n\nmodule.exports = IDToken;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Local dependencies\n */\nconst {\n  JWTSchema\n} = __webpack_require__(37);\n/**\n * IDToken Schema\n */\n\n\nconst IDTokenSchema = JWTSchema.extend({\n  properties: {\n    /**\n     * header\n     * http://openid.net/specs/openid-connect-core-1_0.html#IDToken\n     * ID Tokens SHOULD NOT use the JWS or JWE x5u, x5c, jku, or jwk Header\n     * Parameter fields. Instead, references to keys used are communicated in\n     * advance using Discovery and Registration parameters, per Section 10.\n     */\n    header: {//not: { required: ['x5u', 'x5c', 'jku', 'jwk'] }\n    },\n\n    /**\n     * payload\n     */\n    payload: {\n      properties: {\n        /**\n         * iss\n         *\n         * REQUIRED. Issuer Identifier for the Issuer of the response.\n         * The iss value is a case sensitive URL using the https scheme\n         * that contains scheme, host, and optionally, port number and\n         * path components and no query or fragment components.\n         */\n        iss: {\n          type: 'string',\n          format: 'url'\n        },\n\n        /**\n         * sub\n         *\n         * REQUIRED. Subject Identifier. A locally unique and never\n         * reassigned identifier within the Issuer for the End-User, which\n         * is intended to be consumed by the Client, e.g., 24400320 or\n         * AItOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4. It MUST NOT exceed 255\n         * ASCII characters in length. The sub value is a case sensitive\n         * string.\n         */\n        sub: {\n          type: 'string',\n          maxLength: 255\n        },\n\n        /**\n         * aud\n         *\n         * REQUIRED. Audience(s) that this ID Token is intended for. It\n         * MUST contain the OAuth 2.0 client_id of the Relying Party as an\n         * audience value. It MAY also contain identifiers for other audiences.\n         * In the general case, the aud value is an array of case sensitive\n         * strings. In the common special case when there is one audience,\n         * the aud value MAY be a single case sensitive string.\n         */\n        // inherited from JWTClaimsSetSchema\n\n        /**\n         * exp\n         *\n         * REQUIRED. Expiration time on or after which the ID Token MUST NOT\n         * be accepted for processing. The processing of this parameter\n         * requires that the current date/time MUST be before the expiration\n         * date/time listed in the value. Implementers MAY provide for some\n         * small leeway, usually no more than a few minutes, to account for\n         * clock skew. Its value is a JSON number representing the number of\n         * seconds from 1970-01-01T0:0:0Z as measured in UTC until the\n         * date/time. See RFC 3339 [RFC3339] for details regarding date/times\n         * in general and UTC in particular.\n         */\n        // inherited from JWTClaimsSetSchema\n\n        /**\n         * iat\n         *\n         * REQUIRED. Time at which the JWT was issued. Its value is a\n         * JSON number representing the number of seconds from\n         * 1970-01-01T0:0:0Z as measured in UTC until the date/time.\n         */\n        // inherited from JWTClaimsSetSchema\n\n        /**\n         * auth_time\n         *\n         * Time when the End-User authentication occurred. Its value is a\n         * JSON number representing the number of seconds from\n         * 1970-01-01T0:0:0Z as measured in UTC until the date/time. When a\n         * max_age request is made or when auth_time is requested as an\n         * Essential Claim, then this Claim is REQUIRED; otherwise, its\n         * inclusion is OPTIONAL. (The auth_time Claim semantically\n         * corresponds to the OpenID 2.0 PAPE [OpenID.PAPE] auth_time\n         * response parameter.)\n         */\n        auth_time: {\n          type: 'integer',\n          format: 'NumericDate'\n        },\n\n        /**\n         * nonce\n         *\n         * String value used to associate a Client session with an ID Token,\n         * and to mitigate replay attacks. The value is passed through\n         * unmodified from the Authentication Request to the ID Token. If\n         * present in the ID Token, Clients MUST verify that the nonce Claim\n         * Value is equal to the value of the nonce parameter sent in the\n         * Authentication Request. If present in the Authentication Request,\n         * Authorization Servers MUST include a nonce Claim in the ID Token\n         * with the Claim Value being the nonce value sent in the\n         * Authentication Request. Authorization Servers SHOULD perform no\n         * other processing on nonce values used. The nonce value is a case\n         * sensitive string.\n         */\n        nonce: {\n          type: 'string'\n        },\n\n        /**\n         * acr\n         *\n         * OPTIONAL. Authentication Context Class Reference. String\n         * specifying an Authentication Context Class Reference value that\n         * identifies the Authentication Context Class that the authentication\n         * performed satisfied. The value \"0\" indicates the End-User\n         * authentication did not meet the requirements of ISO/IEC 29115\n         * [ISO29115] level 1. Authentication using a long-lived browser\n         * cookie, for instance, is one example where the use of \"level 0\" is\n         * appropriate. Authentications with level 0 SHOULD NOT be used to\n         * authorize access to any resource of any monetary value. (This\n         * corresponds to the OpenID 2.0 PAPE [OpenID.PAPE] nist_auth_level\n         * 0.) An absolute URI or an RFC 6711 [RFC6711] registered name\n         * SHOULD be used as the acr value; registered names MUST NOT be used\n         * with a different meaning than that which is registered. Parties\n         * using this claim will need to agree upon the meanings of the\n         * values used, which may be context-specific. The acr value is a\n         * case sensitive string.\n         */\n        acr: {\n          type: 'string'\n        },\n\n        /**\n         * amr\n         * OPTIONAL. Authentication Methods References. JSON array of strings\n         * that are identifiers for authentication methods used in the\n         * authentication. For instance, values might indicate that both\n         * password and OTP authentication methods were used. The definition\n         * of particular values to be used in the amr Claim is beyond the\n         * scope of this specification. Parties using this claim will need to\n         * agree upon the meanings of the values used, which may be context-\n         * specific. The amr value is an array of case sensitive strings.\n         */\n        amr: {\n          type: 'array',\n          items: {\n            type: 'string'\n          }\n        },\n\n        /**\n         * azp\n         * OPTIONAL. Authorized party - the party to which the ID Token was\n         * issued. If present, it MUST contain the OAuth 2.0 Client ID of this\n         * party. This Claim is only needed when the ID Token has a single\n         * audience value and that audience is different than the authorized\n         * party. It MAY be included even when the authorized party is the\n         * same as the sole audience. The azp value is a case sensitive string\n         * containing a StringOrURI value.\n         */\n        azp: {\n          type: 'string',\n          format: 'StringOrURI'\n        }\n      },\n\n      /**\n       * Required Claims\n       */\n      required: ['iss', 'sub', 'aud', 'exp', 'iat']\n    }\n  }\n});\n/**\n * Export\n */\n\nmodule.exports = IDTokenSchema;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst fetch = __webpack_require__(5);\n\nconst onHttpError = __webpack_require__(74);\n\nconst PoPToken = __webpack_require__(75);\n\nclass Session {\n  /**\n   * @param options {Object}\n   *\n   * @param options.credentialType {string} 'access_token' or 'pop_token'\n   *\n   * @param options.issuer {string} Identity provider (issuer of ID/Access Token)\n   *\n   * @param options.authorization {object}\n   * @param options.authorization.client_id {string} OIDC/OAuth2 client id\n   * @param [options.authorization.id_token] {string} Compact-serialized id_token param\n   * @param [options.authorization.access_token] {string} Compact-serialized access_token param\n   * @param [options.authorization.refresh_token] {string} Compact-serialized refresh_token\n   *\n   * @param [options.sessionKey] {string} Serialized client session key generated\n   *   during the Authentication Request, used to issue PoPTokens\n   *\n   * @param [options.idClaims] {object} Decoded/verified ID Token JWT payload\n   *\n   * @param [options.accessClaims] {object} Decoded/verified Access Token JWT payload\n   */\n  constructor(options) {\n    this.credentialType = options.credentialType || 'access_token';\n    this.issuer = options.issuer;\n    this.authorization = options.authorization || {};\n    this.sessionKey = options.sessionKey;\n    this.idClaims = options.idClaims;\n    this.accessClaims = options.accessClaims;\n  }\n\n  static from(options) {\n    return new Session(options);\n  }\n  /**\n   * @param response {AuthenticationResponse}\n   *\n   * @returns {Session} RelyingParty Session object\n   */\n\n\n  static fromAuthResponse(response) {\n    const RelyingParty = __webpack_require__(19); // import here due to circular dep\n\n\n    let idClaims = response.decoded && response.decoded.payload || {};\n    let {\n      rp\n    } = response;\n    let registration = rp.registration;\n    let rpAuthOptions = rp.defaults.authenticate || {};\n    let credentialType = rpAuthOptions['credential_type'] || rp.defaults.popToken ? 'pop_token' : 'access_token';\n    let sessionKey = response.session[RelyingParty.SESSION_PRIVATE_KEY];\n    let options = {\n      credentialType,\n      sessionKey,\n      issuer: idClaims.iss,\n      idClaims,\n      authorization: {\n        client_id: registration['client_id'],\n        access_token: response.params['access_token'],\n        id_token: response.params['id_token'],\n        refresh_token: response.params['refresh_token']\n      }\n    };\n    return Session.from(options);\n  }\n  /**\n   * Authenticated fetch() getter\n   *\n   * @returns {function}\n   */\n\n\n  get fetch() {\n    /**\n     * fetch() function signature\n     *\n     * @param url {RequestInfo|string}\n     * @param options {object}\n     *\n     * @returns {Function<Promise<Response>>}\n     */\n    return (url, options) => {\n      return Promise.resolve().then(() => {\n        if (this.hasCredentials()) {\n          return this.fetchWithCredentials(url, options);\n        } else {\n          return fetch(url, options);\n        }\n      }).then(onHttpError('Error while fetching resource'));\n    };\n  }\n  /**\n   * bearerTokenFor\n   *\n   * @param url {string}\n   *\n   * @returns {Promise<string>}\n   */\n\n\n  bearerTokenFor(url) {\n    switch (this.credentialType) {\n      case 'pop_token':\n        return PoPToken.issueFor(url, this);\n\n      default:\n        // 'access_token' etc\n        return Promise.resolve(this.authorization[this.credentialType]);\n    }\n  }\n  /**\n   * hasCredentials\n   *\n   * @returns {boolean}\n   */\n\n\n  hasCredentials() {\n    switch (this.credentialType) {\n      case 'pop_token':\n        return !!this.authorization['id_token'];\n\n      default:\n        // 'access_token' etc\n        return !!this.authorization[this.credentialType];\n    }\n  }\n  /**\n   * fetchWithCredentials\n   *\n   * @param url {RequestInfo|string}\n   * @param options {object}\n   *\n   * @returns {Promise<Response>}\n   */\n\n\n  fetchWithCredentials(url, options = {}) {\n    options.headers = options.headers || {};\n    return this.bearerTokenFor(url).then(token => {\n      options.headers.authorization = `Bearer ${token}`;\n      return fetch(url, options);\n    });\n  }\n\n}\n\nmodule.exports = Session;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Throws an error when a fetch response status code indicates a 400 or 500\n * HTTP error. (The whatwg fetch api does not normally reject on http error\n * responses).\n *\n * Usage:\n *\n * ```\n * return fetch(url)\n *   .then(onHttpError('Error while fetching resource')\n *   .catch(err => console.log(err))\n *\n * // -> 'Error while fetching resource: 404 Not Found' error\n * // if a 404 response is encountered\n * ```\n *\n * @param [message] {string} Optional error message to clarify context\n *\n * @throws {Error} For http status codes > 300\n *\n * @return {Object} fetch response object (passed through if no error)\n */\n\nfunction onHttpError(message = 'fetch error') {\n  return response => {\n    if (response.status >= 200 && response.status < 300) {\n      return response;\n    }\n\n    let errorMessage = `${message}: ${response.status} ${response.statusText}`;\n    let error = new Error(errorMessage);\n    error.response = response;\n    error.statusCode = response.status;\n    throw error;\n  };\n}\n\nmodule.exports = onHttpError;\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n  URL\n} = __webpack_require__(27);\n\nconst {\n  JWT,\n  JWK\n} = __webpack_require__(37);\n\nconst DEFAULT_MAX_AGE = 3600; // Default token expiration, in seconds\n\nclass PoPToken extends JWT {\n  /**\n   * @param resourceServerUri {string} RS URI for which this token is intended\n   *\n   * @param session {Session}\n   * @param session.sessionKey {string}\n   * @param session.authorization.client_id {string}\n   * @param session.authorization.id_token {string}\n   *\n   * @returns {Promise<string>} PoPToken, encoded as compact JWT\n   */\n  static issueFor(resourceServerUri, session) {\n    if (!resourceServerUri) {\n      throw new Error('Cannot issue PoPToken - missing resource server URI');\n    }\n\n    if (!session.sessionKey) {\n      throw new Error('Cannot issue PoPToken - missing session key');\n    }\n\n    if (!session.authorization.id_token) {\n      throw new Error('Cannot issue PoPToken - missing id token');\n    }\n\n    let jwk = JSON.parse(session.sessionKey);\n    return JWK.importKey(jwk).then(importedSessionJwk => {\n      let options = {\n        aud: new URL(resourceServerUri).origin,\n        key: importedSessionJwk,\n        iss: session.authorization.client_id,\n        id_token: session.authorization.id_token\n      };\n      return PoPToken.issue(options);\n    }).then(jwt => {\n      return jwt.encode();\n    });\n  }\n  /**\n   * issue\n   *\n   * @param options {Object}\n   * @param options.iss {string} Token issuer (RP client_id)\n   * @param options.aud {string|Array<string>} Audience for the token\n   *   (such as the Resource Server url)\n   * @param options.key {JWK} Proof of Possession (private) signing key, see\n   *   https://tools.ietf.org/html/rfc7800#section-3.1\n   *\n   * @param options.id_token {string} JWT compact encoded ID Token\n   *\n   * Optional:\n   * @param [options.iat] {number} Issued at timestamp (in seconds)\n   * @param [options.max] {number} Max token lifetime in seconds\n   *\n   * @returns {PoPToken} Proof of Possession Token (JWT instance)\n   */\n\n\n  static issue(options) {\n    let {\n      aud,\n      iss,\n      key\n    } = options;\n    let alg = key.alg;\n    let iat = options.iat || Math.floor(Date.now() / 1000);\n    let max = options.max || DEFAULT_MAX_AGE;\n    let exp = iat + max; // token expiration\n\n    let header = {\n      alg\n    };\n    let payload = {\n      iss,\n      aud,\n      exp,\n      iat,\n      id_token: options.id_token,\n      token_type: 'pop'\n    };\n    let jwt = new PoPToken({\n      header,\n      payload,\n      key: key.cryptoKey\n    }, {\n      filter: false\n    });\n    return jwt;\n  }\n\n}\n\nmodule.exports = PoPToken;\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = HttpError\nvar StandardError = __webpack_require__(77)\nvar STATUS_CODE_TO_NAME = __webpack_require__(78)\nvar STATUS_NAME_TO_CODE = exports\n\nfunction HttpError(code, msg, props) {\n  if (typeof code == \"string\") code = STATUS_NAME_TO_CODE[code]\n  if (typeof code != \"number\") throw new TypeError(\"Non-numeric HTTP code\")\n  if (typeof msg == \"object\" && msg != null) { props = msg; msg = null }\n  StandardError.call(this, msg || STATUS_CODE_TO_NAME[code], props)\n  this.code = code\n}\n\nHttpError.prototype = Object.create(StandardError.prototype, {\n  constructor: {value: HttpError, configurable: true, writable: true}\n})\n\n// Set name explicitly for when the code gets minified.\nHttpError.prototype.name = \"HttpError\"\n\nObject.defineProperties(HttpError.prototype, {\n  statusCode: alias(\"code\"),\n  statusMessage: alias(\"message\"),\n\n  status: {\n    configurable: true,\n    get: function() { return this.code },\n    set: function(value) {\n      Object.defineProperty(this, \"status\", {\n        value: value, configurable: true, enumerable: true, writable: true\n      })\n    }\n  }\n})\n\nHttpError.prototype.toString = function() {\n  return this.name + \": \" + this.code + \" \" + this.message\n}\n\nfor (var code in STATUS_CODE_TO_NAME) {\n  var name = STATUS_CODE_TO_NAME[code]\n  exports[name.replace(\"'\", \"\").replace(/[- ]/g, \"_\").toUpperCase()] = +code\n}\n\nfunction alias(name) {\n  return {\n    configurable: true,\n    get: function() { return this[name] },\n    set: function(value) { return this[name] = value }\n  }\n}\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\nvar has = Object.hasOwnProperty\nvar proto = Object.getPrototypeOf\nvar trace = Error.captureStackTrace\nmodule.exports = StandardError\n\nfunction StandardError(msg, props) {\n  // Let all properties be enumerable for easier serialization.\n  if (msg && typeof msg == \"object\") props = msg, msg = undefined\n  else this.message = msg\n\n  // Name has to be an own property (or on the prototype a single step up) for\n  // the stack to be printed with the correct name.\n  if (props) for (var key in props) this[key] = props[key]\n  if (!has.call(this, \"name\"))\n    this.name = has.call(proto(this), \"name\")? this.name : this.constructor.name\n\n  if (trace && !(\"stack\" in this)) trace(this, this.constructor)\n}\n\nStandardError.prototype = Object.create(Error.prototype, {\n  constructor: {value: StandardError, configurable: true, writable: true}\n})\n\n// Set name explicitly for when the code gets minified.\nStandardError.prototype.name = \"StandardError\"\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"{\\\"100\\\":\\\"Continue\\\",\\\"101\\\":\\\"Switching Protocols\\\",\\\"102\\\":\\\"Processing\\\",\\\"200\\\":\\\"OK\\\",\\\"201\\\":\\\"Created\\\",\\\"202\\\":\\\"Accepted\\\",\\\"203\\\":\\\"Non-Authoritative Information\\\",\\\"204\\\":\\\"No Content\\\",\\\"205\\\":\\\"Reset Content\\\",\\\"206\\\":\\\"Partial Content\\\",\\\"207\\\":\\\"Multi-Status\\\",\\\"208\\\":\\\"Already Reported\\\",\\\"226\\\":\\\"IM Used\\\",\\\"300\\\":\\\"Multiple Choices\\\",\\\"301\\\":\\\"Moved Permanently\\\",\\\"302\\\":\\\"Found\\\",\\\"303\\\":\\\"See Other\\\",\\\"304\\\":\\\"Not Modified\\\",\\\"305\\\":\\\"Use Proxy\\\",\\\"307\\\":\\\"Temporary Redirect\\\",\\\"308\\\":\\\"Permanent Redirect\\\",\\\"400\\\":\\\"Bad Request\\\",\\\"401\\\":\\\"Unauthorized\\\",\\\"402\\\":\\\"Payment Required\\\",\\\"403\\\":\\\"Forbidden\\\",\\\"404\\\":\\\"Not Found\\\",\\\"405\\\":\\\"Method Not Allowed\\\",\\\"406\\\":\\\"Not Acceptable\\\",\\\"407\\\":\\\"Proxy Authentication Required\\\",\\\"408\\\":\\\"Request Timeout\\\",\\\"409\\\":\\\"Conflict\\\",\\\"410\\\":\\\"Gone\\\",\\\"411\\\":\\\"Length Required\\\",\\\"412\\\":\\\"Precondition Failed\\\",\\\"413\\\":\\\"Payload Too Large\\\",\\\"414\\\":\\\"URI Too Long\\\",\\\"415\\\":\\\"Unsupported Media Type\\\",\\\"416\\\":\\\"Range Not Satisfiable\\\",\\\"417\\\":\\\"Expectation Failed\\\",\\\"418\\\":\\\"I'm a teapot\\\",\\\"421\\\":\\\"Misdirected Request\\\",\\\"422\\\":\\\"Unprocessable Entity\\\",\\\"423\\\":\\\"Locked\\\",\\\"424\\\":\\\"Failed Dependency\\\",\\\"425\\\":\\\"Unordered Collection\\\",\\\"426\\\":\\\"Upgrade Required\\\",\\\"428\\\":\\\"Precondition Required\\\",\\\"429\\\":\\\"Too Many Requests\\\",\\\"431\\\":\\\"Request Header Fields Too Large\\\",\\\"500\\\":\\\"Internal Server Error\\\",\\\"501\\\":\\\"Not Implemented\\\",\\\"502\\\":\\\"Bad Gateway\\\",\\\"503\\\":\\\"Service Unavailable\\\",\\\"504\\\":\\\"Gateway Timeout\\\",\\\"505\\\":\\\"HTTP Version Not Supported\\\",\\\"506\\\":\\\"Variant Also Negotiates\\\",\\\"507\\\":\\\"Insufficient Storage\\\",\\\"508\\\":\\\"Loop Detected\\\",\\\"509\\\":\\\"Bandwidth Limit Exceeded\\\",\\\"510\\\":\\\"Not Extended\\\",\\\"511\\\":\\\"Network Authentication Required\\\"}\");\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Dependencies\n */\nconst {\n  JSONSchema\n} = __webpack_require__(28);\n/**\n * RelyingParty Schema\n *\n * This schema initializes and verifies Relying Party client configuration.\n * RelyingParty objects can be persisted and rehydrated. By encapsulating this data in\n * it's own class, it's possible to have multiple RP configurations running\n * simultaneously.\n */\n\n\nconst RelyingPartySchema = new JSONSchema({\n  type: 'object',\n  properties: {\n    /**\n     * provider\n     *\n     * Information about the provider, including issuer URL, human readable name,\n     * and any configuration or provider metadata retrieved from the OP.\n     */\n    provider: {\n      type: 'object',\n      properties: {\n        name: {\n          type: 'string'\n        },\n        url: {\n          type: 'string',\n          format: 'uri'\n        },\n        // NOTE:\n        // OpenID Configuration (discovery response) and JSON Web Keys Set for an\n        // issuer can be cached here. However the cache should not be persisted or\n        // relied upon.\n        //\n        configuration: {},\n        // .well-known/openid-configuration\n        jwks: {} // /jwks\n\n      },\n      required: ['url']\n    },\n\n    /**\n     * defaults\n     *\n     * Default request parameters for authentication and dynamic registration requests.\n     * These values can be extended or overridden via arguments to the respective\n     * request methods.\n     *\n     * These are part of the relying party client configuration and can be serialized\n     * and persisted.\n     */\n    defaults: {\n      type: 'object',\n      properties: {\n        /**\n         * Use Proof of Possession token semantics for the ID Token\n         */\n        popToken: {\n          type: 'boolean',\n          default: false\n        },\n\n        /**\n         * Default authentication request parameters\n         */\n        authenticate: {\n          type: 'object',\n          properties: {\n            redirect_uri: {\n              type: 'string',\n              format: 'uri'\n            },\n            response_type: {\n              type: 'string',\n              default: 'id_token token',\n              // browser detection\n              enum: ['code', 'token', 'id_token token', 'id_token token code']\n            },\n            display: {\n              type: 'string',\n              default: 'page',\n              enum: ['page', 'popup']\n            },\n            scope: {\n              type: ['string', 'array'],\n              default: ['openid']\n            }\n          }\n        },\n\n        /**\n         * Default client registration parameters\n         */\n        register: {}\n      }\n    },\n\n    /**\n     * registration\n     *\n     * This is the client registration response from dynamic registration. It should\n     * always reflect the client configuration on the openid provider. A client access\n     * token is stored here\n     */\n    registration: {},\n    // ClientMetadataSchema\n\n    /**\n     * store\n     */\n    store: {\n      type: 'object',\n      default: {}\n    }\n  }\n});\n/**\n * Export\n */\n\nmodule.exports = RelyingPartySchema;\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar _require = __webpack_require__(27),\n    URL = _require.URL;\n\nvar _require2 = __webpack_require__(37),\n    JWT = _require2.JWT,\n    JWK = _require2.JWK;\n\nvar DEFAULT_MAX_AGE = 3600; // Default token expiration, in seconds\n\nvar PoPToken = function (_JWT) {\n  _inherits(PoPToken, _JWT);\n\n  function PoPToken() {\n    _classCallCheck(this, PoPToken);\n\n    return _possibleConstructorReturn(this, (PoPToken.__proto__ || Object.getPrototypeOf(PoPToken)).apply(this, arguments));\n  }\n\n  _createClass(PoPToken, null, [{\n    key: 'issueFor',\n\n    /**\n     * @param resourceServerUri {string} RS URI for which this token is intended\n     *\n     * @param session {Session}\n     * @param session.sessionKey {string}\n     * @param session.authorization.client_id {string}\n     * @param session.authorization.id_token {string}\n     *\n     * @returns {Promise<string>} PoPToken, encoded as compact JWT\n     */\n    value: function issueFor(resourceServerUri, session) {\n      if (!resourceServerUri) {\n        throw new Error('Cannot issue PoPToken - missing resource server URI');\n      }\n\n      if (!session.sessionKey) {\n        throw new Error('Cannot issue PoPToken - missing session key');\n      }\n\n      if (!session.authorization.id_token) {\n        throw new Error('Cannot issue PoPToken - missing id token');\n      }\n\n      var jwk = JSON.parse(session.sessionKey);\n      return JWK.importKey(jwk).then(function (importedSessionJwk) {\n        var options = {\n          aud: new URL(resourceServerUri).origin,\n          key: importedSessionJwk,\n          iss: session.authorization.client_id,\n          id_token: session.authorization.id_token\n        };\n        return PoPToken.issue(options);\n      }).then(function (jwt) {\n        return jwt.encode();\n      });\n    }\n    /**\n     * issue\n     *\n     * @param options {Object}\n     * @param options.iss {string} Token issuer (RP client_id)\n     * @param options.aud {string|Array<string>} Audience for the token\n     *   (such as the Resource Server url)\n     * @param options.key {JWK} Proof of Possession (private) signing key, see\n     *   https://tools.ietf.org/html/rfc7800#section-3.1\n     *\n     * @param options.id_token {string} JWT compact encoded ID Token\n     *\n     * Optional:\n     * @param [options.iat] {number} Issued at timestamp (in seconds)\n     * @param [options.max] {number} Max token lifetime in seconds\n     *\n     * @returns {PoPToken} Proof of Possession Token (JWT instance)\n     */\n\n  }, {\n    key: 'issue',\n    value: function issue(options) {\n      var aud = options.aud,\n          iss = options.iss,\n          key = options.key;\n      var alg = key.alg;\n      var iat = options.iat || Math.floor(Date.now() / 1000);\n      var max = options.max || DEFAULT_MAX_AGE;\n      var exp = iat + max; // token expiration\n\n      var header = {\n        alg: alg\n      };\n      var payload = {\n        iss: iss,\n        aud: aud,\n        exp: exp,\n        iat: iat,\n        id_token: options.id_token,\n        token_type: 'pop'\n      };\n      var jwt = new PoPToken({\n        header: header,\n        payload: payload,\n        key: key.cryptoKey\n      }, {\n        filter: false\n      });\n      return jwt;\n    }\n  }]);\n\n  return PoPToken;\n}(JWT);\n\nmodule.exports = PoPToken;\n\n/***/ }),\n/* 81 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"openIdpPopup\", function() { return openIdpPopup; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"obtainSession\", function() { return obtainSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"popupHandler\", function() { return popupHandler; });\n/* harmony import */ var _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);\n/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n\n\nfunction openIdpPopup(popupUri) {\n  const width = 650;\n  const height = 400;\n  const left = window.screenX + (window.innerWidth - width) / 2;\n  const top = window.screenY + (window.innerHeight - height) / 2;\n  const settings = \"width=\".concat(width, \",height=\").concat(height, \",left=\").concat(left, \",top=\").concat(top);\n  return window.open(popupUri, 'solid-auth-client', settings);\n}\nfunction obtainSession(store, popup, options) {\n  return new Promise((resolve, reject) => {\n    const popupServer = new _ipc__WEBPACK_IMPORTED_MODULE_0__[\"Server\"](popup, Object(_url_util__WEBPACK_IMPORTED_MODULE_1__[\"originOf\"])(options.popupUri || ''), popupHandler(store, options, session => {\n      popupServer.stop();\n      resolve(session);\n    }));\n    popupServer.start();\n  });\n}\nfunction popupHandler(store, _ref, foundSessionCb) {\n  let {\n    popupUri,\n    callbackUri\n  } = _ref;\n  return async function (method) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    switch (method) {\n      // Origin\n      case 'getAppOrigin':\n        return window.location.origin;\n      // Storage\n\n      case 'storage/getItem':\n        return store.getItem(...args);\n\n      case 'storage/setItem':\n        return store.setItem(...args);\n\n      case 'storage/removeItem':\n        return store.removeItem(...args);\n      // Login\n\n      case 'getLoginOptions':\n        return {\n          popupUri,\n          callbackUri\n        };\n\n      case 'foundSession':\n        foundSessionCb(...args);\n    }\n  };\n}\n\n/***/ })\n/******/ ])[\"default\"];\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}