{"version":3,"sources":["webpack://solid.react/webpack/bootstrap","webpack://solid.react/external \"React\"","webpack://solid.react/./node_modules/@babel/runtime/helpers/extends.js","webpack://solid.react/external [\"solid\",\"auth\"]","webpack://solid.react/external [\"solid\",\"data\"]","webpack://solid.react/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://solid.react/./node_modules/@babel/runtime/helpers/asyncIterator.js","webpack://solid.react/./src/hooks/useWebId.js","webpack://solid.react/./src/hooks/useLoggedIn.js","webpack://solid.react/./src/hooks/useLoggedOut.js","webpack://solid.react/./src/UpdateContext.js","webpack://solid.react/./src/hooks/useLiveUpdate.js","webpack://solid.react/./src/util.js","webpack://solid.react/./src/ExpressionEvaluator.js","webpack://solid.react/./src/hooks/useLDflex.js","webpack://solid.react/./src/hooks/useLDflexValue.js","webpack://solid.react/./src/hooks/useLDflexList.js","webpack://solid.react/./src/components/withWebId.jsx","webpack://solid.react/./src/components/evaluateExpressions.jsx","webpack://solid.react/./src/components/evaluateList.jsx","webpack://solid.react/./src/components/LoggedIn.jsx","webpack://solid.react/./src/components/LoggedOut.jsx","webpack://solid.react/./src/components/LoginButton.jsx","webpack://solid.react/./src/components/LogoutButton.jsx","webpack://solid.react/./src/components/AuthButton.jsx","webpack://solid.react/./src/components/Value.jsx","webpack://solid.react/./src/components/Image.jsx","webpack://solid.react/./src/components/Label.jsx","webpack://solid.react/./src/components/Link.jsx","webpack://solid.react/./src/components/Name.jsx","webpack://solid.react/./src/components/List.jsx","webpack://solid.react/./src/UpdateTracker.js","webpack://solid.react/./src/components/LiveUpdate.jsx","webpack://solid.react/./src/hooks/useLatestUpdate.js","webpack://solid.react/./src/components/ActivityButton.jsx","webpack://solid.react/./src/components/LikeButton.jsx","webpack://solid.react/./src/components/DislikeButton.jsx","webpack://solid.react/./src/components/FollowButton.jsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","_extends","assign","target","arguments","length","source","apply","this","solid","obj","configurable","writable","iterable","method","asyncIterator","iterator","TypeError","webId","undefined","subscribers","Set","getWebId","_","id","useWebId","reducer","result","updateWebId","useReducer","useDebugValue","useEffect","add","delete","auth","trackSession","session","subscriber","isNotNull","useLoggedIn","loggedIn","isNull","useLoggedOut","loggedOut","createContext","useLiveUpdate","latestUpdate","useContext","UpdateContext","timestamp","srcToLDflex","src","test","pick","keys","destination","getDisplayName","Component","displayName","createTaskQueue","drop","timeBetween","concurrent","queue","scheduler","runQueuedTasks","setTimeout","splice","forEach","async","run","resolve","reject","error","schedule","functions","group","Array","isArray","tasks","results","map","Promise","push","clear","hadPendingTasks","filter","task","evaluatorQueue","ExpressionEvaluator","destroy","pending","cancel","values","lists","updateCallback","evaluators","entries","expr","evaluateAsValue","evaluateAsList","all","statuses","e","catch","console","warn","some","done","promise","resolveExpression","empty","items","update","updateQueue","item","needsUpdate","data","list","none","useLDflex","expression","listMode","useState","toString","evaluator","query","evaluate","changed","current","useLDflexValue","useLDflexList","createWrapper","higherOrderComponent","props","Wrapper","evaluateExpressions","valueProps","listProps","initialState","EvaluateExpressions","componentDidMount","state","setState","componentDidUpdate","prevProps","newUser","componentWillUnmount","render","withWebId","EvaluateList","propName","WrappedComponent","LoggedIn","children","LoggedOut","LoginButton","popup","className","onClick","popupLogin","popupUri","LogoutButton","logout","AuthButton","login","Value","data-error","message","Image","defaultSrc","alt","Label","Link","href","Name","List","offset","limit","Infinity","container","index","slice","webSockets","fetchedUrls","UpdateTracker","constructor","urls","url","replace","tracked","trackResource","options","host","URL","then","resourceUrl","webSocketUrl","fetch","headers","Error","getWebSocketUrl","webSocket","WebSocket","resources","reconnectionAttempts","reconnectionDelay","enqueue","onmessage","processMessage","onclose","reconnect","ready","onopen","createWebSocket","send","match","exec","ldflex","clearCache","Date","on","has","Provider","LiveUpdate","subscribe","setLatestUpdate","tracker","unsubscribe","useLatestUpdate","trim","split","as","context","ActivityButton","activityType","window","location","shortName","toLowerCase","activateText","deactivateText","activateLabel","deactivateLabel","exists","setExists","activity","action","customActivityButton","type","activate","deactivate","deactivateNoChildren"],"mappings":"kEACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,gBClFrDhC,EAAOD,QAAUkC,O,cCAjB,SAASC,IAeP,OAdAlC,EAAOD,QAAUmC,EAAWvB,OAAOwB,QAAU,SAAUC,GACrD,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAUC,OAAQrC,IAAK,CACzC,IAAIsC,EAASF,UAAUpC,GAEvB,IAAK,IAAIuB,KAAOe,EACV5B,OAAOkB,UAAUC,eAAe1B,KAAKmC,EAAQf,KAC/CY,EAAOZ,GAAOe,EAAOf,IAK3B,OAAOY,GAGFF,EAASM,MAAMC,KAAMJ,WAG9BrC,EAAOD,QAAUmC,G,cClBjBlC,EAAOD,QAAU2C,MAAY,M,cCA7B1C,EAAOD,QAAU2C,MAAY,M,cCe7B1C,EAAOD,QAfP,SAAyB4C,EAAKnB,EAAKN,GAYjC,OAXIM,KAAOmB,EACThC,OAAOC,eAAe+B,EAAKnB,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZ+B,cAAc,EACdC,UAAU,IAGZF,EAAInB,GAAON,EAGNyB,I,cCMT3C,EAAOD,QAlBP,SAAwB+C,GACtB,IAAIC,EAEJ,GAAsB,oBAAX/B,OAAwB,CACjC,GAAIA,OAAOgC,eAEK,OADdD,EAASD,EAAS9B,OAAOgC,gBACL,OAAOD,EAAO3C,KAAK0C,GAGzC,GAAI9B,OAAOiC,UAEK,OADdF,EAASD,EAAS9B,OAAOiC,WACL,OAAOF,EAAO3C,KAAK0C,GAI3C,MAAM,IAAII,UAAU,kC,40CCXtB,IAAIC,OAAQC,EACZ,MAAMC,EAAc,IAAIC,IAClBC,EAAW,CAACC,EAAGC,IAAOA,EAOb,SAASC,EAASC,EAAUJ,GACzC,MAAOK,EAAQC,GAAeC,qBAAWH,EAASR,EAAOQ,GASzD,OARAI,wBAAcZ,GAEda,oBAAU,KACRH,EAAYV,GACZE,EAAYY,IAAIJ,GACT,IAAMR,EAAYa,OAAOL,IAC/B,IAEID,EAITO,IAAKC,aAAaC,IAChBlB,EAAQkB,EAAUA,EAAQlB,MAAQ,KAClC,IAAK,MAAMmB,KAAcjB,EACvBiB,EAAWnB,KC3Bf,MAAMoB,EAAY,CAACf,EAAGC,SAAcL,IAAPK,OAAmBL,EAAmB,OAAPK,EAM7C,SAASe,IACtB,MAAMC,EAAWf,EAASa,GAE1B,OADAR,wBAAcU,GACPA,ECTT,MAAMC,EAAS,CAAClB,EAAGC,SAAcL,IAAPK,OAAmBL,EAAmB,OAAPK,EAM1C,SAASkB,IACtB,MAAMC,EAAYlB,EAASgB,GAE3B,OADAX,wBAAca,GACPA,ECNM3C,UAAM4C,cAAc,ICIpB,SAASC,IACtB,MAAMC,EAAeC,qBAAWC,GAEhC,OADAlB,wBAAcgB,EAAaG,WAAa,MACjCH,E,oCCPF,SAASI,EAAYC,GAG1B,MAFI,iBAAiBC,KAAKD,KACxBA,EAAO,KAAIA,OACNA,EAMF,SAASE,EAAK/C,EAAQgD,GAC3B,MAAMC,EAAc,GACpB,IAAK,MAAMhE,KAAO+D,EAChBC,EAAYhE,GAAOe,EAAOf,GAC5B,OAAOgE,EAOF,SAASC,EAAeC,GAC7B,OAAOA,EAAUC,aAAeD,EAAUlF,MAAQ,YAkB7C,SAASoF,GAAgB,KAC9BC,GAAO,EADuB,YAE9BC,EAAc,GAFgB,WAG9BC,GAAaF,EAAO,EAAI,IACtB,IACF,IAAIG,EAAQ,GAAIC,EAAY,EAG5B,SAASC,IACPD,EAAYD,EAAM1D,QAAU6D,WAAWD,EAAgBJ,GACvDE,EAAMI,OAAO,EAAGL,GAAYM,QAAQC,OAASC,MAAKC,UAASC,aACzD,IACED,QAAcD,KAEhB,MAAOG,GACLD,EAAOC,MAKb,MAAO,CAELC,SAAU,SAASA,EAASC,EAAWC,EAAQ,MAE7C,IAAKC,MAAMC,QAAQH,GACjB,OAAOD,EAAS,CAACC,IAAY,GAG/B,MAAMI,EAAQ,GACRC,EAAUL,EAAUM,IAAIX,GAC5B,IAAIY,QAAQ,CAACX,EAASC,IACpBO,EAAMI,KAAK,CAAEb,MAAKC,UAASC,SAAQI,YASvC,OANIhB,EACFG,EAAQgB,EAERhB,EAAMoB,QAAQJ,GACXf,GACHC,IACKe,GAKTI,MAAO,SAAUR,GACf,MAAMS,EAAkBtB,EAAM1D,OAAS,EAEvC,OADA0D,EAAQA,EAAMuB,OAAOC,QAAkBpE,IAAVyD,GAAuBW,EAAKX,QAAUA,GAC5DS,I,oBC1Fb,MAAMG,EAAiB7B,IAMR,MAAM8B,EAAoB,iCAC7B,IAD6B,mBAE9B,GAGTC,UACElF,KAAKmF,QAAU,GACfnF,KAAKoF,QAAS,EACdJ,EAAeJ,MAAM5E,MAIvB,eAAeqF,EAAQC,EAAOC,GAE5BA,EAAe,CAAEJ,SAAS,EAAMlB,WAAOtD,IAGvC,MAAM6E,EAAaR,EAAed,SAAS,IACtChG,OAAOuH,QAAQJ,GAAQZ,IAAI,EAAE1F,EAAK2G,KACnC,IAAM1F,KAAK2F,gBAAgB5G,EAAK2G,EAAMH,OACrCrH,OAAOuH,QAAQH,GAAOb,IAAI,EAAE1F,EAAK2G,KAClC,IAAM1F,KAAK4F,eAAe7G,EAAK2G,EAAMH,KACtCvF,MAGH,UACQ0E,QAAQmB,IAAIL,GAEpB,MAAOvB,GACLsB,EAAe,CAAEtB,UAKnB,MAAM6B,QAAiBpB,QAAQmB,IAAIL,EAAWf,IAAIsB,GAAKA,EAAEC,MAAM/B,IAC7DgC,QAAQC,KAAK,0BAA2B,gCAAiCjC,IAClE,MAGLjE,KAAKoF,QAGJU,EAASK,KAAKC,IAASA,IAA8C,IAArClI,OAAO4E,KAAK9C,KAAKmF,SAAStF,QAC7D0F,EAAe,CAAEJ,SAAS,IAI9B,sBAAsBpG,EAAK2G,EAAMH,GAE/B,MAAMc,EAAUrG,KAAKmF,QAAQpG,GAAOiB,KAAKsG,kBAAkBZ,GAC3D,IAAIjH,EACJ,IAGE,GAFAA,QAAc4H,EAEVrG,KAAKmF,QAAQpG,KAASsH,EACxB,OAAO,EAJX,QAQMrG,KAAKmF,QAAQpG,KAASsH,WACjBrG,KAAKmF,QAAQpG,GACpBwG,EAAe,CAAE,CAACxG,GAAMN,KAG5B,OAAO,EAIT,qBAAqBM,EAAK2G,EAAMH,GAE9B,IAAIgB,GAAQ,EACZ,MAAMC,EAAQ,GACRnG,EAAWL,KAAKmF,QAAQpG,GAAOiB,KAAKsG,kBAAkBZ,GACtDe,EAAS,KAAOzG,KAAKoF,QAAUG,EAAe,CAAE,CAACxG,GAAM,IAAIyH,KAC3DE,EAAcvD,EAAgB,CAAEE,YAAa,IAAKD,MAAM,IAC9D,IAAI,oBACF,kBAAyB/C,GAAzB,kDAAmC,OAAlBsG,EAAkB,EAEjC,GAAI3G,KAAKmF,QAAQpG,KAASsB,EAExB,OADAqG,EAAY9B,SACL,EAGT2B,GAAQ,EACRC,EAAM7B,KAAKgC,GACXD,EAAYxC,SAASuC,IAVrB,yFAAJ,QAeE,MAAMG,EAAcL,GAASG,EAAY9B,QACrC5E,KAAKmF,QAAQpG,KAASsB,WACjBL,KAAKmF,QAAQpG,GAChB6H,GACFH,KAGN,OAAO,EAITH,kBAAkBZ,GAEhB,OAAKA,EAGoB,iBAATA,EACPmB,IAAK9C,QAAQ2B,GAGbA,EANA,IC5Gb,MAAMjH,EAAQ,CAAE0C,YAAQR,EAAWwE,SAAS,EAAMlB,WAAOtD,GACnDmG,EAAO,CAAE3F,OAAQ,GAAIgE,SAAS,EAAMlB,WAAOtD,GAC3CoG,EAAO,GAME,SAASC,EAAUC,EAAYC,GAAW,GAEvD,MAAMxG,EAAQO,IACRqB,EAAeD,MAGd,OAAElB,EAAF,QAAUgE,EAAV,MAAmBlB,GAASwC,GAAUU,mBAASD,EAAWJ,EAAOrI,GAaxE,OAZA6C,wBAAc2C,GAAS9C,EAAQiG,GAG/B7F,oBAAU,KACR,MAAM8F,EAAY,IAAIpC,EAChBqC,EAAQ,CAAEnG,OAAQ8F,GAGxB,OAFAI,EAAUE,SAAUL,EAAmBH,EAARO,EAAcJ,EAAWI,EAAQP,EAC9DS,GAAWf,EAAOgB,IAAW,IAAMA,KAAYD,MAC1C,IAAMH,EAAUnC,WACtB,CAAC+B,EAAY3E,EAAc5B,GAA+B,iBAAfuG,IAGvC,CAAC9F,EAAQgE,EAASlB,GAGpB,SAASmD,EAASlI,GACvB,OAAOmF,MAAMC,QAAQpF,GAAUA,EAAOuF,IAAI2C,GAAa,GAAElI,EC9B5C,SAASwI,EAAeT,GACrC,MAAOxI,GAASuI,EAAUC,GAAY,GAEtC,OADA3F,wBAAc7C,EAAO2I,GACd3I,ECHM,SAASkJ,EAAcV,GACpC,MAAOT,GAASQ,EAAUC,GAAY,GAEtC,OADA3F,wBAAckF,EAAOY,GACdZ,E,IJwB4BzI,EAAM6J,E,gBKzB5BC,GLyBsB9J,EKzBD,YLyBO6J,EKzBM3E,GAC/C6E,GAAS,kBAAC7E,EAAD,OAAe6E,EAAf,CAAsBpH,MAAOO,OLyB/BgC,IACL,MAAM8E,EAAUH,EAAc3E,GAE9B,OADA8E,EAAQ7E,YAAe,GAAEnF,KAAQiF,EAAeC,MACzC8E,IM5BI,SAASC,EAAoBC,EAAYC,EAAWjF,GAE5DA,KACFA,EAAWiF,GAAa,CAACA,EAAW,KACvCD,EAAaA,EAAa,IAAIA,GAAc,GAC5CC,EAAYA,EAAY,IAAIA,GAAa,GAGzC,MAAMC,EAAe,CAAEhD,SAAS,GAChC,IAAK,MAAMpH,KAAQkK,EACjBE,EAAapK,QAAQ4C,EACvB,IAAK,MAAM5C,KAAQmK,EACjBC,EAAapK,GAAQ,GAGvB,MAAMqK,UAA4B5I,IAAMyD,UAAU,+CAGxCkF,GAERE,oBACErI,KAAKqH,UAAY,IAAIpC,EACrBjF,KAAKyG,OAAS6B,GAAStI,KAAKuI,SAASD,GACrCtI,KAAKuH,SAASU,EAAYC,GAG5BM,mBAAmBC,GAIjB,MAAMC,EAAU1I,KAAK8H,MAAMpH,QAAU+H,EAAU/H,MACzC8G,EAAUzJ,GAAQiC,KAAK8H,MAAM/J,KAAU0K,EAAU1K,IACnD2K,GAAuC,iBAArB1I,KAAK8H,MAAM/J,GACjCiC,KAAKuH,SAASU,EAAWnD,OAAO0C,GAAUU,EAAUpD,OAAO0C,IAG7DmB,uBACE3I,KAAKqH,UAAUnC,UAGjB0D,SACE,OAAO,kBAAC3F,EAAD,OAAejD,KAAK8H,MAAW9H,KAAKsI,QAG7Cf,SAASlC,EAAQC,GACf,MAAM,MAAEwC,EAAF,UAAST,GAAcrH,MACzBqF,EAAOxF,OAAS,GAAKyF,EAAMzF,OAAS,IACtCwH,EAAUE,SAAS1E,EAAKiF,EAAOzC,GAASxC,EAAKiF,EAAOxC,GAAQtF,KAAKyG,SAGvE,OAlD4E,IAetE2B,EAfsE,cAgBpD,uBAAsBpF,EAAeC,OAkCtD4F,EAAUT,GCrDJ,SAASU,EAAaC,EAAUC,GAC7C,OAAOhB,EAAoB,GAAI,CAACe,GAAWC,GCJ9B,SAASC,GAAS,SAAEC,EAAW,OAE5C,OADiBnH,IACCmH,EAAW,KCFhB,SAASC,GAAU,SAAED,EAAW,OAE7C,OADkBhH,IACCgH,EAAW,KCDjB,SAASE,GAAY,MAClCC,EADkC,SAElCH,EAAW,SAFuB,UAGlCI,EAAY,qBAEZ,OAAO,4BACLA,UAAWA,EACXC,QAAS,IAAM7H,IAAK8H,WAAW,CAAEC,SAAUJ,KAAWH,GCP3C,SAASQ,GAAa,SACnCR,EAAW,UADwB,UAEnCI,EAAY,sBAEZ,OAAO,4BACLA,UAAWA,EACXC,QAAS,IAAM7H,IAAKiI,UAAWT,GCJpB,SAASU,GAAW,MAAEC,EAAF,OAASF,KAAW7B,IACrD,OAAO/F,IACL,kBAAC2H,EAAiB5B,EAAQ6B,GAC1B,kBAACP,EAAgBtB,EAAQ+B,GCLd,SAASC,GAAM,IAAEnH,EAAF,SAAOuG,IACnC,MAAOzK,EAAO0G,EAASlB,GAAS+C,EAAUrE,GAE1C,OAAIlE,QACM,GAAEA,EAEH0G,EACA+D,GAAY,0BAAMI,UAAU,wBAE5BrF,EACAiF,GAAY,0BAAMI,UAAU,oBAAoBS,aAAY9F,EAAM+F,UAGlEd,GAAY,0BAAMI,UAAU,sBCbxB,SAASW,GAAM,IAAEtH,EAAF,WAAOuH,EAAP,SAAmBhB,EAAW,QAASpB,IAEnE,OADAnF,EAAM+E,EAAe/E,IAAQuH,GAChB,6BAAKvH,IAAKA,EAAKwH,IAAI,IAAOrC,IAAWoB,ECDrC,SAASkB,GAAM,IAAEzH,EAAF,SAAOuG,EAAW,OAC9C,OAAO,kBAACY,EAAD,CAAOnH,IAAKA,GAAUD,EAAYC,GAAd,UAA6BuG,GCD3C,SAASmB,GAAK,KAAEC,EAAF,SAAQpB,KAAapB,IAGhD,OAFAwC,EAAO5C,EAAe4C,IAAS,GAC/BpB,EAAWA,GAAY,kBAACkB,EAAD,CAAOzH,IAAK2H,GAAS,IAAGA,MAAW,GAAEA,GACrDA,EAAO,2BAAGA,KAAMA,GAAUxC,GAAQoB,GAAgBA,ECH5C,SAASqB,GAAK,IAAE5H,EAAF,SAAOuG,EAAW,OAC7C,OAAO,kBAACY,EAAD,CAAOnH,IAAKA,GAAUD,EAAYC,GAAd,SAA4BuG,GCF1C,SAASsB,GAAK,IAC3B7H,EAD2B,OACtB8H,EAAS,EADa,MACVC,EAAQC,IADE,OACQ7F,EAAS,MAAM,GADvB,UAE3B8F,EAAYpE,IAAS,4BAAKA,IAFC,SAG3B0C,EAAW,EAACvC,EAAMkE,IAAU,wBAAI9L,IAAK8L,GAAS,GAAElE,MAEhD,MAAMH,EAAQmB,EAAchF,GACzBmC,OAAOA,GACPgG,MAAML,GAASA,IAAUC,GACzBjG,IAAIyE,GACP,OAAO0B,EAAYA,EAAUpE,GAASA,ECTxC,MAEM5F,GAAc,GAEdmK,GAAa,GAEbC,GAAc,IAAInK,IAMT,MAAMoK,GAEnBC,YAAYrJ,GACV7B,KAAK6B,WAAaA,EAIpB,mBAAmBsJ,GACjB,IAAK,IAAIC,KAAOD,EAAM,CAGpB,GADAC,EAAMA,EAAIC,QAAQ,MAAO,MACnBD,KAAOxK,IAAc,CACzBA,GAAYwK,GAAO,IAAIvK,IACvB,MAAMyK,EAzBF,MAyBYF,EAAc,CAACA,GAAO,IAAIJ,UACpCtG,QAAQmB,IAAIyF,EAAQ7G,IAAI8G,KAGhC3K,GAAYwK,GAAK5J,IAAIxB,KAAK6B,aAK9B,qBAAqBsJ,GACnB,IAAK,IAAIC,KAAOD,EACdC,EAAMA,EAAIC,QAAQ,MAAO,IACrBD,KAAOxK,IACTA,GAAYwK,GAAK3J,OAAOzB,KAAK6B,aAMrCgC,eAAe0H,GAAcH,EAAKI,GAEhC,MAAM,KAAEC,GAAS,IAAIC,IAAIN,GACnBK,KAAQV,KACZA,GAAWU,GAAQ/G,QAAQX,QAAQ,MAAM4H,KAAK,IAYlD9H,eAA+B+H,EAAaJ,EAAU,IACpD,MAAMK,QAoBRhI,eAA+B+H,GAC7B,MACMC,SADiBnK,IAAKoK,MAAMF,IACJG,QAAQ1N,IAAI,eAC1C,IAAKwN,EACH,MAAM,IAAIG,MAAO,0BAAyBJ,GAC5C,OAAOC,EAzBoBI,CAAgBL,GACrCM,EAAY,IAAIC,UAAUN,GAChC,OAAO3N,OAAOwB,OAAOwM,EAAW,CAC9BE,UAAW,IAAIvL,IACfwL,qBAAsB,EACtBC,kBAAmB,IACnBC,WACAC,UAAWC,GACXC,QAASC,GACTC,MAAO,IAAIlI,QAAQX,IACjBmI,EAAUW,OAAS,KACjBX,EAAUG,qBAAuB,EACjCH,EAAUI,kBAAoB,IAC9BvI,QAGHyH,GA5BCsB,CAAgB1B,EAAK,CAAEK,UAASD,MAEpC,MAAMU,QAAkBnB,GAAWU,GAGnCS,EAAUE,UAAU5K,IAAI4J,GAExBc,EAAUK,QAAS,OAAMnB,GAkC3BvH,eAAe0I,GAAQ1F,SACf7G,KAAK4M,MACX5M,KAAK+M,KAAKlG,GAIZ,SAAS4F,IAAe,KAAE5F,IAExB,MAAMmG,EAAQ,aAAaC,KAAKpG,GAChC,IAAKmG,EACH,OAGF,MAAM5B,EAAM4B,EAAM,GAClBE,IAAOC,WAAW/B,GAGlB,MAAM3E,EAAS,CAAEhE,UAAW,IAAI2K,KAAQhC,OACxC,IAAK,MAAMvJ,KAAcjB,GAAYwK,IAAQ,GAC3CvJ,EAAW4E,GACb,IAAK,MAAM5E,KAAcjB,GA9Gf,MA8GmC,GAC3CiB,EAAW4E,GAIf5C,eAAe8I,YAEN5B,GAAW/K,KAAKyL,MAGnBzL,KAAKqM,qBAAuB,UAExB,IAAI3H,QAAQ0B,GAAS1C,WAAW0C,EAAMpG,KAAKsM,0BAE3C5H,QAAQmB,IAAI,IAAI7F,KAAKoM,WAAW3H,IAAI2G,GACxCG,GAAcH,EAAK,CACjBiB,qBAAsBrM,KAAKqM,qBAAuB,EAClDC,kBAA4C,EAAzBtM,KAAKsM,uBAoBhC5K,IAAK2L,GAAG,UAAWjC,IACZJ,GAAYsC,IAAIlC,KApJX,MAqJGxK,IACT2K,GAAcH,GAChBJ,GAAYxJ,IAAI4J,MCvJpB,MAAM,SAAEmC,IAAa/K,EASN,SAASgL,IAAW,UAAEC,EAAY,IAAd,SAAmBvE,EAAW,OAC/D,MAEM5G,ECTO,YAA4B6I,GACzC,MAAO7I,EAAcoL,GAAmBvG,mBAAS,IAOjD,OANA7F,wBAAcgB,EAAaG,WAAa,MACxClB,oBAAU,KACR,MAAMoM,EAAU,IAAI1C,GAAcyC,GAElC,OADAC,EAAQF,aAAatC,GACd,IAAMwC,EAAQC,eAAezC,IACnCA,GACI7I,EDCcuL,IAFa,iBAAdJ,EAAyBA,EAC1C,KAAK7K,KAAK6K,GAAaA,EAAUK,OAAOC,MAAM,OAAS,IAE1D,OAAO,kBAACR,GAAD,CAAU9O,MAAO6D,GAAe4G,GEZzC,MAAM,GAAE8E,IAAOnH,IAAKoH,QAML,SAASC,IAAe,aACrCC,EAAkBH,GAAF,OADqB,OAErC9O,EAAU,IAAGkP,OAAOC,SAAS/D,QAFQ,SAGrCpB,EAHqC,UAIrCoF,EAAY,OAAOrB,KAAKkB,GAAc,GAJD,UAKrC7E,EAAa,kBAAiBgF,EAAUC,cALH,aAMrCC,EAAeF,EANsB,eAOrCG,EAAiBD,EAPoB,cAQrCE,GAAgBxF,EAAW,CAACsF,EAAc,IAAKtF,GAAYsF,GARtB,gBASrCG,GAAkBzF,EAAW,CAACuF,EAAgB,IAAKvF,GAAYuF,MAC5D3G,IAGH5I,EAASwD,EAAYxD,GACrB,MAAO0P,EAAQC,GAAa1H,qBACtB2H,EAAWpH,EAAgB,GAAExI,mBAAwBiP,OAwB3D,YAvBexN,IAAXiO,GAAwBE,GAC1BD,GAAU,GAqBZvF,EAAa,GAAEA,KAAasF,EAAS,YAAc,KAEjD,gCAAQtF,UAAWA,EAAWC,QApBhC1F,iBAEEgL,GAAWD,GACX,IAEE,MAAMG,EAAUH,EAAoB,SAAX,eACnB/H,IAAK9C,QAAS,GAAE7E,KAAU6P,cAAmBZ,OAEnDU,GAAWD,GAEb,MAAO3K,GAEL4K,EAAUD,GACV3I,QAAQC,KAAK,0BAA2BjC,MAOiB6D,GACvD8G,EAASD,EAAkBD,GAM5B,SAASM,GAAqBC,EAAMC,EAAUC,EAAYC,GAC/D,MAAMjB,EAAgB,GAAEH,KAAKiB,IAC7B,MAAO,EACL/P,SACAgK,YAAWhK,EAAS,KAAO,aAC3BsP,eAAeU,EACfT,kBAAiBvF,EAAWiG,EAAaC,MACtCtH,KAEH,kBAACoG,GAAD,OAAoBpG,EACd,CAAEqG,eAAcjP,SAAQgK,WAAUsF,eAAcC,oBCjE3CO,UAAqB,OAAQ,OAAQ,YAAa,SCAlDA,MAAqB,UAAW,UAAW,eAAgB,YCA3DA,MAAqB,SAAU,SAAU,aAAc","file":"solid-react.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = React;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","module.exports = solid[\"auth\"];","module.exports = solid[\"data\"];","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}\n\nmodule.exports = _asyncIterator;","import { useReducer, useEffect, useDebugValue } from 'react';\nimport auth from 'solid-auth-client';\n\n// Keep track of the WebID and the state setters tracking it\nlet webId = undefined;\nconst subscribers = new Set();\nconst getWebId = (_, id) => id;\n\n/**\n * Returns the WebID (string) of the active user,\n * `null` if there is no user,\n * or `undefined` if the user state is pending.\n */\nexport default function useWebId(reducer = getWebId) {\n  const [result, updateWebId] = useReducer(reducer, webId, reducer);\n  useDebugValue(webId);\n\n  useEffect(() => {\n    updateWebId(webId);\n    subscribers.add(updateWebId);\n    return () => subscribers.delete(updateWebId);\n  }, []);\n\n  return result;\n}\n\n// Inform subscribers when the WebID changes\nauth.trackSession(session => {\n  webId = session ? session.webId : null;\n  for (const subscriber of subscribers)\n    subscriber(webId);\n});\n","import { useDebugValue } from 'react';\nimport useWebId from './useWebId';\n\nconst isNotNull = (_, id) => id === undefined ? undefined : id !== null;\n\n/**\n * Returns whether the user is logged in,\n * or `undefined` if the user state is pending.\n */\nexport default function useLoggedIn() {\n  const loggedIn = useWebId(isNotNull);\n  useDebugValue(loggedIn);\n  return loggedIn;\n}\n","import { useDebugValue } from 'react';\nimport useWebId from './useWebId';\n\nconst isNull = (_, id) => id === undefined ? undefined : id === null;\n\n/**\n * Returns whether the user is logged out,\n * or `undefined` if the user state is pending.\n */\nexport default function useLoggedOut() {\n  const loggedOut = useWebId(isNull);\n  useDebugValue(loggedOut);\n  return loggedOut;\n}\n","import React from 'react';\n\n/**\n * Context that tracks the latest updates to resources\n * and has its value set to `{ timestamp, url }`.\n */\nexport default React.createContext({});\n","import { useContext, useDebugValue } from 'react';\nimport UpdateContext from '../UpdateContext';\n\n/**\n * Hook that rerenders components inside of a <LiveUpdate> container\n * whenever an update happens to one of the subscribed resources.\n *\n * This is a shortcut for using UpdateContext as a context,\n * and returns the latest update as `{ timestamp, url }`.\n */\nexport default function useLiveUpdate() {\n  const latestUpdate = useContext(UpdateContext);\n  useDebugValue(latestUpdate.timestamp || null);\n  return latestUpdate;\n}\n","/**\n * A src property should be a valid LDflex expression,\n * but it can also be specified as a URL.\n * This function turns URLs into valid LDflex expressions,\n * which is useful if you want to manipulate expressions directly.\n */\nexport function srcToLDflex(src) {\n  if (/^https?:[^\"]+$/.test(src))\n    src = `[\"${src}\"]`;\n  return src;\n}\n\n/**\n * Returns an object with only the given keys from the source.\n */\nexport function pick(source, keys) {\n  const destination = {};\n  for (const key of keys)\n    destination[key] = source[key];\n  return destination;\n}\n\n/**\n * Determines the display name of a component\n * https://reactjs.org/docs/higher-order-components.html\n */\nexport function getDisplayName(Component) {\n  return Component.displayName || Component.name || 'Component';\n}\n\n/**\n * Creates a higher-order component with the given name.\n */\nexport function higherOrderComponent(name, createWrapper) {\n  return Component => {\n    const Wrapper = createWrapper(Component);\n    Wrapper.displayName = `${name}(${getDisplayName(Component)})`;\n    return Wrapper;\n  };\n}\n\n/**\n * Creates a task queue that enforces a minimum time between tasks.\n * Optionally, new tasks can cause any old ones to be dropped.\n */\nexport function createTaskQueue({\n  drop = false,\n  timeBetween = 10,\n  concurrent = drop ? 1 : 4,\n} = {}) {\n  let queue = [], scheduler = 0;\n\n  // Runs all queued tasks, with the required minimum time in between\n  function runQueuedTasks() {\n    scheduler = queue.length && setTimeout(runQueuedTasks, timeBetween);\n    queue.splice(0, concurrent).forEach(async ({ run, resolve, reject }) => {\n      try {\n        resolve(await run());\n      }\n      catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  return {\n    /** Schedules the given task(s) */\n    schedule: function schedule(functions, group = null) {\n      // Schedule a single task\n      if (!Array.isArray(functions))\n        return schedule([functions])[0];\n\n      // Create the tasks and their result promises\n      const tasks = [];\n      const results = functions.map(run =>\n        new Promise((resolve, reject) =>\n          tasks.push({ run, resolve, reject, group })));\n\n      // Schedule the tasks\n      if (drop)\n        queue = tasks;\n      else\n        queue.push(...tasks);\n      if (!scheduler)\n        runQueuedTasks();\n      return results;\n    },\n\n    /** Forgets pending tasks (optionally only those in a given group).\n        Returns a boolean indicating whether there were any. */\n    clear: function (group) {\n      const hadPendingTasks = queue.length > 0;\n      queue = queue.filter(task => group !== undefined && task.group !== group);\n      return hadPendingTasks;\n    },\n  };\n}\n","import { createTaskQueue } from './util';\nimport data from '@solid/query-ldflex';\n\nconst evaluatorQueue = createTaskQueue();\n\n/**\n * Evaluates a map of LDflex expressions into a singular value or a list.\n * Expressions can be changed and/or re-evaluated.\n */\nexport default class ExpressionEvaluator {\n  pending = {};\n  cancel = false;\n\n  /** Stops all pending and future evaluations */\n  destroy() {\n    this.pending = {};\n    this.cancel = true;\n    evaluatorQueue.clear(this);\n  }\n\n  /** Evaluates the given singular value and list expressions. */\n  async evaluate(values, lists, updateCallback) {\n    // Reset the pending status and clear any errors\n    updateCallback({ pending: true, error: undefined });\n\n    // Create evaluators for each expression, and mark them as pending\n    const evaluators = evaluatorQueue.schedule([\n      ...Object.entries(values).map(([key, expr]) =>\n        () => this.evaluateAsValue(key, expr, updateCallback)),\n      ...Object.entries(lists).map(([key, expr]) =>\n        () => this.evaluateAsList(key, expr, updateCallback)),\n    ], this);\n\n    // Wait until all evaluators are done (or one of them errors)\n    try {\n      await Promise.all(evaluators);\n    }\n    catch (error) {\n      updateCallback({ error });\n    }\n\n    // Update the pending flag if all evaluators wrote their value or errored,\n    // and if no new evaluators are pending\n    const statuses = await Promise.all(evaluators.map(e => e.catch(error => {\n      console.warn('@solid/react-components', 'Expression evaluation failed.', error);\n      return true;\n    })));\n    // Stop if results are no longer needed\n    if (this.cancel)\n      return;\n    // Reset the pending flag if all are done and no others are pending\n    if (!statuses.some(done => !done) && Object.keys(this.pending).length === 0)\n      updateCallback({ pending: false });\n  }\n\n  /** Evaluates the property expression as a singular value. */\n  async evaluateAsValue(key, expr, updateCallback) {\n    // Obtain and await the promise\n    const promise = this.pending[key] = this.resolveExpression(expr);\n    let value;\n    try {\n      value = await promise;\n      // Stop if another evaluator took over in the meantime (component update)\n      if (this.pending[key] !== promise)\n        return false;\n    }\n    // Update the result and remove the evaluator, even in case of errors\n    finally {\n      if (this.pending[key] === promise) {\n        delete this.pending[key];\n        updateCallback({ [key]: value });\n      }\n    }\n    return true;\n  }\n\n  /** Evaluates the property expression as a list. */\n  async evaluateAsList(key, expr, updateCallback) {\n    // Read the iterable's items, throttling updates to avoid congestion\n    let empty = true;\n    const items = [];\n    const iterable = this.pending[key] = this.resolveExpression(expr);\n    const update = () => !this.cancel && updateCallback({ [key]: [...items] });\n    const updateQueue = createTaskQueue({ timeBetween: 100, drop: true });\n    try {\n      for await (const item of iterable) {\n        // Stop if another evaluator took over in the meantime (component update)\n        if (this.pending[key] !== iterable) {\n          updateQueue.clear();\n          return false;\n        }\n        // Add the item and schedule an update\n        empty = false;\n        items.push(item);\n        updateQueue.schedule(update);\n      }\n    }\n    // Ensure pending updates are applied immediately, and the evaluator is removed\n    finally {\n      const needsUpdate = empty || updateQueue.clear();\n      if (this.pending[key] === iterable) {\n        delete this.pending[key];\n        if (needsUpdate)\n          update();\n      }\n    }\n    return true;\n  }\n\n  /** Resolves the expression into an LDflex path. */\n  resolveExpression(expr) {\n    // Ignore an empty expression\n    if (!expr)\n      return '';\n    // Resolve an LDflex string expression\n    else if (typeof expr === 'string')\n      return data.resolve(expr);\n    // Return a resolved LDflex path (and any other object) as-is\n    else\n      return expr;\n  }\n}\n","import { useState, useEffect, useDebugValue } from 'react';\nimport useWebId from './useWebId';\nimport useLiveUpdate from './useLiveUpdate';\nimport ExpressionEvaluator from '../ExpressionEvaluator';\n\nconst value = { result: undefined, pending: true, error: undefined };\nconst list = { result: [], pending: true, error: undefined };\nconst none = {};\n\n/**\n * Evaluates the Solid LDflex expression.\n * Returns an array of [result, pending, error].\n */\nexport default function useLDflex(expression, listMode = false) {\n  // The user's WebID and recent updates might influence the evaluation\n  const webId = useWebId();\n  const latestUpdate = useLiveUpdate();\n\n  // Obtain the latest expression result from the state\n  const [{ result, pending, error }, update] = useState(listMode ? list : value);\n  useDebugValue(error || result, toString);\n\n  // Set up the expression evaluator\n  useEffect(() => {\n    const evaluator = new ExpressionEvaluator();\n    const query = { result: expression };\n    evaluator.evaluate(!listMode ? query : none, listMode ? query : none,\n      changed => update(current => ({ ...current, ...changed })));\n    return () => evaluator.destroy();\n  }, [expression, latestUpdate, webId && typeof expression === 'string']);\n\n  // Return the state components\n  return [result, pending, error];\n}\n\nexport function toString(object) {\n  return Array.isArray(object) ? object.map(toString) : `${object}`;\n}\n","import { useDebugValue } from 'react';\nimport useLDflex, { toString } from './useLDflex';\n\n/**\n * Evaluates the Solid LDflex expression into a single value.\n */\nexport default function useLDflexValue(expression) {\n  const [value] = useLDflex(expression, false);\n  useDebugValue(value, toString);\n  return value;\n}\n","import { useDebugValue } from 'react';\nimport useLDflex, { toString } from './useLDflex';\n\n/**\n * Evaluates the Solid LDflex expression into a list.\n */\nexport default function useLDflexList(expression) {\n  const [items] = useLDflex(expression, true);\n  useDebugValue(items, toString);\n  return items;\n}\n","import React from 'react';\nimport useWebId from '../hooks/useWebId';\nimport { higherOrderComponent } from '../util';\n\n/**\n * Higher-order component that passes the WebID of the logged-in user\n * to the webId property of the wrapped component.\n */\nexport default higherOrderComponent('WithWebId', Component =>\n  props => <Component {...props} webId={useWebId()} />);\n","import React from 'react';\nimport withWebId from './withWebId';\nimport ExpressionEvaluator from '../ExpressionEvaluator';\nimport { pick, getDisplayName } from '../util';\n\n/**\n * Higher-order component that evaluates LDflex expressions in properties\n * and passes their results to the wrapped component.\n */\nexport default function evaluateExpressions(valueProps, listProps, Component) {\n  // Shift the optional listProps parameter when not specified\n  if (!Component)\n    [Component, listProps] = [listProps, []];\n  valueProps = valueProps ? [...valueProps] : [];\n  listProps = listProps ? [...listProps] : [];\n\n  // Create the initial state for all Component instances\n  const initialState = { pending: true };\n  for (const name of valueProps)\n    initialState[name] = undefined;\n  for (const name of listProps)\n    initialState[name] = [];\n\n  // Create a higher-order component that wraps the given Component\n  class EvaluateExpressions extends React.Component {\n    static displayName = `EvaluateExpressions(${getDisplayName(Component)})`;\n\n    state = initialState;\n\n    componentDidMount() {\n      this.evaluator = new ExpressionEvaluator();\n      this.update = state => this.setState(state);\n      this.evaluate(valueProps, listProps);\n    }\n\n    componentDidUpdate(prevProps) {\n      // A property needs to be re-evaluated if it changed\n      // or, if it is a string expression, when the user has changed\n      // (which might influence the expression's evaluation).\n      const newUser = this.props.webId !== prevProps.webId;\n      const changed = name => this.props[name] !== prevProps[name] ||\n          newUser && typeof this.props[name] === 'string';\n      this.evaluate(valueProps.filter(changed), listProps.filter(changed));\n    }\n\n    componentWillUnmount() {\n      this.evaluator.destroy();\n    }\n\n    render() {\n      return <Component {...this.props} {...this.state} />;\n    }\n\n    evaluate(values, lists) {\n      const { props, evaluator } = this;\n      if (values.length > 0 || lists.length > 0)\n        evaluator.evaluate(pick(props, values), pick(props, lists), this.update);\n    }\n  }\n  return withWebId(EvaluateExpressions);\n}\n","import evaluateExpressions from './evaluateExpressions';\n\n/**\n * Higher-order component that evaluates an LDflex list expression in a property\n * and passes its items to the wrapped component.\n */\nexport default function EvaluateList(propName, WrappedComponent) {\n  return evaluateExpressions([], [propName], WrappedComponent);\n}\n","import useLoggedIn from '../hooks/useLoggedIn';\n\n/** Pane that only shows its contents when the user is logged in. */\nexport default function LoggedIn({ children = null }) {\n  const loggedIn = useLoggedIn();\n  return loggedIn ? children : null;\n}\n","import useLoggedOut from '../hooks/useLoggedOut';\n\n/** Pane that only shows its contents when the user is logged out. */\nexport default function LoggedOut({ children = null }) {\n  const loggedOut = useLoggedOut();\n  return loggedOut ? children : null;\n}\n","import React from 'react';\nimport auth from 'solid-auth-client';\n\n/** Button that lets the user log in with Solid. */\nexport default function LoginButton({\n  popup,\n  children = 'Log in',\n  className = 'solid auth login',\n}) {\n  return <button\n    className={className}\n    onClick={() => auth.popupLogin({ popupUri: popup })}>{children}</button>;\n}\n","import React from 'react';\nimport auth from 'solid-auth-client';\n\n/** Button that lets the user log out with Solid. */\nexport default function LogoutButton({\n  children = 'Log out',\n  className = 'solid auth logout',\n}) {\n  return <button\n    className={className}\n    onClick={() => auth.logout()}>{children}</button>;\n}\n","import React from 'react';\nimport LoginButton from './LoginButton';\nimport LogoutButton from './LogoutButton';\nimport useLoggedIn from '../hooks/useLoggedIn';\n\n/** Button that lets the user log in or out with Solid.  */\nexport default function AuthButton({ login, logout, ...props }) {\n  return useLoggedIn() ?\n    <LogoutButton {...props}>{logout}</LogoutButton> :\n    <LoginButton {...props}>{login}</LoginButton>;\n}\n","import React from 'react';\nimport useLDflex from '../hooks/useLDflex';\n\n/** Displays the value of a Solid LDflex expression. */\nexport default function Value({ src, children }) {\n  const [value, pending, error] = useLDflex(src);\n  // Render stringified value\n  if (value !== undefined && value !== null)\n    return `${value}`;\n  // Render pending state\n  else if (pending)\n    return children || <span className=\"solid value pending\"/>;\n  // Render error state\n  else if (error)\n    return children || <span className=\"solid value error\" data-error={error.message}/>;\n  // Render empty value\n  else\n    return children || <span className=\"solid value empty\"/>;\n}\n","import React from 'react';\nimport useLDflexValue from '../hooks/useLDflexValue';\n\n/** Displays an image whose source is a Solid LDflex expression. */\nexport default function Image({ src, defaultSrc, children = null, ...props }) {\n  src = useLDflexValue(src) || defaultSrc;\n  return src ? <img src={src} alt=\"\" {...props}/> : children;\n}\n","import React from 'react';\nimport Value from './Value';\nimport { srcToLDflex } from '../util';\n\n/** Displays the label of a Solid LDflex subject. */\nexport default function Label({ src, children = null }) {\n  return <Value src={src && `${srcToLDflex(src)}.label`}>{children}</Value>;\n}\n","import React from 'react';\nimport Label from './Label';\nimport useLDflexValue from '../hooks/useLDflexValue';\n\n/** Creates a link to the value of the Solid LDflex expression. */\nexport default function Link({ href, children, ...props }) {\n  href = useLDflexValue(href) || '';\n  children = children || <Label src={href && `[${href}]`}>{`${href}`}</Label>;\n  return href ? <a href={href} {...props}>{children}</a> : children;\n}\n","import React from 'react';\nimport Value from './Value';\nimport { srcToLDflex } from '../util';\n\n/** Displays the name of a Solid LDflex subject. */\nexport default function Name({ src, children = null }) {\n  return <Value src={src && `${srcToLDflex(src)}.name`}>{children}</Value>;\n}\n","import React from 'react';\nimport useLDflexList from '../hooks/useLDflexList';\n\n/** Displays a list of items matching a Solid LDflex expression. */\nexport default function List({\n  src, offset = 0, limit = Infinity, filter = () => true,\n  container = items => <ul>{items}</ul>,\n  children = (item, index) => <li key={index}>{`${item}`}</li>,\n}) {\n  const items = useLDflexList(src)\n    .filter(filter)\n    .slice(offset, +offset + +limit)\n    .map(children);\n  return container ? container(items) : items;\n}\n","import auth from 'solid-auth-client';\nimport ldflex from '@solid/query-ldflex';\n\n// Wildcard for tracking all resources\nconst ALL = '*';\n// Subscribers per resource URL\nconst subscribers = {};\n// WebSockets per host\nconst webSockets = {};\n// All fetched URLs\nconst fetchedUrls = new Set();\n\n/**\n * Notifies a subscriber of updates to resources on a Solid server,\n * by listening to its WebSockets.\n */\nexport default class UpdateTracker {\n  /** Create a tracker that sends updates to the given subscriber function. */\n  constructor(subscriber) {\n    this.subscriber = subscriber;\n  }\n\n  /** Subscribes to changes in the given resources */\n  async subscribe(...urls) {\n    for (let url of urls) {\n      // Create a new subscription to the resource if none existed\n      url = url.replace(/#.*/, '');\n      if (!(url in subscribers)) {\n        subscribers[url] = new Set();\n        const tracked = url !== ALL ? [url] : [...fetchedUrls];\n        await Promise.all(tracked.map(trackResource));\n      }\n      // Add the new subscriber\n      subscribers[url].add(this.subscriber);\n    }\n  }\n\n  /** Unsubscribes to changes in the given resources */\n  async unsubscribe(...urls) {\n    for (let url of urls) {\n      url = url.replace(/#.*/, '');\n      if (url in subscribers)\n        subscribers[url].delete(this.subscriber);\n    }\n  }\n}\n\n/** Tracks updates to the given resource */\nasync function trackResource(url, options) {\n  // Obtain a WebSocket for the given host\n  const { host } = new URL(url);\n  if (!(host in webSockets)) {\n    webSockets[host] = Promise.resolve(null).then(() =>\n      createWebSocket(url, { host, ...options }));\n  }\n  const webSocket = await webSockets[host];\n\n  // Track subscribed resources to resubscribe later if needed\n  webSocket.resources.add(url);\n  // Subscribe to updates on the resource\n  webSocket.enqueue(`sub ${url}`);\n}\n\n/** Creates a WebSocket for the given URL. */\nasync function createWebSocket(resourceUrl, options = {}) {\n  const webSocketUrl = await getWebSocketUrl(resourceUrl);\n  const webSocket = new WebSocket(webSocketUrl);\n  return Object.assign(webSocket, {\n    resources: new Set(),\n    reconnectionAttempts: 0,\n    reconnectionDelay: 1000,\n    enqueue,\n    onmessage: processMessage,\n    onclose: reconnect,\n    ready: new Promise(resolve => {\n      webSocket.onopen = () => {\n        webSocket.reconnectionAttempts = 0;\n        webSocket.reconnectionDelay = 1000;\n        resolve();\n      };\n    }),\n  }, options);\n}\n\n/** Retrieves the WebSocket URL for the given resource. */\nasync function getWebSocketUrl(resourceUrl) {\n  const response = await auth.fetch(resourceUrl);\n  const webSocketUrl = response.headers.get('Updates-Via');\n  if (!webSocketUrl)\n    throw new Error(`No WebSocket found for ${resourceUrl}`);\n  return webSocketUrl;\n}\n\n/** Enqueues data on the WebSocket */\nasync function enqueue(data) {\n  await this.ready;\n  this.send(data);\n}\n\n/** Processes an update message from the WebSocket */\nfunction processMessage({ data }) {\n  // Verify the message is an update notification\n  const match = /^pub +(.+)/.exec(data);\n  if (!match)\n    return;\n\n  // Invalidate the cache for the resource\n  const url = match[1];\n  ldflex.clearCache(url);\n\n  // Notify the subscribers\n  const update = { timestamp: new Date(), url };\n  for (const subscriber of subscribers[url] || [])\n    subscriber(update);\n  for (const subscriber of subscribers[ALL] || [])\n    subscriber(update);\n}\n\n/** Reconnects a socket after a backoff delay */\nasync function reconnect() {\n  // Ensure this socket is no longer marked as active\n  delete webSockets[this.host];\n\n  // Try setting up a new socket\n  if (this.reconnectionAttempts < 6) {\n    // Wait a given backoff period before reconnecting\n    await new Promise(done => (setTimeout(done, this.reconnectionDelay)));\n    // Try reconnecting, and back off exponentially\n    await Promise.all([...this.resources].map(url =>\n      trackResource(url, {\n        reconnectionAttempts: this.reconnectionAttempts + 1,\n        reconnectionDelay: this.reconnectionDelay * 2,\n      })\n    ));\n  }\n}\n\n/** Closes all sockets */\nexport async function resetWebSockets() {\n  for (const url in subscribers)\n    delete subscribers[url];\n  for (const host in webSockets) {\n    const socket = await webSockets[host];\n    delete webSockets[host];\n    delete socket.onclose;\n    socket.close();\n  }\n  fetchedUrls.clear();\n}\n\n// Keep track of all fetched resources\nauth.on('request', url => {\n  if (!fetchedUrls.has(url)) {\n    if (ALL in subscribers)\n      trackResource(url);\n    fetchedUrls.add(url);\n  }\n});\n","import React from 'react';\nimport UpdateContext from '../UpdateContext';\nimport useLatestUpdate from '../hooks/useLatestUpdate';\n\nconst { Provider } = UpdateContext;\n\n/**\n * Component that creates an UpdateContext by subscribing\n * to updates of an array (or whitespace-separated string) of resources.\n *\n * Children or descendants that use UpdateContext as a context\n * will be rerendered if any of those resources are updated.\n */\nexport default function LiveUpdate({ subscribe = '*', children = null }) {\n  const urls = typeof subscribe !== 'string' ? subscribe :\n    (/\\S/.test(subscribe) ? subscribe.trim().split(/\\s+/) : []);\n  const latestUpdate = useLatestUpdate(...urls);\n  return <Provider value={latestUpdate}>{children}</Provider>;\n}\n","import { useState, useEffect, useDebugValue } from 'react';\nimport UpdateTracker from '../UpdateTracker';\n\n/**\n * Hook that subscribes to updates on the given resources,\n * returning the latest update as `{ timestamp, url }`.\n */\nexport default function useLatestUpdate(...urls) {\n  const [latestUpdate, setLatestUpdate] = useState({});\n  useDebugValue(latestUpdate.timestamp || null);\n  useEffect(() => {\n    const tracker = new UpdateTracker(setLatestUpdate);\n    tracker.subscribe(...urls);\n    return () => tracker.unsubscribe(...urls);\n  }, urls);\n  return latestUpdate;\n}\n","import React, { useState } from 'react';\nimport data from '@solid/query-ldflex';\nimport { srcToLDflex } from '../util';\nimport useLDflexValue from '../hooks/useLDflexValue';\n\nconst { as } = data.context;\n\n/**\n * Button that displays whether the user has performed an activity;\n * when clicked, performs the activity.\n */\nexport default function ActivityButton({\n  activityType = `${as}Like`,\n  object = `[${window.location.href}]`,\n  children,\n  shortName = /\\w*$/.exec(activityType)[0],\n  className = `solid activity ${shortName.toLowerCase()}`,\n  activateText = shortName,\n  deactivateText = activateText,\n  activateLabel = children ? [activateText, ' ', children] : activateText,\n  deactivateLabel = children ? [deactivateText, ' ', children] : deactivateText,\n  ...props\n}) {\n  // Look up a possibly existing activity\n  object = srcToLDflex(object);\n  const [exists, setExists] = useState();\n  const activity = useLDflexValue(`${object}.findActivity(\"${activityType}\")`);\n  if (exists === undefined && activity)\n    setExists(true);\n\n  // Creates a new activity (if none already exists)\n  async function toggleActivity() {\n    // Optimistically display the result\n    setExists(!exists);\n    try {\n      // Try performing the action\n      const action = !exists ? 'create' : 'delete';\n      await data.resolve(`${object}.${action}Activity(\"${activityType}\")`);\n      // Confirm the result (in case a concurrent action was pending)\n      setExists(!exists);\n    }\n    catch (error) {\n      // Revert to the previous state\n      setExists(exists);\n      console.warn('@solid/react-components', error);\n    }\n  }\n\n  // Return the activity button\n  className = `${className} ${exists ? 'performed' : ''}`;\n  return (\n    <button className={className} onClick={toggleActivity} {...props}>\n      { exists ? deactivateLabel : activateLabel }\n    </button>\n  );\n}\n\n// Internal helper for creating custom activity buttons\nexport function customActivityButton(type, activate, deactivate, deactivateNoChildren) {\n  const activityType = `${as}${type}`;\n  return ({\n    object,\n    children = object ? null : 'this page',\n    activateText = activate,\n    deactivateText = children ? deactivate : deactivateNoChildren,\n    ...props\n  }) =>\n    <ActivityButton {...props}\n      {...{ activityType, object, children, activateText, deactivateText }} />;\n}\n","import { customActivityButton } from './ActivityButton';\n\n/** Button to view and perform a \"Like\" action on an item. */\nexport default customActivityButton('Like', 'Like', 'You liked', 'Liked');\n","import { customActivityButton } from './ActivityButton';\n\n/** Button to view and perform a \"Dislike\" action on an item. */\nexport default customActivityButton('Dislike', 'Dislike', 'You disliked', 'Disliked');\n","import { customActivityButton } from './ActivityButton';\n\n/** Button to view and perform a \"Follow\" action on an item. */\nexport default customActivityButton('Follow', 'Follow', 'You follow', 'Following');\n"],"sourceRoot":""}